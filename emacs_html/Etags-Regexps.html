<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Etags Regexps (GNU Emacs Manual)</title>

<meta name="description" content="Etags Regexps (GNU Emacs Manual)">
<meta name="keywords" content="Etags Regexps (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Tags-Tables.html" rel="up" title="Tags Tables">
<link href="Create-Tags-Table.html" rel="prev" title="Create Tags Table">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsubsection-level-extent" id="Etags-Regexps">
<div class="nav-panel">
<p>
Previous: <a href="Create-Tags-Table.html" accesskey="p" rel="prev">Creating Tags Tables</a>, Up: <a href="Tags-Tables.html" accesskey="u" rel="up">Tags Tables</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="Etags-Regexps-1"><span>29.4.2.3 Etags Regexps<a class="copiable-link" href="#Etags-Regexps-1"> &para;</a></span></h4>

<p>The &lsquo;<samp class="samp">--regex</samp>&rsquo; option to <code class="command">etags</code> allows tags to be
recognized by regular expression matching.  You can intermix this
option with file names; each one applies to the source files that
follow it.  If you specify multiple &lsquo;<samp class="samp">--regex</samp>&rsquo; options, all of
them are used in parallel.  The syntax is:
</p>
<div class="example smallexample">
<pre class="example-preformatted">--regex=[<var class="var">{language}</var>]/<var class="var">tagregexp</var>/[<var class="var">nameregexp</var>/]<var class="var">modifiers</var>
</pre></div>

<p>The essential part of the option value is <var class="var">tagregexp</var>, the regexp
for matching tags.  It is always used anchored, that is, it only
matches at the beginning of a line.  If you want to allow indented
tags, use a regexp that matches initial whitespace; start it with
&lsquo;<samp class="samp">[ \t]*</samp>&rsquo;.
</p>
<p>In these regular expressions, &lsquo;<samp class="samp">\</samp>&rsquo; quotes the next character,
and all the C character escape sequences are supported: &lsquo;<samp class="samp">\a</samp>&rsquo; for
bell, &lsquo;<samp class="samp">\b</samp>&rsquo; for back space, &lsquo;<samp class="samp">\e</samp>&rsquo; for escape, &lsquo;<samp class="samp">\f</samp>&rsquo; for
formfeed, &lsquo;<samp class="samp">\n</samp>&rsquo; for newline, &lsquo;<samp class="samp">\r</samp>&rsquo; for carriage return,
&lsquo;<samp class="samp">\t</samp>&rsquo; for tab, and &lsquo;<samp class="samp">\v</samp>&rsquo; for vertical tab.  In addition,
&lsquo;<samp class="samp">\d</samp>&rsquo; stands for the <code class="code">DEL</code> character.
</p>
<p>Ideally, <var class="var">tagregexp</var> should not match more characters than are
needed to recognize what you want to tag.  If the syntax requires you
to write <var class="var">tagregexp</var> so it matches more characters beyond the tag
itself, you should add a <var class="var">nameregexp</var>, to pick out just the tag.
This will enable Emacs to find tags more accurately and to do
completion on tag names more reliably.  In <var class="var">nameregexp</var>, it is
frequently convenient to use &ldquo;back references&rdquo; (see <a class="pxref" href="Regexp-Backslash.html">Backslash in Regular Expressions</a>) to parenthesized groupings &lsquo;<samp class="samp">\(&nbsp;&hellip;&nbsp;\)</samp>&rsquo;<!-- /@w --> in
<var class="var">tagregexp</var>.  For example, &lsquo;<samp class="samp">\1</samp>&rsquo; refers to the first such
parenthesized grouping.  You can find some examples of this below.
</p>
<p>The <var class="var">modifiers</var> are a sequence of zero or more characters that
modify the way <code class="command">etags</code> does the matching.  A regexp with no
modifiers is applied sequentially to each line of the input file, in a
case-sensitive way.  The modifiers and their meanings are:
</p>
<dl class="table">
<dt>&lsquo;<samp class="samp">i</samp>&rsquo;</dt>
<dd><p>Ignore case when matching this regexp.
</p></dd>
<dt>&lsquo;<samp class="samp">m</samp>&rsquo;</dt>
<dd><p>Match this regular expression against the whole file, so that
multi-line matches are possible.
</p></dd>
<dt>&lsquo;<samp class="samp">s</samp>&rsquo;</dt>
<dd><p>Match this regular expression against the whole file, and allow
&lsquo;<samp class="samp">.</samp>&rsquo; in <var class="var">tagregexp</var> to match newlines.
</p></dd>
</dl>

<p>The &lsquo;<samp class="samp">-R</samp>&rsquo; option cancels all the regexps defined by preceding
&lsquo;<samp class="samp">--regex</samp>&rsquo; options.  It too applies to the file names following
it.  Here&rsquo;s an example:
</p>
<div class="example smallexample">
<pre class="example-preformatted">etags --regex=/<var class="var">reg1</var>/i voo.doo --regex=/<var class="var">reg2</var>/m \
    bar.ber -R --lang=lisp los.er
</pre></div>

<p>Here <code class="command">etags</code> chooses the parsing language for <samp class="file">voo.doo</samp> and
<samp class="file">bar.ber</samp> according to their contents.  <code class="command">etags</code> also uses
<var class="var">reg1</var> to recognize additional tags in <samp class="file">voo.doo</samp>, and both
<var class="var">reg1</var> and <var class="var">reg2</var> to recognize additional tags in
<samp class="file">bar.ber</samp>.  <var class="var">reg1</var> is checked against each line of
<samp class="file">voo.doo</samp> and <samp class="file">bar.ber</samp>, in a case-insensitive way, while
<var class="var">reg2</var> is checked against the whole <samp class="file">bar.ber</samp> file,
permitting multi-line matches, in a case-sensitive way.  <code class="command">etags</code>
uses only the Lisp tags rules, with no user-specified regexp matching,
to recognize tags in <samp class="file">los.er</samp>.
</p>
<p>You can restrict a &lsquo;<samp class="samp">--regex</samp>&rsquo; option to match only files of a
given language by using the optional prefix <var class="var">{language}</var>.
(&lsquo;<samp class="samp">etags --help</samp>&rsquo; prints the list of languages recognized by
<code class="command">etags</code>.)  This is particularly useful when storing many
predefined regular expressions for <code class="command">etags</code> in a file.  The
following example tags the <code class="code">DEFVAR</code> macros in the Emacs source
files, for the C language only:
</p>
<div class="example smallexample">
<pre class="example-preformatted">--regex='{c}/[ \t]*DEFVAR_[A-Z_ \t(]+&quot;\([^&quot;]+\)&quot;/\1/'
</pre></div>

<p>When you have complex regular expressions, you can store the list of
them in a file.  The following option syntax instructs <code class="command">etags</code> to
read two files of regular expressions.  The regular expressions
contained in the second file are matched without regard to case.
</p>
<div class="example smallexample">
<pre class="example-preformatted">--regex=@<var class="var">case-sensitive-file</var> --ignore-case-regex=@<var class="var">ignore-case-file</var>
</pre></div>

<p>A regex file for <code class="command">etags</code> contains one regular expression per
line.  Empty lines, and lines beginning with space or tab are ignored.
When the first character in a line is &lsquo;<samp class="samp">@</samp>&rsquo;, <code class="command">etags</code> assumes
that the rest of the line is the name of another file of regular
expressions; thus, one such file can include another file.  All the
other lines are taken to be regular expressions.  If the first
non-whitespace text on the line is &lsquo;<samp class="samp">--</samp>&rsquo;, that line is a comment.
</p>
<p>For example, we can create a file called &lsquo;<samp class="samp">emacs.tags</samp>&rsquo; with the
following contents:
</p>
<div class="example smallexample">
<pre class="example-preformatted">        -- This is for GNU Emacs C source files
{c}/[ \t]*DEFVAR_[A-Z_ \t(]+&quot;\([^&quot;]+\)&quot;/\1/
</pre></div>

<p>and then use it like this:
</p>
<div class="example smallexample">
<pre class="example-preformatted">etags --regex=@emacs.tags *.[ch] */*.[ch]
</pre></div>

<p>Here are some more examples.  The regexps are quoted to protect them
from shell interpretation.
</p>
<ul class="itemize mark-bullet">
<li>Tag Octave files:

<div class="example smallexample">
<pre class="example-preformatted">etags --language=none \
      --regex='/[ \t]*function.*=[ \t]*\([^ \t]*\)[ \t]*(/\1/' \
      --regex='/###key \(.*\)/\1/' \
      --regex='/[ \t]*global[ \t].*/' \
      *.m
</pre></div>

<p>Note that tags are not generated for scripts, so that you have to add
a line by yourself of the form &lsquo;<samp class="samp">###key <var class="var">scriptname</var></samp>&rsquo; if you
want to jump to it.
</p>
</li><li>Tag Tcl files:

<div class="example smallexample">
<pre class="example-preformatted">etags --language=none --regex='/proc[ \t]+\([^ \t]+\)/\1/' *.tcl
</pre></div>

</li><li>Tag VHDL files:

<div class="example smallexample">
<pre class="example-preformatted">etags --language=none \
  --regex='/[ \t]*\(ARCHITECTURE\|CONFIGURATION\) +[^ ]* +OF/' \
  --regex='/[ \t]*\(ATTRIBUTE\|ENTITY\|FUNCTION\|PACKAGE\
  \( BODY\)?\|PROCEDURE\|PROCESS\|TYPE\)[ \t]+\([^ \t(]+\)/\3/'
</pre></div>
</li></ul>

</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Create-Tags-Table.html">Creating Tags Tables</a>, Up: <a href="Tags-Tables.html">Tags Tables</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
