<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Diary Display (GNU Emacs Manual)</title>

<meta name="description" content="Diary Display (GNU Emacs Manual)">
<meta name="keywords" content="Diary Display (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Advanced-Calendar_002fDiary-Usage.html" rel="up" title="Advanced Calendar/Diary Usage">
<link href="Fancy-Diary-Display.html" rel="next" title="Fancy Diary Display">
<link href="Non_002dGregorian-Diary.html" rel="prev" title="Non-Gregorian Diary">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="Diary-Display">
<div class="nav-panel">
<p>
Next: <a href="Fancy-Diary-Display.html" accesskey="n" rel="next">Fancy Diary Display</a>, Previous: <a href="Non_002dGregorian-Diary.html" accesskey="p" rel="prev">Diary Entries Using non-Gregorian Calendars</a>, Up: <a href="Advanced-Calendar_002fDiary-Usage.html" accesskey="u" rel="up">More advanced features of the Calendar and Diary</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Diary-Display-1"><span>32.13.8 Diary Display<a class="copiable-link" href="#Diary-Display-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-diary_002ddisplay_002dfunction"></a>
<a class="index-entry-id" id="index-diary_002dsimple_002ddisplay"></a>
<a class="index-entry-id" id="index-diary_002dfancy_002ddisplay"></a>
<a class="index-entry-id" id="index-diary-buffer"></a>

<p>Diary display works by preparing the list of diary entries and then
running the function specified by the variable
<code class="code">diary-display-function</code>.  The default value
<code class="code">diary-fancy-display</code> displays diary entries and holidays by
copying them into a special buffer that exists only for the sake of
display.  Copying diary entries to a separate buffer provides an
opportunity to change the displayed text to make it prettier&mdash;for
example, to sort the entries by the dates they apply to.
</p>
<a class="index-entry-id" id="index-diary_002dlist_002dinclude_002dblanks"></a>
<p>Ordinarily, the fancy diary buffer does not show days for which there
are no diary entries, even if that day is a holiday.  If you want such
days to be shown in the fancy diary buffer, set the variable
<code class="code">diary-list-include-blanks</code> to <code class="code">t</code>.
</p>
<p>The fancy diary buffer enables View mode
(see <a class="pxref" href="View-Mode.html">View Mode</a>).
</p>
<p>The alternative display method <code class="code">diary-simple-display</code> shows the
actual diary buffer, and uses invisible text to hide entries that don&rsquo;t
apply.  Holidays are shown in the mode line.  The advantage of this
method is that you can edit the buffer and save your changes directly to
the diary file.  This method is not as flexible as the fancy method,
however.  For example, it cannot sort entries.  Another disadvantage is
that invisible text can be confusing.  For example, if you copy a region
of text in order to paste it elsewhere, invisible text may be included.
Similarly, since the diary buffer as you see it is an illusion, simply
printing the buffer may not print what you see on your screen.
</p>
<a class="index-entry-id" id="index-diary_002dprint_002dentries_002dhook"></a>
<a class="index-entry-id" id="index-diary_002dprint_002dentries"></a>
<p>For this reason, there is a special command to print hard copy of the
diary buffer <em class="emph">as it appears</em>; this command is <kbd class="kbd">M-x
diary-print-entries</kbd>.  It works with either display method, although
with the fancy display you can also print the buffer like any other.  To
print a hard copy of a day-by-day diary for a week, position point on
the first day of the week, type <kbd class="kbd">7 d</kbd>, and then do <kbd class="kbd">M-x
diary-print-entries</kbd>.  As usual, the inclusion of the holidays slows
down the display slightly; you can speed things up by setting the
variable <code class="code">diary-show-holidays-flag</code> to <code class="code">nil</code>.
</p>
<p>This command prepares a temporary buffer that contains only the diary
entries currently visible in the diary buffer.  Unlike with the simple
display, the other irrelevant entries are really absent, not just
hidden.  After preparing the buffer, it runs the hook
<code class="code">diary-print-entries-hook</code>.  The default value of this hook sends
the data directly to the printer with the command <code class="code">lpr-buffer</code>
(see <a class="pxref" href="Printing.html">Printing Hard Copies</a>).
If you want to use a different command to do the
printing, just change the value of this hook.  Other uses might include,
for example, rearranging the lines into order by day and time.
</p>
<p>You can edit the diary entries as they appear in the simple diary
window, but it is important to remember that the buffer displayed
contains the <em class="emph">entire</em> diary file, with portions of it concealed
from view.  This means, for instance, that the <kbd class="kbd">C-f</kbd>
(<code class="code">forward-char</code>) command can put point at what appears to be the
end of the line, but what is in reality the middle of some concealed
line.
</p>
<p><em class="emph">Be careful when editing the diary entries in the simple display!</em>
Inserting additional lines or adding/deleting characters in the middle
of a visible line cannot cause problems, but editing at the end of a
line may not do what you expect.  Deleting a line may delete other
invisible entries that follow it.  Before editing the simple diary
buffer, it is best to display the entire file with <kbd class="kbd">s</kbd>
(<code class="code">diary-show-all-entries</code>).
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Fancy-Diary-Display.html">Fancy Diary Display</a>, Previous: <a href="Non_002dGregorian-Diary.html">Diary Entries Using non-Gregorian Calendars</a>, Up: <a href="Advanced-Calendar_002fDiary-Usage.html">More advanced features of the Calendar and Diary</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
