<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Minibuffer History (GNU Emacs Manual)</title>

<meta name="description" content="Minibuffer History (GNU Emacs Manual)">
<meta name="keywords" content="Minibuffer History (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Minibuffer.html" rel="up" title="Minibuffer">
<link href="Repetition.html" rel="next" title="Repetition">
<link href="Completion.html" rel="prev" title="Completion">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Minibuffer-History">
<div class="nav-panel">
<p>
Next: <a href="Repetition.html" accesskey="n" rel="next">Repeating Minibuffer Commands</a>, Previous: <a href="Completion.html" accesskey="p" rel="prev">Completion</a>, Up: <a href="Minibuffer.html" accesskey="u" rel="up">The Minibuffer</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Minibuffer-History-1"><span>9.5 Minibuffer History<a class="copiable-link" href="#Minibuffer-History-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-minibuffer-history"></a>
<a class="index-entry-id" id="index-history-of-minibuffer-input"></a>
<a class="index-entry-id" id="index-completion_002c-walking-through-candidates"></a>

<p>Everything you type in the minibuffer is saved in a <em class="dfn">minibuffer
history list</em> so you can easily use it again later.  This includes
completion candidates (such as file names, buffer names, command
names, etc.) and any other kind of minibuffer input.  You can use
the following commands to quickly fetch an earlier or alternative
response into the minibuffer:
</p>
<dl class="table">
<dt><kbd class="kbd">M-p</kbd></dt>
<dd><p>Move to the previous item in the minibuffer history, an earlier
argument (<code class="code">previous-history-element</code>).
</p></dd>
<dt><kbd class="kbd">M-n</kbd></dt>
<dd><p>Move to the next item in the minibuffer history
(<code class="code">next-history-element</code>).
</p></dd>
<dt><kbd class="kbd"><kbd class="key">UP</kbd></kbd></dt>
<dt><kbd class="kbd"><kbd class="key">DOWN</kbd></kbd></dt>
<dd><p>Like <kbd class="kbd">M-p</kbd> and <kbd class="kbd">M-n</kbd>, but move to the previous or next line of
a multi-line item before going to the previous history item
(<code class="code">previous-line-or-history-element</code> and
<code class="code">next-line-or-history-element</code>) .
</p></dd>
<dt><kbd class="kbd">M-r <var class="var">regexp</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Move to an earlier item in the minibuffer history that
matches <var class="var">regexp</var> (<code class="code">previous-matching-history-element</code>).
</p></dd>
<dt><kbd class="kbd">M-s <var class="var">regexp</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Move to a later item in the minibuffer history that matches
<var class="var">regexp</var> (<code class="code">next-matching-history-element</code>).
</p></dd>
</dl>

<a class="index-entry-id" id="index-M_002dp-_0028minibuffer-history_0029"></a>
<a class="index-entry-id" id="index-M_002dn-_0028minibuffer-history_0029"></a>
<a class="index-entry-id" id="index-next_002dhistory_002delement"></a>
<a class="index-entry-id" id="index-previous_002dhistory_002delement"></a>
<p>While in the minibuffer, <kbd class="kbd">M-p</kbd> (<code class="code">previous-history-element</code>)
moves through the minibuffer history list, one item at a time.  Each
<kbd class="kbd">M-p</kbd> fetches an earlier item from the history list into the
minibuffer, replacing its existing contents.  Typing <kbd class="kbd">M-n</kbd>
(<code class="code">next-history-element</code>) moves through the minibuffer history
list in the opposite direction, fetching later entries into the
minibuffer.
</p>
<p>If you type <kbd class="kbd">M-n</kbd> in the minibuffer when there are no later
entries in the minibuffer history (e.g., if you haven&rsquo;t previously
typed <kbd class="kbd">M-p</kbd>), Emacs tries fetching from a list of default
arguments: values that you are likely to enter.  You can think of this
as moving through the &ldquo;future history&rdquo;.
</p>
<a class="index-entry-id" id="index-future-history-for-file-names"></a>
<a class="index-entry-id" id="index-minibuffer-defaults-for-file-names"></a>
<a class="index-entry-id" id="index-file_002dname_002dat_002dpoint_002dfunctions"></a>
<p>The &ldquo;future history&rdquo; for file names includes several possible
alternatives you may find useful, such as the file name or the URL at
point in the current buffer.  The defaults put into the &ldquo;future
history&rdquo; in this case are controlled by the functions mentioned in
the value of the option <code class="code">file-name-at-point-functions</code>.  By
default, its value invokes the <code class="code">ffap</code> package (see <a class="pxref" href="FFAP.html">Finding Files and URLs at Point</a>),
which tries to guess the default file or URL from the text around
point.  To disable this guessing, customize the option to a <code class="code">nil</code>
value, then the &ldquo;future history&rdquo; of file names will include only the
file, if any, visited by the current buffer, and the default
directory.
</p>
<a class="index-entry-id" id="index-previous_002dline_002dor_002dhistory_002delement"></a>
<a class="index-entry-id" id="index-next_002dline_002dor_002dhistory_002delement"></a>
<a class="index-entry-id" id="index-UP-_0028minibuffer-history_0029"></a>
<a class="index-entry-id" id="index-DOWN-_0028minibuffer-history_0029"></a>
<p>The arrow keys <kbd class="kbd"><kbd class="key">UP</kbd></kbd> and <kbd class="kbd"><kbd class="key">DOWN</kbd></kbd> work like
<kbd class="kbd">M-p</kbd> and <kbd class="kbd">M-n</kbd>, but if the current history item is longer
than a single line, they allow you to move to the previous or next
line of the current history item before going to the previous or next
history item.
</p>
<p>If you edit the text inserted by the <kbd class="kbd">M-p</kbd> or <kbd class="kbd">M-n</kbd>
minibuffer history commands, this does not change its entry in the
history list.  However, the edited argument does go at the end of the
history list when you submit it.
</p>
<a class="index-entry-id" id="index-previous_002dmatching_002dhistory_002delement"></a>
<a class="index-entry-id" id="index-next_002dmatching_002dhistory_002delement"></a>
<a class="index-entry-id" id="index-M_002dr-_0028minibuffer-history_0029"></a>
<a class="index-entry-id" id="index-M_002ds-_0028minibuffer-history_0029"></a>
<p>You can use <kbd class="kbd">M-r</kbd> (<code class="code">previous-matching-history-element</code>) to
search through older elements in the history list, and <kbd class="kbd">M-s</kbd>
(<code class="code">next-matching-history-element</code>) to search through newer
entries.  Each of these commands asks for a <em class="dfn">regular expression</em>
as an argument, and fetches the first matching entry into the
minibuffer.  See <a class="xref" href="Regexps.html">Syntax of Regular Expressions</a>, for an explanation of regular
expressions.  A numeric prefix argument <var class="var">n</var> means to fetch the
<var class="var">n</var>th matching entry.  These commands are unusual, in that they
use the minibuffer to read the regular expression argument, even
though they are invoked from the minibuffer.  An upper-case letter in
the regular expression makes the search case-sensitive (see <a class="pxref" href="Lax-Search.html">Lax Matching During Searching</a>).
</p>
<p>You can also search through the history using an incremental search.
See <a class="xref" href="Isearch-Minibuffer.html">Searching the Minibuffer</a>.
</p>
<p>Emacs keeps separate history lists for several different kinds of
arguments.  For example, there is a list for file names, used by all
the commands that read file names.  Other history lists include buffer
names, command names (used by <kbd class="kbd">M-x</kbd>), and command arguments (used
by commands like <code class="code">query-replace</code>).
</p>
<a class="index-entry-id" id="index-history_002dlength"></a>
<p>The variable <code class="code">history-length</code> specifies the maximum length of a
minibuffer history list; adding a new element deletes the oldest
element if the list gets too long.  If the value is <code class="code">t</code>, there is
no maximum length.
</p>
<a class="index-entry-id" id="index-history_002ddelete_002dduplicates"></a>
<p>The variable <code class="code">history-delete-duplicates</code> specifies whether to
delete duplicates in history.  If it is non-<code class="code">nil</code>, adding a new
element deletes from the list all other elements that are equal to it.
The default is <code class="code">nil</code>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Repetition.html">Repeating Minibuffer Commands</a>, Previous: <a href="Completion.html">Completion</a>, Up: <a href="Minibuffer.html">The Minibuffer</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
