<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Locals (GNU Emacs Manual)</title>

<meta name="description" content="Locals (GNU Emacs Manual)">
<meta name="keywords" content="Locals (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Variables.html" rel="up" title="Variables">
<link href="File-Variables.html" rel="next" title="File Variables">
<link href="Hooks.html" rel="prev" title="Hooks">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="Locals">
<div class="nav-panel">
<p>
Next: <a href="File-Variables.html" accesskey="n" rel="next">Local Variables in Files</a>, Previous: <a href="Hooks.html" accesskey="p" rel="prev">Hooks</a>, Up: <a href="Variables.html" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Local-Variables"><span>37.2.3 Local Variables<a class="copiable-link" href="#Local-Variables"> &para;</a></span></h4>

<dl class="table">
<dt><kbd class="kbd">M-x make-local-variable <kbd class="key">RET</kbd> <var class="var">var</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Make variable <var class="var">var</var> have a local value in the current buffer.
</p>
</dd>
<dt><kbd class="kbd">M-x kill-local-variable <kbd class="key">RET</kbd> <var class="var">var</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Make variable <var class="var">var</var> use its global value in the current buffer.
</p>
</dd>
<dt><kbd class="kbd">M-x make-variable-buffer-local <kbd class="key">RET</kbd> <var class="var">var</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Mark variable <var class="var">var</var> so that setting it will make it local to the
buffer that is current at that time.
</p></dd>
</dl>

<a class="index-entry-id" id="index-local-variables"></a>
<p>Almost any variable can be made <em class="dfn">local</em> to a specific Emacs
buffer.  This means that its value in that buffer is independent of its
value in other buffers.  A few variables are always local in every
buffer.  Every other Emacs variable has a <em class="dfn">global</em> value which is in
effect in all buffers that have not made the variable local.
</p>
<a class="index-entry-id" id="index-make_002dlocal_002dvariable"></a>
<p><kbd class="kbd">M-x make-local-variable</kbd> reads the name of a variable and makes
it local to the current buffer.  Changing its value subsequently in
this buffer will not affect others, and changes in its global value
will not affect this buffer.
</p>
<a class="index-entry-id" id="index-make_002dvariable_002dbuffer_002dlocal"></a>
<a class="index-entry-id" id="index-per_002dbuffer-variables"></a>
<p><kbd class="kbd">M-x make-variable-buffer-local</kbd> marks a variable so it will
become local automatically whenever it is set.  More precisely, once a
variable has been marked in this way, the usual ways of setting the
variable automatically do <code class="code">make-local-variable</code> first.  We call
such variables <em class="dfn">per-buffer</em> variables.  Many variables in Emacs
are normally per-buffer; the variable&rsquo;s document string tells you when
this is so.  A per-buffer variable&rsquo;s global value is normally never
effective in any buffer, but it still has a meaning: it is the initial
value of the variable for each new buffer.
</p>
<p>Major modes (see <a class="pxref" href="Major-Modes.html">Major Modes</a>) always make variables local to the
buffer before setting the variables.  This is why changing major modes
in one buffer has no effect on other buffers.  Minor modes also work
by setting variables&mdash;normally, each minor mode has one controlling
variable which is non-<code class="code">nil</code> when the mode is enabled
(see <a class="pxref" href="Minor-Modes.html">Minor Modes</a>).  For many minor modes, the controlling variable
is per buffer, and thus always buffer-local.  Otherwise, you can make
it local in a specific buffer like any other variable.
</p>
<p>A few variables cannot be local to a buffer because they are always
local to each display instead (see <a class="pxref" href="Multiple-Displays.html">Multiple Displays</a>).  If you try to
make one of these variables buffer-local, you&rsquo;ll get an error message.
</p>
<a class="index-entry-id" id="index-kill_002dlocal_002dvariable"></a>
<p><kbd class="kbd">M-x kill-local-variable</kbd> makes a specified variable cease to be
local to the current buffer.  The global value of the variable
henceforth is in effect in this buffer.  Setting the major mode kills
all the local variables of the buffer except for a few variables
specially marked as <em class="dfn">permanent locals</em>.
</p>
<a class="index-entry-id" id="index-setq_002ddefault"></a>
<p>To set the global value of a variable, regardless of whether the
variable has a local value in the current buffer, you can use the Lisp
construct <code class="code">setq-default</code>.  This construct is used just like
<code class="code">setq</code>, but it sets variables&rsquo; global values instead of their local
values (if any).  When the current buffer does have a local value, the
new global value may not be visible until you switch to another buffer.
Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">(setq-default fill-column 75)
</pre></div>

<p><code class="code">setq-default</code> is the only way to set the global value of a variable
that has been marked with <code class="code">make-variable-buffer-local</code>.
</p>
<a class="index-entry-id" id="index-default_002dvalue"></a>
<p>Lisp programs can use <code class="code">default-value</code> to look at a variable&rsquo;s
default value.  This function takes a symbol as argument and returns its
default value.  The argument is evaluated; usually you must quote it
explicitly.  For example, here&rsquo;s how to obtain the default value of
<code class="code">fill-column</code>:
</p>
<div class="example">
<pre class="example-preformatted">(default-value 'fill-column)
</pre></div>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="File-Variables.html">Local Variables in Files</a>, Previous: <a href="Hooks.html">Hooks</a>, Up: <a href="Variables.html">Variables</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
