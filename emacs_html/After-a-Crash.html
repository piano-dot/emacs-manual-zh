<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>After a Crash (GNU Emacs Manual)</title>

<meta name="description" content="After a Crash (GNU Emacs Manual)">
<meta name="keywords" content="After a Crash (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Lossage.html" rel="up" title="Lossage">
<link href="Emergency-Escape.html" rel="next" title="Emergency Escape">
<link href="Crashing.html" rel="prev" title="Crashing">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="After-a-Crash">
<div class="nav-panel">
<p>
Next: <a href="Emergency-Escape.html" accesskey="n" rel="next">Emergency Escape</a>, Previous: <a href="Crashing.html" accesskey="p" rel="prev">When Emacs Crashes</a>, Up: <a href="Lossage.html" accesskey="u" rel="up">Dealing with Emacs Trouble</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section subsection-level-set-section" id="Recovery-After-a-Crash"><span>39.6 Recovery After a Crash<a class="copiable-link" href="#Recovery-After-a-Crash"> &para;</a></span></h3>
<a class="index-entry-id" id="index-recovering-crashed-session"></a>

<p>If Emacs or the computer crashes, you can recover the files you were
editing at the time of the crash from their auto-save files.  To do
this, start Emacs again and type the command <kbd class="kbd">M-x recover-session</kbd>.
</p>
<p>This command initially displays a buffer which lists interrupted
session files, each with its date.  You must choose which session to
recover from.  Typically the one you want is the most recent one.  Move
point to the one you choose, and type <kbd class="kbd">C-c C-c</kbd>.
</p>
<p>Then <code class="code">recover-session</code> considers each of the files that you
were editing during that session; for each such file, it asks whether
to recover that file.  If you answer <kbd class="kbd">y</kbd> for a file, it shows the
dates of that file and its auto-save file, then asks once again
whether to recover that file.  For the second question, you must
confirm with <kbd class="kbd">yes</kbd>.  If you do, Emacs visits the file but gets the
text from the auto-save file.
</p>
<p>When <code class="code">recover-session</code> is done, the files you&rsquo;ve chosen to
recover are present in Emacs buffers.  You should then save them.  Only
this&mdash;saving them&mdash;updates the files themselves.
</p>
<p>As a last resort, if you had buffers with content which were not
associated with any files, or if the autosave was not recent enough to
have recorded important changes, you can use the
<samp class="file">etc/emacs-buffer.gdb</samp> script with GDB (the GNU Debugger) to
retrieve them from a core dump&mdash;provided that a core dump was saved,
and that the Emacs executable was not stripped of its debugging
symbols.
</p>
<p>As soon as you get the core dump, rename it to another name such as
<samp class="file">core.emacs</samp>, so that another crash won&rsquo;t overwrite it.
</p>
<p>To use this script, run <code class="code">gdb</code> with the file name of your Emacs
executable and the file name of the core dump, e.g., &lsquo;<samp class="samp">gdb
/usr/bin/emacs core.emacs</samp>&rsquo;.  At the <code class="code">(gdb)</code> prompt, load the
recovery script: &lsquo;<samp class="samp">source /usr/src/emacs/etc/emacs-buffer.gdb</samp>&rsquo;.
Then type the command <code class="code">ybuffer-list</code> to see which buffers are
available.  For each buffer, it lists a buffer number.  To save a
buffer, use <code class="code">ysave-buffer</code>; you specify the buffer number, and
the file name to write that buffer into.  You should use a file name
which does not already exist; if the file does exist, the script does
not make a backup of its old contents.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Emergency-Escape.html">Emergency Escape</a>, Previous: <a href="Crashing.html">When Emacs Crashes</a>, Up: <a href="Lossage.html">Dealing with Emacs Trouble</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
