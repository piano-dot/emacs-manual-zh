<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Save Commands (GNU Emacs Manual)</title>

<meta name="description" content="Save Commands (GNU Emacs Manual)">
<meta name="keywords" content="Save Commands (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Saving.html" rel="up" title="Saving">
<link href="Backup.html" rel="next" title="Backup">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="Save-Commands">
<div class="nav-panel">
<p>
Next: <a href="Backup.html" accesskey="n" rel="next">Backup Files</a>, Up: <a href="Saving.html" accesskey="u" rel="up">Saving Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Commands-for-Saving-Files"><span>19.3.1 Commands for Saving Files<a class="copiable-link" href="#Commands-for-Saving-Files"> &para;</a></span></h4>

<p>These are the commands that relate to saving and writing files.
</p>
<dl class="table">
<dt><kbd class="kbd">C-x C-s</kbd></dt>
<dd><p>Save the current buffer to its file (<code class="code">save-buffer</code>).
</p></dd>
<dt><kbd class="kbd">C-x s</kbd></dt>
<dd><p>Save any or all buffers to their files (<code class="code">save-some-buffers</code>).
</p></dd>
<dt><kbd class="kbd">M-~</kbd></dt>
<dd><p>Forget that the current buffer has been changed (<code class="code">not-modified</code>).
With prefix argument (<kbd class="kbd">C-u</kbd>), mark the current buffer as changed.
</p></dd>
<dt><kbd class="kbd">C-x C-w</kbd></dt>
<dd><p>Save the current buffer with a specified file name (<code class="code">write-file</code>).
</p></dd>
<dt><kbd class="kbd">M-x set-visited-file-name</kbd></dt>
<dd><p>Change the file name under which the current buffer will be saved.
</p></dd>
<dt><kbd class="kbd">M-x rename-visited-file</kbd></dt>
<dd><p>The same as <kbd class="kbd">M-x set-visited-file-name</kbd>, but also rename the file
the buffer is visiting (if any).
</p></dd>
</dl>

<a class="index-entry-id" id="index-C_002dx-C_002ds"></a>
<a class="index-entry-id" id="index-save_002dbuffer"></a>
<p>When you wish to save the file and make your changes permanent, type
<kbd class="kbd">C-x C-s</kbd> (<code class="code">save-buffer</code>).  After saving is finished, <kbd class="kbd">C-x C-s</kbd>
displays a message like this:
</p>
<div class="example">
<pre class="example-preformatted">Wrote /u/rms/gnu/gnu.tasks
</pre></div>

<p>If the current buffer is not modified (no changes have been made in it
since the buffer was created or last saved), saving is not really
done, because it would have no effect.  Instead, <kbd class="kbd">C-x C-s</kbd>
displays a message like this in the echo area:
</p>
<div class="example">
<pre class="example-preformatted">(No changes need to be saved)
</pre></div>

<p>With a prefix argument, <kbd class="kbd">C-u C-x C-s</kbd>, Emacs also marks the buffer
to be backed up when the next save is done.  See <a class="xref" href="Backup.html">Backup Files</a>.
</p>
<a class="index-entry-id" id="index-C_002dx-s"></a>
<a class="index-entry-id" id="index-save_002dsome_002dbuffers"></a>
<p>The command <kbd class="kbd">C-x s</kbd> (<code class="code">save-some-buffers</code>) offers to save any
or all modified buffers.  It asks you what to do with each buffer.  The
possible responses are analogous to those of <code class="code">query-replace</code>:
</p>
<dl class="table">
<dt><kbd class="kbd">y</kbd></dt>
<dt><kbd class="kbd"><kbd class="key">SPC</kbd></kbd></dt>
<dd><p>Save this buffer and ask about the rest of the buffers.
</p></dd>
<dt><kbd class="kbd">n</kbd></dt>
<dt><kbd class="kbd"><kbd class="key">DEL</kbd></kbd></dt>
<dd><p>Don&rsquo;t save this buffer, but ask about the rest of the buffers.
</p></dd>
<dt><kbd class="kbd">!</kbd></dt>
<dd><p>Save this buffer and all the rest with no more questions.
</p></dd>
<dt><kbd class="kbd">q</kbd></dt>
<dt><kbd class="kbd"><kbd class="key">RET</kbd></kbd></dt>
<dd><p>Terminate <code class="code">save-some-buffers</code> without any more saving.
</p></dd>
<dt><kbd class="kbd">.</kbd></dt>
<dd><p>Save this buffer, then exit <code class="code">save-some-buffers</code> without even asking
about other buffers.
</p></dd>
<dt><kbd class="kbd">C-r</kbd></dt>
<dd><p>View the buffer that you are currently being asked about.  When you exit
View mode, you get back to <code class="code">save-some-buffers</code>, which asks the
question again.
</p></dd>
<dt><kbd class="kbd">C-f</kbd></dt>
<dd><p>Exit <code class="code">save-some-buffers</code> and visit the buffer that you are
currently being asked about.
</p></dd>
<dt><kbd class="kbd">d</kbd></dt>
<dd><p>Diff the buffer against its corresponding file, so you can see what
changes you would be saving.  This calls the command
<code class="code">diff-buffer-with-file</code> (see <a class="pxref" href="Comparing-Files.html">Comparing Files</a>).
</p></dd>
<dt><kbd class="kbd">C-h</kbd></dt>
<dd><p>Display a help message about these options.
</p></dd>
</dl>

<a class="index-entry-id" id="index-save_002dsome_002dbuffers_002ddefault_002dpredicate"></a>
<p>You can customize the value of
<code class="code">save-some-buffers-default-predicate</code> to control which buffers
Emacs will ask about.
</p>
<p><kbd class="kbd">C-x C-c</kbd>, the key sequence to exit Emacs, invokes
<code class="code">save-some-buffers</code> and therefore asks the same questions.
</p>
<a class="index-entry-id" id="index-M_002d_007e"></a>
<a class="index-entry-id" id="index-not_002dmodified"></a>
<p>If you have changed a buffer but do not wish to save the changes,
you should take some action to prevent it.  Otherwise, each time you
use <kbd class="kbd">C-x s</kbd> or <kbd class="kbd">C-x C-c</kbd>, you are liable to save this buffer
by mistake.  One thing you can do is type <kbd class="kbd">M-~</kbd>
(<code class="code">not-modified</code>), which clears out the indication that the buffer
is modified.  If you do this, none of the save commands will believe
that the buffer needs to be saved.  (&lsquo;<samp class="samp">~</samp>&rsquo; is often used as a
mathematical symbol for &ldquo;not&rdquo;; thus <kbd class="kbd">M-~</kbd> is &ldquo;not&rdquo;, metafied.)
Alternatively, you can cancel all the changes made since the file was
visited or saved, by reading the text from the file again.  This is
called <em class="dfn">reverting</em>.  See <a class="xref" href="Reverting.html">Reverting a Buffer</a>.  (You could also undo all
the changes by repeating the undo command <kbd class="kbd">C-x u</kbd> until you have
undone all the changes; but reverting is easier.)
</p>
<a class="index-entry-id" id="index-set_002dvisited_002dfile_002dname"></a>
<p><kbd class="kbd">M-x set-visited-file-name</kbd> alters the name of the file that the
current buffer is visiting.  It reads the new file name using the
minibuffer.  Then it marks the buffer as visiting that file name, and
changes the buffer name correspondingly.  <code class="code">set-visited-file-name</code>
does not save the buffer in the newly visited file; it just alters the
records inside Emacs in case you do save later.  It also marks the
buffer as modified so that <kbd class="kbd">C-x C-s</kbd> in that buffer
<em class="emph">will</em> save.
</p>
<a class="index-entry-id" id="index-C_002dx-C_002dw"></a>
<a class="index-entry-id" id="index-write_002dfile"></a>
<p>If you wish to mark the buffer as visiting a different file and save
it right away, use <kbd class="kbd">C-x C-w</kbd> (<code class="code">write-file</code>).  This is
equivalent to <code class="code">set-visited-file-name</code> followed by <kbd class="kbd">C-x C-s</kbd>,
except that <kbd class="kbd">C-x C-w</kbd> asks for confirmation if the file exists.
<kbd class="kbd">C-x C-s</kbd> used on a buffer that is not visiting a file has the
same effect as <kbd class="kbd">C-x C-w</kbd>; that is, it reads a file name, marks the
buffer as visiting that file, and saves it there.  The default file
name in a buffer that is not visiting a file is made by combining the
buffer name with the buffer&rsquo;s default directory (see <a class="pxref" href="File-Names.html">File Names</a>).
</p>
<p>If the new file name implies a major mode, then <kbd class="kbd">C-x C-w</kbd> switches
to that major mode, in most cases.  The command
<code class="code">set-visited-file-name</code> also does this.  See <a class="xref" href="Choosing-Modes.html">Choosing File Modes</a>.
</p>
<p>If you wish to save the current buffer to a different file without
visiting that file, use <code class="code">mark-whole-buffer</code> (<kbd class="kbd">C-x h</kbd>), then
<kbd class="kbd">M-x&nbsp;write-region</kbd><!-- /@w --> (see <a class="pxref" href="Misc-File-Ops.html">Miscellaneous File Operations</a>).
</p>
<p>If Emacs is about to save a file and sees that the date of the latest
version on disk does not match what Emacs last read or wrote, Emacs
notifies you of this fact, because it probably indicates a problem caused
by simultaneous editing and requires your immediate attention.
See <a class="xref" href="Interlocking.html">Simultaneous Editing</a>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Backup.html">Backup Files</a>, Up: <a href="Saving.html">Saving Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
