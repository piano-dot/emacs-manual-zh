<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Moving by Defuns (GNU Emacs Manual)</title>

<meta name="description" content="Moving by Defuns (GNU Emacs Manual)">
<meta name="keywords" content="Moving by Defuns (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Defuns.html" rel="up" title="Defuns">
<link href="Imenu.html" rel="next" title="Imenu">
<link href="Left-Margin-Paren.html" rel="prev" title="Left Margin Paren">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="Moving-by-Defuns">
<div class="nav-panel">
<p>
Next: <a href="Imenu.html" accesskey="n" rel="next">Imenu</a>, Previous: <a href="Left-Margin-Paren.html" accesskey="p" rel="prev">Left Margin Convention</a>, Up: <a href="Defuns.html" accesskey="u" rel="up">Top-Level Definitions, or Defuns</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Moving-by-Defuns-1"><span>27.2.2 Moving by Defuns<a class="copiable-link" href="#Moving-by-Defuns-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-defuns"></a>

<p>These commands move point or set up the region based on top-level
major definitions, also called <em class="dfn">defuns</em>.
</p>
<dl class="table">
<dt><kbd class="kbd">C-M-a</kbd></dt>
<dd><p>Move to beginning of current or preceding defun
(<code class="code">beginning-of-defun</code>).
</p></dd>
<dt><kbd class="kbd">C-M-e</kbd></dt>
<dd><p>Move to end of current or following defun (<code class="code">end-of-defun</code>).
</p></dd>
<dt><kbd class="kbd">C-M-h</kbd></dt>
<dd><p>Put region around whole current or following defun (<code class="code">mark-defun</code>).
</p></dd>
</dl>

<a class="index-entry-id" id="index-move-to-beginning-or-end-of-function"></a>
<a class="index-entry-id" id="index-function_002c-move-to-beginning-or-end"></a>
<a class="index-entry-id" id="index-C_002dM_002da"></a>
<a class="index-entry-id" id="index-C_002dM_002de"></a>
<a class="index-entry-id" id="index-C_002dM_002dh"></a>
<a class="index-entry-id" id="index-beginning_002dof_002ddefun"></a>
<a class="index-entry-id" id="index-end_002dof_002ddefun"></a>
<a class="index-entry-id" id="index-mark_002ddefun"></a>
<p>The commands to move to the beginning and end of the current defun
are <kbd class="kbd">C-M-a</kbd> (<code class="code">beginning-of-defun</code>) and <kbd class="kbd">C-M-e</kbd>
(<code class="code">end-of-defun</code>).  If you repeat one of these commands, or use a
positive numeric argument, each repetition moves to the next defun in
the direction of motion.
</p>
<p><kbd class="kbd">C-M-a</kbd> with a negative argument &minus;<var class="var">n</var> moves forward
<var class="var">n</var> times to the next beginning of a defun.  This is not exactly
the same place that <kbd class="kbd">C-M-e</kbd> with argument <var class="var">n</var> would move to;
the end of this defun is not usually exactly the same place as the
beginning of the following defun.  (Whitespace, comments, and perhaps
declarations can separate them.)  Likewise, <kbd class="kbd">C-M-e</kbd> with a
negative argument moves back to an end of a defun, which is not quite
the same as <kbd class="kbd">C-M-a</kbd> with a positive argument.
</p>
<a class="index-entry-id" id="index-C_002dM_002dh-_0028C-mode_0029"></a>
<a class="index-entry-id" id="index-c_002dmark_002dfunction"></a>
<p>To operate on the current defun, use <kbd class="kbd">C-M-h</kbd>
(<code class="code">mark-defun</code>), which sets the mark at the end of the current
defun and puts point at its beginning.  See <a class="xref" href="Marking-Objects.html">Commands to Mark Textual Objects</a>.  This
is the easiest way to get ready to kill the defun in order to move it
to a different place in the file.  If the defun is directly preceded
by comments (with no intervening blank lines), they are marked, too.
If you use the command while point is between defuns, it uses the
following defun.  If you use the command while the mark is already
active, it extends the end of the region to include one more defun.
With a prefix argument, it marks that many defuns or extends the
region by the appropriate number of defuns.  With negative prefix
argument it marks defuns in the opposite direction and also changes
the direction of selecting for subsequent uses of <code class="code">mark-defun</code>.
</p>
<p>In C mode, <kbd class="kbd">C-M-h</kbd> runs the function <code class="code">c-mark-function</code>,
which is almost the same as <code class="code">mark-defun</code>; the difference is that
it backs up over the argument declarations, function name and returned
data type so that the entire C function is inside the region.  This is
an example of how major modes adjust the standard key bindings so that
they do their standard jobs in a way better fitting a particular
language.  Other major modes may replace any or all of these key
bindings for that purpose.
</p>
<a class="index-entry-id" id="index-nested-defuns"></a>
<a class="index-entry-id" id="index-treesit_002ddefun_002dtactic"></a>
<p>Some programming languages supported <em class="dfn">nested defuns</em>, whereby a
defun (such as a function or a method or a class) can be defined
inside (i.e., as part of the body) of another defun.  The commands
described above by default find the beginning and the end of the
<em class="emph">innermost</em> defun around point.  Major modes based on the
tree-sitter library provide control of this behavior: if the variable
<code class="code">treesit-defun-tactic</code> is set to the value <code class="code">top-level</code>, the
defun commands will find the <em class="emph">outermost</em> defuns instead.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Imenu.html">Imenu</a>, Previous: <a href="Left-Margin-Paren.html">Left Margin Convention</a>, Up: <a href="Defuns.html">Top-Level Definitions, or Defuns</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
