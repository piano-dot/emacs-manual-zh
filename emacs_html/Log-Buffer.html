<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Log Buffer (GNU Emacs Manual)</title>

<meta name="description" content="Log Buffer (GNU Emacs Manual)">
<meta name="keywords" content="Log Buffer (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Version-Control.html" rel="up" title="Version Control">
<link href="Registering.html" rel="next" title="Registering">
<link href="Basic-VC-Editing.html" rel="prev" title="Basic VC Editing">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="Log-Buffer">
<div class="nav-panel">
<p>
Next: <a href="Registering.html" accesskey="n" rel="next">Registering a File for Version Control</a>, Previous: <a href="Basic-VC-Editing.html" accesskey="p" rel="prev">Basic Editing under Version Control</a>, Up: <a href="Version-Control.html" accesskey="u" rel="up">Version Control</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Features-of-the-Log-Entry-Buffer"><span>29.1.4 Features of the Log Entry Buffer<a class="copiable-link" href="#Features-of-the-Log-Entry-Buffer"> &para;</a></span></h4>

<a class="index-entry-id" id="index-C_002dc-C_002dc-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-log_002dedit_002ddone"></a>
<p>When you tell VC to commit a change, it pops up a buffer named
<samp class="file">*vc-log*</samp>.  In this buffer, you should write a <em class="dfn">log entry</em>
describing the changes you have made (see <a class="pxref" href="Why-Version-Control_003f.html">Understanding the Problems it Addresses</a>).
After you are done, type <kbd class="kbd">C-c C-c</kbd> (<code class="code">log-edit-done</code>) to exit
the buffer and commit the change, together with your log entry.
</p>
<a class="index-entry-id" id="index-Log-Edit-mode"></a>
<a class="index-entry-id" id="index-mode_002c-Log-Edit"></a>
<a class="index-entry-id" id="index-vc_002dlog_002dmode_002dhook"></a>
<p>The major mode for the <samp class="file">*vc-log*</samp> buffer is Log Edit mode, a
variant of Text mode (see <a class="pxref" href="Text-Mode.html">Text Mode</a>).  On entering Log Edit mode,
Emacs runs the hooks <code class="code">text-mode-hook</code> and <code class="code">vc-log-mode-hook</code>
(see <a class="pxref" href="Hooks.html">Hooks</a>).
</p>
<p>In the <samp class="file">*vc-log*</samp> buffer, you can write one or more <em class="dfn">header
lines</em>, specifying additional information to be supplied to the
version control system.  Each header line must occupy a single line at
the top of the buffer; the first line that is not a header line is
treated as the start of the log entry.  For example, the following
header line states that the present change was not written by you, but
by another developer:
</p>
<div class="example smallexample">
<pre class="example-preformatted">Author: J. R. Hacker &lt;jrh@example.com&gt;
</pre></div>

<p>Apart from the &lsquo;<samp class="samp">Author</samp>&rsquo; header, Emacs recognizes the headers
&lsquo;<samp class="samp">Summary</samp>&rsquo; (a one-line summary of the changeset), &lsquo;<samp class="samp">Date</samp>&rsquo; (a
manually-specified commit time), and &lsquo;<samp class="samp">Fixes</samp>&rsquo; (a reference to a
bug fixed by the change).  Not all version control systems recognize
all headers.  If you specify a header for a system that does not
support it, the header is treated as part of the log entry.
</p>
<a class="index-entry-id" id="index-C_002dc-C_002df-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-log_002dedit_002dshow_002dfiles"></a>
<a class="index-entry-id" id="index-C_002dc-C_002dd-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-log_002dedit_002dshow_002ddiff"></a>
<p>While in the <samp class="file">*vc-log*</samp> buffer, the current VC fileset is
considered to be the fileset that will be committed if you type
<kbd class="kbd">C-c&nbsp;C-c</kbd><!-- /@w -->.  To view a list of the files in the VC fileset,
type <kbd class="kbd">C-c&nbsp;C-f</kbd><!-- /@w --> (<code class="code">log-edit-show-files</code>).  To view a diff
of changes between the VC fileset and the version from which you
started editing (see <a class="pxref" href="Old-Revisions.html">Examining And Comparing Old Revisions</a>), type <kbd class="kbd">C-c C-d</kbd>
(<code class="code">log-edit-show-diff</code>).
</p>
<a class="index-entry-id" id="index-C_002dc-C_002dw-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-log_002dedit_002dgenerate_002dchangelog_002dfrom_002ddiff"></a>
<a class="index-entry-id" id="index-diff_002dadd_002dlog_002duse_002drelative_002dnames"></a>
<p>To help generate ChangeLog entries, type <kbd class="kbd">C-c C-w</kbd>
(<code class="code">log-edit-generate-changelog-from-diff</code>), to generate skeleton
ChangeLog entries, listing all changed file and function names based
on the diff of the VC fileset.  Consecutive entries left empty will be
combined by <kbd class="kbd">M-q</kbd> (<code class="code">fill-paragraph</code>).  By default the
skeleton will just include the file name, without any leading
directories.  If you wish to prepend the leading directories up to the
VC root, customize <code class="code">diff-add-log-use-relative-names</code>.
</p>
<a class="index-entry-id" id="index-C_002dc-C_002da-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-log_002dedit_002dinsert_002dchangelog"></a>
<p>If the VC fileset includes one or more <samp class="file">ChangeLog</samp> files
(see <a class="pxref" href="Change-Log.html">Change Logs</a>), type <kbd class="kbd">C-c C-a</kbd>
(<code class="code">log-edit-insert-changelog</code>) to pull the relevant entries into
the <samp class="file">*vc-log*</samp> buffer.  If the topmost item in each
<samp class="file">ChangeLog</samp> was made under your user name on the current date,
this command searches that item for entries matching the file(s) to be
committed, and inserts them.
If you are using CVS or RCS, see <a class="ref" href="Change-Logs-and-VC.html">Change Logs and VC</a>, for the
opposite way of working&mdash;generating ChangeLog entries from the Log
Edit buffer.
</p>
<p>To abort a commit, just <em class="emph">don&rsquo;t</em> type <kbd class="kbd">C-c C-c</kbd> in that
buffer.  You can switch buffers and do other editing.  As long as you
don&rsquo;t try to make another commit, the entry you were editing remains
in the <samp class="file">*vc-log*</samp> buffer, and you can go back to that buffer at
any time to complete the commit.
</p>
<a class="index-entry-id" id="index-M_002dn-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-M_002dp-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-M_002ds-_0028Log-Edit-mode_0029"></a>
<a class="index-entry-id" id="index-M_002dr-_0028Log-Edit-mode_0029"></a>
<p>You can also browse the history of previous log entries to duplicate
a commit comment.  This can be useful when you want to make several
commits with similar comments.  The commands <kbd class="kbd">M-n</kbd>, <kbd class="kbd">M-p</kbd>,
<kbd class="kbd">M-s</kbd> and <kbd class="kbd">M-r</kbd> for doing this work just like the minibuffer
history commands (see <a class="pxref" href="Minibuffer-History.html">Minibuffer History</a>), except that they are
used outside the minibuffer.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Registering.html">Registering a File for Version Control</a>, Previous: <a href="Basic-VC-Editing.html">Basic Editing under Version Control</a>, Up: <a href="Version-Control.html">Version Control</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
