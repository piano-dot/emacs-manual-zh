<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Sending Patches (GNU Emacs Manual)</title>

<meta name="description" content="Sending Patches (GNU Emacs Manual)">
<meta name="keywords" content="Sending Patches (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Bugs.html" rel="up" title="Bugs">
<link href="Checklist.html" rel="prev" title="Checklist">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
ul.mark-minus {list-style-type: "\2212"}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Sending-Patches">
<div class="nav-panel">
<p>
Previous: <a href="Checklist.html" accesskey="p" rel="prev">Checklist for Bug Reports</a>, Up: <a href="Bugs.html" accesskey="u" rel="up">Reporting Bugs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section subsection-level-set-section" id="Sending-Patches-for-GNU-Emacs"><span>40.5 Sending Patches for GNU Emacs<a class="copiable-link" href="#Sending-Patches-for-GNU-Emacs"> &para;</a></span></h3>

<a class="index-entry-id" id="index-sending-patches-for-GNU-Emacs"></a>
<a class="index-entry-id" id="index-patches_002c-sending"></a>
<p>If you would like to write bug fixes or improvements for GNU Emacs,
that is very helpful.  When you send your changes, please follow these
guidelines to make it easy for the maintainers to use them.  If you
don&rsquo;t follow these guidelines, your information might still be useful,
but using it will take extra work.  Maintaining GNU Emacs is a lot of
work in the best of circumstances, and we can&rsquo;t keep up unless you do
your best to help.
</p>
<p>Every patch must have several pieces of information before we
can properly evaluate it.  They are described below.
</p>
<p>When you have all these pieces, use the <kbd class="kbd">M-x submit-emacs-patch</kbd>
command to send the patch.  The command will prompt you for the
Subject of the patch and a patch file.  It will then create and
display a Message mode buffer with the patch file as an attachment,
display the buffer, and let you explain more about the patch and add
any other information as requested below.  When you are done, type
<kbd class="kbd">C-c C-c</kbd> to send the patch via email to the developers.  It will
be sent to the GNU Bug Tracker at <a class="url" href="https://debbugs.gnu.org">https://debbugs.gnu.org</a>.  The
tracker will assign a number to your submission, just like it does
with bug reports.  The developers will usually respond, perhaps asking
you for more details or any additional information, so be sure to
include a valid reply email address.
</p>
<p>Here&rsquo;s what we ask you to provide as part of your patch submissions:
</p>
<ul class="itemize mark-bullet">
<li>An explanation of what problem you are fixing or what improvement will
the patches bring about:

<ul class="itemize mark-minus">
<li>For a fix for an existing bug, it is
best to reply to the relevant discussion on the &lsquo;<samp class="samp">bug-gnu-emacs</samp>&rsquo;
list, or the bug entry in the GNU Bug Tracker at
<a class="url" href="https://debbugs.gnu.org">https://debbugs.gnu.org</a>.  Explain why your change fixes the bug.

</li><li>For a new feature, include a description of the feature and your
implementation.

</li><li>For a new bug, include a proper bug report for the problem you think
you have fixed; see <a class="pxref" href="Checklist.html">Checklist for Bug Reports</a>.  We need
to convince ourselves that the change is right before installing it.
Even if it is correct, we might have trouble understanding it if we
don&rsquo;t have a way to reproduce the problem it tries to fix.
</li></ul>

</li><li>Include in your code changes all the comments that are appropriate to
help people reading the source in the future understand why this
change was needed.

</li><li>Don&rsquo;t mix together changes made for different reasons.
Send them <em class="emph">individually</em>.

<p>If you make two changes for separate reasons, then we might not want
to install them both.  We might want to install just one, or install
each one in a different versions of Emacs.  If you send them all
jumbled together in a single set of diffs, we have to do extra work to
disentangle them&mdash;to figure out which parts of the change serve which
purpose.  If we don&rsquo;t have time for this, we might have to postpone
inclusion of your patches for a long time.
</p>
<p>If you send each change as soon as you have written it, with its own
explanation, then two changes never get tangled up, and we can consider
each one properly without any extra work to disentangle them.
</p>
</li><li>Send each change as soon as that change is finished.  Sometimes people
think they are helping us by accumulating many changes to send them all
together.  As explained above, this is absolutely the worst thing you
could do.

<p>Since you should send each change separately, you might as well send it
right away.  That gives us the option of installing it immediately if it
is important.
</p>
</li><li>The patch itself.  This can be produced in one of the following ways:

<ul class="itemize mark-minus">
<li>If you are using the Emacs repository, make sure your copy is
up-to-date (e.g., with <code class="code">git pull</code>).  You can commit your changes
to a private branch and generate a patch from the master version by
using <code class="code">git format-patch master</code>.  (This is the preferred method,
as it makes our job of applying the patch easier.)  Or you can leave
your changes uncommitted and use <code class="code">git diff</code>, as described below.

</li><li>Use <kbd class="kbd">diff -u</kbd> to make your diffs.  If you have GNU diff, use
<kbd class="kbd">diff&nbsp;-u&nbsp;-F'^[_a-zA-Z0-9$]\+&nbsp;*('</kbd><!-- /@w --> when making diffs of C code.
This shows the name of the function that each change occurs in.

<p>When producing the diffs, avoid any ambiguity as to which is the old
version and which is the new.  Please make the old version the first
argument to diff, and the new version the second argument.  And please
give one version or the other a name that indicates whether it is the
old version or your new changed one.
</p></li></ul>

</li><li>Write the commit log entries for your changes.  This is both to save us
the extra work of writing them, and to help explain your changes so we
can understand them.

<p>The purpose of the commit log is to explain the rationale of the
changes, the way the modified code solves whatever problems your patch
is trying to fix, and also show people where to find what was changed.
So you need to be specific about what functions you changed and why.
For the details about our style and requirements for good commit log
messages, please see the &ldquo;Commit messages&rdquo; section of the file
<samp class="file">CONTRIBUTE</samp> in the Emacs source tree.
</p>
<p>Please also look at the commit log entries of recent commits to see
what sorts of information to put in, and to learn the style that we
use.  Note that, unlike some other projects, we do require commit logs
for documentation, i.e., Texinfo files.  See <a class="xref" href="Change-Log.html">Change Logs</a>,
See <a data-manual="standards" href="https://www.gnu.org/prep/standards/html_node/Change-Log-Concepts.html#Change-Log-Concepts">Change Log Concepts</a> in <cite class="cite">GNU Coding Standards</cite>.
</p>
</li><li>When you write the fix, keep in mind that we can&rsquo;t install a change that
would break other systems.  Please think about what effect your change
will have if compiled and/or used on another type of system.

<p>Sometimes people send fixes that <em class="emph">might</em> be an improvement in
general&mdash;but it is hard to be sure of this.  It&rsquo;s hard to install
such changes because we have to study them very carefully.  Of course,
a good explanation of the reasoning by which you concluded the change
was correct can help convince us.
</p>
<p>The safest changes are changes to the files or portions of files that
are only used for a particular machine or a particular system.  These
are safe because they can&rsquo;t create new bugs on other machines or
systems.
</p>
<p>Please help us keep up with the workload by designing the patch in a
form that is clearly safe to install.
</p></li></ul>

</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Checklist.html">Checklist for Bug Reports</a>, Up: <a href="Bugs.html">Reporting Bugs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
