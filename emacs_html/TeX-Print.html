<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>TeX Print (GNU Emacs Manual)</title>

<meta name="description" content="TeX Print (GNU Emacs Manual)">
<meta name="keywords" content="TeX Print (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="TeX-Mode.html" rel="up" title="TeX Mode">
<link href="TeX-Misc.html" rel="next" title="TeX Misc">
<link href="LaTeX-Editing.html" rel="prev" title="LaTeX Editing">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="TeX-Print">
<div class="nav-panel">
<p>
Next: <a href="TeX-Misc.html" accesskey="n" rel="next">TeX Mode Miscellany</a>, Previous: <a href="LaTeX-Editing.html" accesskey="p" rel="prev">LaTeX Editing Commands</a>, Up: <a href="TeX-Mode.html" accesskey="u" rel="up">TeX Mode</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="TeX-Printing-Commands"><span>26.11.3 TeX Printing Commands<a class="copiable-link" href="#TeX-Printing-Commands"> &para;</a></span></h4>

<p>You can invoke TeX as a subprocess of Emacs, supplying either
the entire contents of the buffer or just part of it (e.g., one
chapter of a larger document).
</p>
<dl class="table">
<dt><kbd class="kbd">C-c C-b</kbd></dt>
<dd><p>Invoke TeX on the entire current buffer (<code class="code">tex-buffer</code>).
</p>
</dd>
<dt><kbd class="kbd">C-c C-r</kbd></dt>
<dd><p>Invoke TeX on the current region, together with the buffer&rsquo;s header
(<code class="code">tex-region</code>).
</p>
</dd>
<dt><kbd class="kbd">C-c C-f</kbd></dt>
<dd><p>Invoke TeX on the current file (<code class="code">tex-file</code>).
</p>
</dd>
<dt><kbd class="kbd">C-c C-v</kbd></dt>
<dd><p>Preview the output from the last <kbd class="kbd">C-c C-b</kbd>, <kbd class="kbd">C-c C-r</kbd>, or <kbd class="kbd">C-c
C-f</kbd> command (<code class="code">tex-view</code>).
</p>
</dd>
<dt><kbd class="kbd">C-c C-p</kbd></dt>
<dd><p>Print the output from the last <kbd class="kbd">C-c C-b</kbd>, <kbd class="kbd">C-c C-r</kbd>, or
<kbd class="kbd">C-c C-f</kbd> command (<code class="code">tex-print</code>).
</p>
</dd>
<dt><kbd class="kbd">C-c <kbd class="key">TAB</kbd></kbd></dt>
<dd><p>Invoke BibTeX on the current file (<code class="code">tex-bibtex-file</code>).
</p></dd>
<dt><kbd class="kbd">C-c C-l</kbd></dt>
<dd><p>Recenter the window showing output from TeX so that the last line
can be seen (<code class="code">tex-recenter-output-buffer</code>).
</p></dd>
<dt><kbd class="kbd">C-c C-k</kbd></dt>
<dd><p>Kill the TeX subprocess (<code class="code">tex-kill-job</code>).
</p></dd>
<dt><kbd class="kbd">C-c C-c</kbd></dt>
<dd><p>Invoke some other compilation command on the entire current buffer
(<code class="code">tex-compile</code>).
</p></dd>
</dl>

<a class="index-entry-id" id="index-tex_002dbuffer"></a>
<a class="index-entry-id" id="index-C_002dc-C_002db-_0028TeX-mode_0029"></a>
<a class="index-entry-id" id="index-tex_002dview"></a>
<a class="index-entry-id" id="index-C_002dc-C_002dv-_0028TeX-mode_0029"></a>
<a class="index-entry-id" id="index-tex_002dprint"></a>
<a class="index-entry-id" id="index-C_002dc-C_002dp-_0028TeX-mode_0029"></a>
<p>To pass the current buffer through TeX, type <kbd class="kbd">C-c C-b</kbd>
(<code class="code">tex-buffer</code>).  The formatted output goes in a temporary file,
normally a <samp class="file">.dvi</samp> file.  Afterwards, you can type <kbd class="kbd">C-c C-v</kbd>
(<code class="code">tex-view</code>) to launch an external program, such as
<code class="command">xdvi</code>, to view this output file.  You can also type <kbd class="kbd">C-c
C-p</kbd> (<code class="code">tex-print</code>) to print a hardcopy of the output file.
</p>
<a class="index-entry-id" id="index-TEXINPUTS-environment-variable"></a>
<a class="index-entry-id" id="index-tex_002ddirectory"></a>
<p>By default, <kbd class="kbd">C-c C-b</kbd> runs TeX in the current directory.  The
output of TeX is also created in this directory.  To run TeX in a
different directory, change the variable <code class="code">tex-directory</code> to
the desired directory.  If your environment variable <code class="env">TEXINPUTS</code>
contains relative names, or if your files contain
&lsquo;<samp class="samp">\input</samp>&rsquo; commands with relative file names, then
<code class="code">tex-directory</code> <em class="emph">must</em> be <code class="code">&quot;.&quot;</code> or you will get the
wrong results.  Otherwise, it is safe to specify some other directory,
such as <code class="code">&quot;/tmp&quot;</code>.
</p>
<a class="index-entry-id" id="index-tex_002drun_002dcommand"></a>
<a class="index-entry-id" id="index-latex_002drun_002dcommand"></a>
<a class="index-entry-id" id="index-tex_002ddvi_002dview_002dcommand"></a>
<a class="index-entry-id" id="index-tex_002ddvi_002dprint_002dcommand"></a>
<a class="index-entry-id" id="index-tex_002dprint_002dfile_002dextension"></a>
<p>The buffer&rsquo;s TeX variant determines what shell command <kbd class="kbd">C-c
C-b</kbd> actually runs.  In Plain TeX mode, it is specified by the
variable <code class="code">tex-run-command</code>, which defaults to <code class="code">&quot;tex&quot;</code>.  In
LaTeX mode, it is specified by <code class="code">latex-run-command</code>, which
defaults to <code class="code">&quot;latex&quot;</code>.  The shell command that <kbd class="kbd">C-c C-v</kbd> runs
to view the <samp class="file">.dvi</samp> output is determined by the variable
<code class="code">tex-dvi-view-command</code>, regardless of the TeX variant.  The
shell command that <kbd class="kbd">C-c C-p</kbd> runs to print the output is
determined by the variable <code class="code">tex-dvi-print-command</code>.  The variable
<code class="code">tex-print-file-extension</code> can be set to the required file
extension for viewing and printing TeX-compiled files.  For
example, you can set it to <samp class="file">.pdf</samp>, and update
<code class="code">tex-dvi-view-command</code> and <code class="code">tex-dvi-print-command</code>
accordingly, as well as <code class="code">latex-run-command</code> or
<code class="code">tex-run-command</code>.
</p>
<p>Normally, Emacs automatically appends the output file name to the
shell command strings described in the preceding paragraph.  For
example, if <code class="code">tex-dvi-view-command</code> is <code class="code">&quot;xdvi&quot;</code>, <kbd class="kbd">C-c
C-v</kbd> runs <code class="command">xdvi <var class="var">output-file-name</var></code>.  In some cases,
however, the file name needs to be embedded in the command, e.g., if
you need to provide the file name as an argument to one command whose
output is piped to another.  You can specify where to put the file
name with &lsquo;<samp class="samp">*</samp>&rsquo; in the command string.  For example,
</p>
<div class="example">
<pre class="example-preformatted">(setq tex-dvi-print-command &quot;dvips -f * | lpr&quot;)
</pre></div>

<a class="index-entry-id" id="index-tex_002dkill_002djob"></a>
<a class="index-entry-id" id="index-C_002dc-C_002dk-_0028TeX-mode_0029"></a>
<a class="index-entry-id" id="index-tex_002drecenter_002doutput_002dbuffer"></a>
<a class="index-entry-id" id="index-C_002dc-C_002dl-_0028TeX-mode_0029"></a>
<p>The terminal output from TeX, including any error messages,
appears in a buffer called <samp class="file">*tex-shell*</samp>.  If TeX gets an
error, you can switch to this buffer and feed it input (this works as
in Shell mode; see <a class="pxref" href="Interactive-Shell.html">Interactive Subshell</a>).  Without switching to this
buffer you can scroll it so that its last line is visible by typing
<kbd class="kbd">C-c C-l</kbd>.
</p>
<p>Type <kbd class="kbd">C-c C-k</kbd> (<code class="code">tex-kill-job</code>) to kill the TeX process if
you see that its output is no longer useful.  Using <kbd class="kbd">C-c C-b</kbd> or
<kbd class="kbd">C-c C-r</kbd> also kills any TeX process still running.
</p>
<a class="index-entry-id" id="index-tex_002dregion"></a>
<a class="index-entry-id" id="index-C_002dc-C_002dr-_0028TeX-mode_0029"></a>
<p>You can also pass an arbitrary region through TeX by typing
<kbd class="kbd">C-c C-r</kbd> (<code class="code">tex-region</code>).  This is tricky, however, because
most files of TeX input contain commands at the beginning to set
parameters and define macros, without which no later part of the file
will format correctly.  To solve this problem, <kbd class="kbd">C-c C-r</kbd> allows
you to designate a part of the file as containing essential commands;
it is included before the specified region as part of the input to
TeX.  The designated part of the file is called the <em class="dfn">header</em>.
</p>
<a class="index-entry-id" id="index-header-_0028TeX-mode_0029"></a>
<p>To indicate the bounds of the header in Plain TeX mode, you insert two
special strings in the file.  Insert &lsquo;<samp class="samp">%**start of header</samp>&rsquo; before the
header, and &lsquo;<samp class="samp">%**end of header</samp>&rsquo; after it.  Each string must appear
entirely on one line, but there may be other text on the line before or
after.  The lines containing the two strings are included in the header.
If &lsquo;<samp class="samp">%**start of header</samp>&rsquo; does not appear within the first 100 lines of
the buffer, <kbd class="kbd">C-c C-r</kbd> assumes that there is no header.
</p>
<p>In LaTeX mode, the header begins with &lsquo;<samp class="samp">\documentclass</samp>&rsquo; or
&lsquo;<samp class="samp">\documentstyle</samp>&rsquo; and ends with &lsquo;<samp class="samp">\begin{document}</samp>&rsquo;.  These
are commands that LaTeX requires you to use in any case, so nothing
special needs to be done to identify the header.
</p>
<a class="index-entry-id" id="index-tex_002dfile"></a>
<a class="index-entry-id" id="index-C_002dc-C_002df-_0028TeX-mode_0029"></a>
<p>The commands (<code class="code">tex-buffer</code>) and (<code class="code">tex-region</code>) do all of their
work in a temporary directory, and do not have available any of the auxiliary
files needed by TeX for cross-references; these commands are generally
not suitable for running the final copy in which all of the cross-references
need to be correct.
</p>
<p>When you want the auxiliary files for cross references, use <kbd class="kbd">C-c
C-f</kbd> (<code class="code">tex-file</code>) which runs TeX on the current buffer&rsquo;s file,
in that file&rsquo;s directory.  Before running TeX, it offers to save any
modified buffers.  Generally, you need to use (<code class="code">tex-file</code>) twice to
get the cross-references right.
</p>
<a class="index-entry-id" id="index-tex_002dstart_002doptions"></a>
<p>The value of the variable <code class="code">tex-start-options</code> specifies
options for the TeX run.
</p>
<a class="index-entry-id" id="index-tex_002dstart_002dcommands"></a>
<p>The value of the variable <code class="code">tex-start-commands</code> specifies TeX
commands for starting TeX.  The default value causes TeX to run
in nonstop mode.  To run TeX interactively, set the variable to
<code class="code">&quot;&quot;</code>.
</p>
<a class="index-entry-id" id="index-tex_002dmain_002dfile"></a>
<p>Large TeX documents are often split into several files&mdash;one main
file, plus subfiles.  Running TeX on a subfile typically does not
work; you have to run it on the main file.  In order to make
<code class="code">tex-file</code> useful when you are editing a subfile, you can set the
variable <code class="code">tex-main-file</code> to the name of the main file.  Then
<code class="code">tex-file</code> runs TeX on that file.
</p>
<p>The most convenient way to use <code class="code">tex-main-file</code> is to specify it
in a local variable list in each of the subfiles.  See <a class="xref" href="File-Variables.html">Local Variables in Files</a>.
</p>
<a class="index-entry-id" id="index-tex_002dbibtex_002dfile"></a>
<a class="index-entry-id" id="index-C_002dc-TAB-_0028TeX-mode_0029"></a>
<a class="index-entry-id" id="index-tex_002dbibtex_002dcommand"></a>
<p>For LaTeX files, you can use BibTeX to process the auxiliary
file for the current buffer&rsquo;s file.  BibTeX looks up bibliographic
citations in a data base and prepares the cited references for the
bibliography section.  The command <kbd class="kbd">C-c <kbd class="key">TAB</kbd></kbd>
(<code class="code">tex-bibtex-file</code>) runs the shell command
(<code class="code">tex-bibtex-command</code>) to produce a &lsquo;<samp class="samp">.bbl</samp>&rsquo; file for the
current buffer&rsquo;s file.  Generally, you need to do <kbd class="kbd">C-c C-f</kbd>
(<code class="code">tex-file</code>) once to generate the &lsquo;<samp class="samp">.aux</samp>&rsquo; file, then do
<kbd class="kbd">C-c <kbd class="key">TAB</kbd></kbd> (<code class="code">tex-bibtex-file</code>), and then repeat <kbd class="kbd">C-c C-f</kbd>
(<code class="code">tex-file</code>) twice more to get the cross-references correct.
</p>
<a class="index-entry-id" id="index-tex_002dcompile"></a>
<a class="index-entry-id" id="index-C_002dc-C_002dc-_0028TeX-mode_0029"></a>
<p>To invoke some other compilation program on the current TeX
buffer, type <kbd class="kbd">C-c C-c</kbd> (<code class="code">tex-compile</code>).  This command knows
how to pass arguments to many common programs, including
<samp class="file">pdflatex</samp>, <samp class="file">yap</samp>, <samp class="file">xdvi</samp>, and <samp class="file">dvips</samp>.  You can
select your desired compilation program using the standard completion
keys (see <a class="pxref" href="Completion.html">Completion</a>).
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="TeX-Misc.html">TeX Mode Miscellany</a>, Previous: <a href="LaTeX-Editing.html">LaTeX Editing Commands</a>, Up: <a href="TeX-Mode.html">TeX Mode</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
