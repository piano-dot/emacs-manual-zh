<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Repetition (GNU Emacs Manual)</title>

<meta name="description" content="Repetition (GNU Emacs Manual)">
<meta name="keywords" content="Repetition (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Minibuffer.html" rel="up" title="Minibuffer">
<link href="Passwords.html" rel="next" title="Passwords">
<link href="Minibuffer-History.html" rel="prev" title="Minibuffer History">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Repetition">
<div class="nav-panel">
<p>
Next: <a href="Passwords.html" accesskey="n" rel="next">Entering passwords</a>, Previous: <a href="Minibuffer-History.html" accesskey="p" rel="prev">Minibuffer History</a>, Up: <a href="Minibuffer.html" accesskey="u" rel="up">The Minibuffer</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Repeating-Minibuffer-Commands"><span>9.6 Repeating Minibuffer Commands<a class="copiable-link" href="#Repeating-Minibuffer-Commands"> &para;</a></span></h3>
<a class="index-entry-id" id="index-command-history"></a>
<a class="index-entry-id" id="index-history-of-commands"></a>

<p>Every command that uses the minibuffer once is recorded on a special
history list, the <em class="dfn">command history</em>, together with the values of
its arguments, so that you can repeat the entire command.  In
particular, every use of <kbd class="kbd">M-x</kbd> is recorded there, since <kbd class="kbd">M-x</kbd>
uses the minibuffer to read the command name.
</p>
<a class="index-entry-id" id="index-list_002dcommand_002dhistory"></a>
<dl class="table">
<dt><kbd class="kbd">C-x <kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd></kbd></dt>
<dd><p>Re-execute a recent minibuffer command from the command history
 (<code class="code">repeat-complex-command</code>).
</p></dd>
<dt><kbd class="kbd">M-x list-command-history</kbd></dt>
<dd><p>Display the entire command history, showing all the commands
<kbd class="kbd">C-x <kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd></kbd> can repeat, most recent first.
</p></dd>
</dl>

<a class="index-entry-id" id="index-C_002dx-ESC-ESC"></a>
<a class="index-entry-id" id="index-repeat_002dcomplex_002dcommand"></a>
<p><kbd class="kbd">C-x <kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd></kbd> re-executes a recent command that used
the minibuffer.  With no argument, it repeats the last such command.
A numeric argument specifies which command to repeat; 1 means the last
one, 2 the previous, and so on.
</p>
<p><kbd class="kbd">C-x <kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd></kbd> works by turning the previous command
into a Lisp expression and then entering a minibuffer initialized with
the text for that expression.  Even if you don&rsquo;t know Lisp, it will
probably be obvious which command is displayed for repetition.  If you
type just <kbd class="key">RET</kbd>, that repeats the command unchanged.  You can also
change the command by editing the Lisp expression before you execute
it.  The executed command is added to the front of the command history
unless it is identical to the most recent item.
</p>
<p>Once inside the minibuffer for <kbd class="kbd">C-x <kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd></kbd>, you
can use the usual minibuffer history commands (see <a class="pxref" href="Minibuffer-History.html">Minibuffer History</a>) to move through the history list.  After finding the desired
previous command, you can edit its expression as usual and then execute
it by typing <kbd class="key">RET</kbd>.
</p>
<a class="index-entry-id" id="index-isearch_002dresume_002din_002dcommand_002dhistory"></a>
<p>Incremental search does not, strictly speaking, use the minibuffer.
Therefore, although it behaves like a complex command, it normally
does not appear in the history list for <kbd class="kbd">C-x&nbsp;<kbd class="key">ESC</kbd>&nbsp;<kbd class="key">ESC</kbd></kbd><!-- /@w -->.
You can make incremental search commands appear in the history by
setting <code class="code">isearch-resume-in-command-history</code> to a non-<code class="code">nil</code>
value.  See <a class="xref" href="Incremental-Search.html">Incremental Search</a>.
</p>
<a class="index-entry-id" id="index-command_002dhistory"></a>
<p>The list of previous minibuffer-using commands is stored as a Lisp
list in the variable <code class="code">command-history</code>.  Each element is a Lisp
expression that describes one command and its arguments.  Lisp programs
can re-execute a command by calling <code class="code">eval</code> with the
<code class="code">command-history</code> element.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Passwords.html">Entering passwords</a>, Previous: <a href="Minibuffer-History.html">Minibuffer History</a>, Up: <a href="Minibuffer.html">The Minibuffer</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
