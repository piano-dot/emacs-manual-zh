<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Rmail Inbox (GNU Emacs Manual)</title>

<meta name="description" content="Rmail Inbox (GNU Emacs Manual)">
<meta name="keywords" content="Rmail Inbox (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Rmail.html" rel="up" title="Rmail">
<link href="Rmail-Files.html" rel="next" title="Rmail Files">
<link href="Rmail-Deletion.html" rel="prev" title="Rmail Deletion">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Rmail-Inbox">
<div class="nav-panel">
<p>
Next: <a href="Rmail-Files.html" accesskey="n" rel="next">Multiple Rmail Files</a>, Previous: <a href="Rmail-Deletion.html" accesskey="p" rel="prev">Deleting Messages</a>, Up: <a href="Rmail.html" accesskey="u" rel="up">Reading Mail with Rmail</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Rmail-Files-and-Inboxes"><span>34.5 Rmail Files and Inboxes<a class="copiable-link" href="#Rmail-Files-and-Inboxes"> &para;</a></span></h3>
<a class="index-entry-id" id="index-inbox-file"></a>

<p>When you receive mail locally, the operating system places incoming
mail for you in a file that we call your <em class="dfn">inbox</em>.  When you start
up Rmail, it runs a C program called <code class="command">movemail</code> to copy the new
messages from your inbox into your primary Rmail file, which
also contains other messages saved from previous Rmail sessions.  It
is in this file that you actually read the mail with Rmail.  This
operation is called <em class="dfn">getting new mail</em>.  You can get new mail at
any time in Rmail by typing <kbd class="kbd">g</kbd>.
</p>
<a class="index-entry-id" id="index-rmail_002dprimary_002dinbox_002dlist"></a>
<a class="index-entry-id" id="index-MAIL-environment-variable"></a>
<p>The variable <code class="code">rmail-primary-inbox-list</code> contains a list of the
files that are inboxes for your primary Rmail file.  If you don&rsquo;t set
this variable explicitly, Rmail uses the <code class="env">MAIL</code> environment
variable, or, as a last resort, a default inbox based on
<code class="code">rmail-spool-directory</code>.  The default inbox file depends on your
operating system; often it is <samp class="file">/var/mail/<var class="var">username</var></samp>,
<samp class="file">/var/spool/mail/<var class="var">username</var></samp>, or
<samp class="file">/usr/spool/mail/<var class="var">username</var></samp>.
</p>
<p>You can specify the inbox file(s) for any Rmail file for the current
session with the command <code class="code">set-rmail-inbox-list</code>; see <a class="ref" href="Rmail-Files.html">Multiple Rmail Files</a>.
</p>
<p>There are two reasons for having separate Rmail files and inboxes.
</p>
<ol class="enumerate">
<li> The inbox file format varies between operating systems and according to
the other mail software in use.  Only one part of Rmail needs to know
about the alternatives, and it need only understand how to convert all
of them to Rmail&rsquo;s own format.

</li><li> It is very cumbersome to access an inbox file without danger of losing
mail, because it is necessary to interlock with mail delivery.
Moreover, different operating systems use different interlocking
techniques.  The strategy of moving mail out of the inbox once and for
all into a separate Rmail file avoids the need for interlocking in all
the rest of Rmail, since only Rmail operates on the Rmail file.
</li></ol>

<a class="index-entry-id" id="index-mbox-files"></a>
<a class="index-entry-id" id="index-rmail_002dmbox_002dformat"></a>
<p>Rmail uses the standard &lsquo;<samp class="samp">mbox</samp>&rsquo; format, introduced by Unix and
GNU systems for inbox files, as its internal format of Rmail files.
(In fact, there are a few slightly different mbox formats.  The
differences are not very important, but you can set the variable
<code class="code">rmail-mbox-format</code> to tell Rmail which form your system uses.
See that variable&rsquo;s documentation for more details.)
</p>
<a class="index-entry-id" id="index-rmail_002dpreserve_002dinbox"></a>
<p>When getting new mail, Rmail first copies the new mail from the
inbox file to the Rmail file; then it saves the Rmail file; then it
clears out the inbox file.  This way, a system crash may cause
duplication of mail between the inbox and the Rmail file, but cannot
lose mail.  If <code class="code">rmail-preserve-inbox</code> is non-<code class="code">nil</code>, then
Rmail does not clear out the inbox file when it gets new mail.  You
may wish to set this, for example, on a portable computer you use to
check your mail via POP while traveling, so that your mail will remain
on the server and you can save it later on your main desktop
workstation.
</p>
<p>In some cases, Rmail copies the new mail from the inbox file
indirectly.  First it runs the <code class="command">movemail</code> program to move the mail
from the inbox to an intermediate file called
<samp class="file">.newmail-<var class="var">inboxname</var></samp>, in the same directory as the Rmail
file.  Then Rmail merges the new mail from that file, saves the Rmail
file, and only then deletes the intermediate file.  If there is a crash
at the wrong time, this file continues to exist, and Rmail will use it
again the next time it gets new mail from that inbox.
</p>
<p>If Rmail is unable to convert the data in
<samp class="file">.newmail-<var class="var">inboxname</var></samp> into mbox format, it renames the file to
<samp class="file">RMAILOSE.<var class="var">n</var></samp> (<var class="var">n</var> is an integer chosen to make the name
unique) so that Rmail will not have trouble with the data again.  You
should look at the file, find whatever message confuses Rmail (probably
one that includes the control-underscore character, octal code 037), and
delete it.  Then you can use <kbd class="kbd">1 g</kbd> to get new mail from the
corrected file.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Rmail-Files.html">Multiple Rmail Files</a>, Previous: <a href="Rmail-Deletion.html">Deleting Messages</a>, Up: <a href="Rmail.html">Reading Mail with Rmail</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
