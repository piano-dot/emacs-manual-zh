<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Text and Binary (GNU Emacs Manual)</title>

<meta name="description" content="Text and Binary (GNU Emacs Manual)">
<meta name="keywords" content="Text and Binary (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Microsoft-Windows.html" rel="up" title="Microsoft Windows">
<link href="Windows-Files.html" rel="next" title="Windows Files">
<link href="Windows-Startup.html" rel="prev" title="Windows Startup">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Text-and-Binary">
<div class="nav-panel">
<p>
Next: <a href="Windows-Files.html" accesskey="n" rel="next">File Names on MS-Windows</a>, Previous: <a href="Windows-Startup.html" accesskey="p" rel="prev">How to Start Emacs on MS-Windows</a>, Up: <a href="Microsoft-Windows.html" accesskey="u" rel="up">Emacs and Microsoft Windows/MS-DOS</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Text-Files-and-Binary-Files"><span>I.2 Text Files and Binary Files<a class="copiable-link" href="#Text-Files-and-Binary-Files"> &para;</a></span></h3>
<a class="index-entry-id" id="index-text-and-binary-files-on-MS_002dDOS_002fMS_002dWindows"></a>

<p>GNU Emacs uses newline characters to separate text lines.  This is the
convention used on GNU, Unix, and other POSIX-compliant systems.
</p>
<a class="index-entry-id" id="index-end_002dof_002dline-conversion-on-MS_002dDOS_002fMS_002dWindows"></a>
<p>By contrast, MS-DOS and MS-Windows normally use carriage return
followed by linefeed, a two-character sequence, to separate text
lines.  (Linefeed is the same character as newline.)  Therefore,
convenient editing of typical files with Emacs requires conversion of
these end-of-line (EOL) sequences.  And that is what Emacs normally
does: it converts carriage return followed by linefeed into newline
when reading files, and converts newline into carriage return followed
by linefeed when writing files.  The same mechanism that handles
conversion of international character codes does this conversion also
(see <a class="pxref" href="Coding-Systems.html">Coding Systems</a>).
</p>
<a class="index-entry-id" id="index-cursor-location_002c-on-MS_002dDOS"></a>
<a class="index-entry-id" id="index-point-location_002c-on-MS_002dDOS"></a>
<p>One consequence of this special format-conversion of most files is
that character positions as reported by Emacs (see <a class="pxref" href="Position-Info.html">Cursor Position Information</a>) do
not agree with the file size information known to the operating system.
</p>
<p>In addition, if Emacs recognizes from a file&rsquo;s contents that it uses
newline rather than carriage return followed by linefeed as its line
separator, it does not perform EOL conversion when reading or writing
that file.  Thus, you can read and edit files from GNU and Unix
systems on MS-DOS with no special effort, and they will retain their
Unix-style end-of-line convention after you edit them.
</p>
<p>The mode line indicates whether end-of-line translation was used for
the current buffer.  If MS-DOS end-of-line translation is in use for the
buffer, the MS-Windows build of Emacs displays a backslash &lsquo;<samp class="samp">\</samp>&rsquo; after
the coding system mnemonic near the beginning of the mode line
(see <a class="pxref" href="Mode-Line.html">The Mode Line</a>).  If no EOL translation was performed, the string
&lsquo;<samp class="samp">(Unix)</samp>&rsquo; is displayed instead of the backslash, to alert you that the
file&rsquo;s EOL format is not the usual carriage return followed by linefeed.
</p>
<a class="index-entry-id" id="index-DOS_002dto_002dUnix-conversion-of-files"></a>
<p>To visit a file and specify whether it uses DOS-style or Unix-style
end-of-line, specify a coding system (see <a class="pxref" href="Text-Coding.html">Specifying a Coding System for File Text</a>).  For
example, <kbd class="kbd">C-x <kbd class="key">RET</kbd> c unix <kbd class="key">RET</kbd> C-x C-f foobar.txt</kbd>
visits the file <samp class="file">foobar.txt</samp> without converting the EOLs; if some
line ends with a carriage return followed by linefeed pair, Emacs will
display &lsquo;<samp class="samp">^M</samp>&rsquo; at the end of that line.  Similarly, you can direct
Emacs to save a buffer in a specified EOL format with the <kbd class="kbd">C-x
<kbd class="key">RET</kbd> f</kbd> command.  For example, to save a buffer with Unix EOL
format, type <kbd class="kbd">C-x <kbd class="key">RET</kbd> f unix <kbd class="key">RET</kbd> C-x C-s</kbd>.  If you
visit a file with DOS EOL conversion, then save it with Unix EOL
format, that effectively converts the file to Unix EOL style, like the
<code class="code">dos2unix</code> program.
</p>
<a class="index-entry-id" id="index-untranslated-file-system"></a>
<a class="index-entry-id" id="index-w32_002dadd_002duntranslated_002dfilesystem"></a>
<p>When you use NFS, Samba, or some other similar method to access file
systems that reside on computers using GNU or Unix systems, Emacs
should not perform end-of-line translation on any files in these file
systems&mdash;not even when you create a new file.  To request this,
designate these file systems as <em class="dfn">untranslated</em> file systems by
calling the function <code class="code">w32-add-untranslated-filesystem</code>.  It takes
one argument: the file system name, including a drive letter and
optionally a directory.  For example,
</p>
<div class="example">
<pre class="example-preformatted">(w32-add-untranslated-filesystem &quot;Z:&quot;)
</pre></div>

<p>designates drive Z as an untranslated file system, and
</p>
<div class="example">
<pre class="example-preformatted">(w32-add-untranslated-filesystem &quot;Z:\\foo&quot;)
</pre></div>

<p>designates directory <samp class="file">\foo</samp> on drive Z as an untranslated file
system.
</p>
<p>Most often you would use <code class="code">w32-add-untranslated-filesystem</code> in your
<samp class="file">.emacs</samp> or <samp class="file">init.el</samp> init file, or in <samp class="file">site-start.el</samp>
so that all the users at your site get the benefit of it.
</p>
<a class="index-entry-id" id="index-w32_002dremove_002duntranslated_002dfilesystem"></a>
<p>To countermand the effect of <code class="code">w32-add-untranslated-filesystem</code>,
use the function <code class="code">w32-remove-untranslated-filesystem</code>.  This
function takes one argument, which should be a string just like the
one that was used previously with <code class="code">w32-add-untranslated-filesystem</code>.
</p>
<p>Designating a file system as untranslated does not affect character
set conversion, only end-of-line conversion.  Essentially, it directs
Emacs to default to creating new files with the Unix-style convention
of using newline at the end of a line.  See <a class="xref" href="Coding-Systems.html">Coding Systems</a>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Windows-Files.html">File Names on MS-Windows</a>, Previous: <a href="Windows-Startup.html">How to Start Emacs on MS-Windows</a>, Up: <a href="Microsoft-Windows.html">Emacs and Microsoft Windows/MS-DOS</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
