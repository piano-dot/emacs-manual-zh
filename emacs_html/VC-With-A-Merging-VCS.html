<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>VC With A Merging VCS (GNU Emacs Manual)</title>

<meta name="description" content="VC With A Merging VCS (GNU Emacs Manual)">
<meta name="keywords" content="VC With A Merging VCS (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Basic-VC-Editing.html" rel="up" title="Basic VC Editing">
<link href="VC-With-A-Locking-VCS.html" rel="next" title="VC With A Locking VCS">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsubsection-level-extent" id="VC-With-A-Merging-VCS">
<div class="nav-panel">
<p>
Next: <a href="VC-With-A-Locking-VCS.html" accesskey="n" rel="next">Basic Version Control with Locking</a>, Up: <a href="Basic-VC-Editing.html" accesskey="u" rel="up">Basic Editing under Version Control</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="Basic-Version-Control-with-Merging"><span>29.1.3.1 Basic Version Control with Merging<a class="copiable-link" href="#Basic-Version-Control-with-Merging"> &para;</a></span></h4>

<p>With a modern merging-based version control system (such as Git and Hg;
see <a class="pxref" href="VCS-Merging.html">Merge-based vs Lock-based Version Control</a>), <kbd class="kbd">C-x v v</kbd> does the following when invoked
from a buffer that visits a version-controlled file or a VC Directory
or Dired buffer:
</p>
<ul class="itemize mark-bullet">
<li>If there is more than one file in the VC fileset and the files have
inconsistent version control statuses, signal an error.  (Note,
however, that a fileset is allowed to include both newly-added files
and modified files; see <a class="pxref" href="Registering.html">Registering a File for Version Control</a>.)  Also signal an error if the
files in the fileset are missing (removed from the filesystem, but
still tracked by version control), or are ignored by version control.

</li><li>If every file in the VC fileset is registered and unchanged with
respect to the last revision, do nothing.

</li><li>If none of the files in the VC fileset are registered with a version
control system, register the newly-added files in the VC fileset,
i.e., place them under version control.  See <a class="xref" href="Registering.html">Registering a File for Version Control</a>.  If Emacs
cannot find a system to register under, it prompts for a repository
type, creates a new repository, and registers the VC fileset with it.
You can also specify the system explicitly, see <a class="ref" href="Advanced-C_002dx-v-v.html">Advanced Control in <kbd class="kbd">C-x v v</kbd></a>.  Note that registering the files doesn&rsquo;t commit them; you must
invoke <kbd class="kbd">C-x&nbsp;v&nbsp;v</kbd><!-- /@w --> again to commit, see below.

</li><li>If every file in the VC fileset has been either newly-added or
modified, commit the changed files.  To do this, Emacs pops up a
<samp class="file">*vc-log*</samp> buffer; type the desired log entry for the changes,
followed by <kbd class="kbd">C-c C-c</kbd> to commit.  See <a class="xref" href="Log-Buffer.html">Features of the Log Entry Buffer</a>.

<p>With modern decentralized version control systems (Git, Mercurial,
etc.), the changes are committed locally and not automatically
propagated to the upstream repository (which is usually on a remote
host).  In these cases, if the repository has been changed since your
last update, the commit may fail.  In that case, you must update from
upstream and then try again.  Use <kbd class="kbd">C-x v +</kbd> (see <a class="pxref" href="Pulling-_002f-Pushing.html">Pulling/Pushing Changes into/from a Branch</a>) or <kbd class="kbd">C-x v m</kbd> (see <a class="pxref" href="Merging.html">Merging Branches</a>) for that.
</p>
<p>With a centralized version control system, if the commit fails due to
upstream changes, type <kbd class="kbd">C-x v v</kbd> again to merge in the upstream
repository changes.
</p>
</li><li>Finally, if you are using a centralized version control system, if any
file in the VC fileset is outdated with respect to the upstream
repository, offer to update the fileset from the repository.
</li></ul>

<p>These rules also apply when you use RCS in its non-locking mode,
except that changes are not automatically merged from the repository.
Nothing informs you if another user has committed changes in the same
file since you began editing it; when you commit your revision, that
other user&rsquo;s changes are removed (however, they remain in the
repository and are thus not irrevocably lost).  Therefore, you must
verify that the current revision is unchanged before committing your
changes.  In addition, locking is possible with RCS even in this mode:
<kbd class="kbd">C-x v v</kbd> with an unmodified file locks the file, just as it does
with RCS in its normal locking mode (see <a class="pxref" href="VC-With-A-Locking-VCS.html">Basic Version Control with Locking</a>).
</p>
<p>If <kbd class="kbd">C-x v v</kbd> is invoked from a buffer under Diff Mode, the
command assumes the buffer holds a set of patches for one or more
files.  It then applies the changes to the respective files and
commits the changes after popping up the <samp class="file">*vc-log*</samp> buffer to
allow you to type a suitable commit log message.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="VC-With-A-Locking-VCS.html">Basic Version Control with Locking</a>, Up: <a href="Basic-VC-Editing.html">Basic Editing under Version Control</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
