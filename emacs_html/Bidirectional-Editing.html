<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Bidirectional Editing (GNU Emacs Manual)</title>

<meta name="description" content="Bidirectional Editing (GNU Emacs Manual)">
<meta name="keywords" content="Bidirectional Editing (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="International.html" rel="up" title="International">
<link href="Charsets.html" rel="prev" title="Charsets">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Bidirectional-Editing">
<div class="nav-panel">
<p>
Previous: <a href="Charsets.html" accesskey="p" rel="prev">Charsets</a>, Up: <a href="International.html" accesskey="u" rel="up">International Character Set Support</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Bidirectional-Editing-1"><span>23.20 Bidirectional Editing<a class="copiable-link" href="#Bidirectional-Editing-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-bidirectional-editing"></a>
<a class="index-entry-id" id="index-right_002dto_002dleft-text"></a>

<p>Emacs supports editing text written in scripts, such as Arabic,
Farsi, and Hebrew, whose natural ordering of horizontal text for
display is from right to left.  However, digits and Latin text
embedded in these scripts are still displayed left to right.  It is
also not uncommon to have small portions of text in Arabic or Hebrew
embedded in an otherwise Latin document; e.g., as comments and strings
in a program source file.  For these reasons, text that uses these
scripts is actually <em class="dfn">bidirectional</em>: a mixture of runs of
left-to-right and right-to-left characters.
</p>
<p>This section describes the facilities and options provided by Emacs
for editing bidirectional text.
</p>
<a class="index-entry-id" id="index-logical-order"></a>
<a class="index-entry-id" id="index-visual-order"></a>
<p>Emacs stores right-to-left and bidirectional text in the so-called
<em class="dfn">logical</em> (or <em class="dfn">reading</em>) order: the buffer or string position
of the first character you read precedes that of the next character.
Reordering of bidirectional text into the <em class="dfn">visual</em> order happens
at display time.  As a result, character positions no longer increase
monotonically with their positions on display.  Emacs implements the
Unicode Bidirectional Algorithm (UBA) described in the
<a class="uref" href="https://unicode.org/reports/tr9/">Unicode Standard Annex #9</a>, for
reordering of bidirectional text for display.
It deviates from the UBA only in how continuation lines are displayed
when text direction is opposite to the base paragraph direction,
e.g., when a long line of English text appears in a right-to-left
paragraph.
</p>
<a class="index-entry-id" id="index-bidi_002ddisplay_002dreordering"></a>
<p>The buffer-local variable <code class="code">bidi-display-reordering</code> controls
whether text in the buffer is reordered for display.  If its value is
non-<code class="code">nil</code>, Emacs reorders characters that have right-to-left
directionality when they are displayed.  The default value is
<code class="code">t</code>.
</p>
<a class="index-entry-id" id="index-base-direction-of-paragraphs"></a>
<a class="index-entry-id" id="index-paragraph_002c-base-direction"></a>
<a class="index-entry-id" id="index-bidi_002dparagraph_002dstart_002dre"></a>
<a class="index-entry-id" id="index-bidi_002dparagraph_002dseparate_002dre"></a>
<p>Each paragraph of bidirectional text can have its own <em class="dfn">base
direction</em>, either right-to-left or left-to-right.  Text in
left-to-right paragraphs begins on the screen at the left margin of
the window and is truncated or continued when it reaches the right
margin.  By contrast, text in right-to-left paragraphs is displayed
starting at the right margin and is continued or truncated at the left
margin.  By default, paragraph boundaries are empty lines, i.e., lines
consisting entirely of whitespace characters.  To change that, you can
customize the two variables <code class="code">bidi-paragraph-start-re</code> and
<code class="code">bidi-paragraph-separate-re</code>, whose values should be regular
expressions (strings); e.g., to have a single newline start a new
paragraph, set both of these variables to <code class="code">&quot;^&quot;</code>.  These two
variables are buffer-local (see <a class="pxref" href="Locals.html">Local Variables</a>).
</p>
<a class="index-entry-id" id="index-bidi_002dparagraph_002ddirection"></a>
<p>Emacs determines the base direction of each paragraph dynamically,
based on the text at the beginning of the paragraph.  However,
sometimes a buffer may need to force a certain base direction for its
paragraphs.  The variable <code class="code">bidi-paragraph-direction</code>, if
non-<code class="code">nil</code>, disables the dynamic determination of the base
direction, and instead forces all paragraphs in the buffer to have the
direction specified by its buffer-local value.  The value can be either
<code class="code">right-to-left</code> or <code class="code">left-to-right</code>.  Any other value is
interpreted as <code class="code">nil</code>.
</p>
<a class="index-entry-id" id="index-LRM"></a>
<a class="index-entry-id" id="index-RLM"></a>
<p>Alternatively, you can control the base direction of a paragraph by
inserting special formatting characters in front of the paragraph.
The special character <code class="code">RIGHT-TO-LEFT MARK</code>, or <small class="sc">RLM</small>, forces
the right-to-left direction on the following paragraph, while
<code class="code">LEFT-TO-RIGHT MARK</code>, or <small class="sc">LRM</small> forces the left-to-right
direction.  (You can use <kbd class="kbd">C-x 8 <kbd class="key">RET</kbd></kbd> to insert these characters.)
In a GUI session, the <small class="sc">LRM</small> and <small class="sc">RLM</small> characters display as very
thin blank characters; on text terminals they display as blanks.
</p>
<p>Because characters are reordered for display, Emacs commands that
operate in the logical order or on stretches of buffer positions may
produce unusual effects.  For example, the commands <kbd class="kbd">C-f</kbd> and
<kbd class="kbd">C-b</kbd> move point in the logical order, so the cursor will
sometimes jump when point traverses reordered bidirectional text.
Similarly, a highlighted region covering a contiguous range of
character positions may look discontinuous if the region spans
reordered text.  This is normal and similar to the behavior of other
programs that support bidirectional text.
</p>
<a class="index-entry-id" id="index-RIGHT_002c-and-bidirectional-text"></a>
<a class="index-entry-id" id="index-LEFT_002c-and-bidirectional-text"></a>
<a class="index-entry-id" id="index-right_002dchar_002c-and-bidirectional-text"></a>
<a class="index-entry-id" id="index-left_002dchar_002c-and-bidirectional-text"></a>
<p>Cursor motion commands bound to arrow keys, such as <kbd class="key">LEFT</kbd> and
<kbd class="kbd">C-<kbd class="key">RIGHT</kbd></kbd>, are sensitive to the base direction of the
current paragraph.  In a left-to-right paragraph, commands bound to
<kbd class="key">RIGHT</kbd> with or without modifiers move <em class="emph">forward</em> through
buffer text, but in a right-to-left paragraph they move
<em class="emph">backward</em> instead.  This reflects the fact that in a
right-to-left paragraph buffer positions predominantly increase when
moving to the left on display.
</p>
<p>When you move out of a paragraph, the meaning of the arrow keys
might change if the base direction of the preceding or the following
paragraph is different from the paragraph out of which you moved.
When that happens, you need to adjust the arrow key you press to the
new base direction.
</p>
<a class="index-entry-id" id="index-visual_002dorder_002dcursor_002dmovement"></a>
<a class="index-entry-id" id="index-cursor_002c-visual_002dorder-motion"></a>
<p>By default, <kbd class="key">LEFT</kbd> and <kbd class="key">RIGHT</kbd> move in the logical order,
but if <code class="code">visual-order-cursor-movement</code> is non-<code class="code">nil</code>, these
commands move to the character that is, correspondingly, to the left
or right of the current screen position, moving to the next or
previous screen line as appropriate.  Note that this might potentially
move point many buffer positions away, depending on the surrounding
bidirectional context.
</p>
<a class="index-entry-id" id="index-bidi-formatting-control-characters"></a>
<p>Bidirectional text sometimes uses special formatting characters to
affect the reordering of text for display.  The <small class="sc">LRM</small> and <small class="sc">RLM</small>
characters, mentioned above, are two such characters, but there are
more of them.  They are by default displayed as thin space glyphs on
GUI frames, and as simple spaces on text-mode frames.  If you want to
be aware of these special control characters, so that their effect on
display does not come as a surprise, you can turn on the
<code class="code">glyphless-display-mode</code> (see <a class="pxref" href="Text-Display.html">How Text Is Displayed</a>).  This minor mode
will cause these formatting characters to be displayed as acronyms
inside a small box, so that they stand out on display, and make their
effect easier to understand.
</p></div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Charsets.html">Charsets</a>, Up: <a href="International.html">International Character Set Support</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
