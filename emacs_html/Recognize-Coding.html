<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Recognize Coding (GNU Emacs Manual)</title>

<meta name="description" content="Recognize Coding (GNU Emacs Manual)">
<meta name="keywords" content="Recognize Coding (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="International.html" rel="up" title="International">
<link href="Specify-Coding.html" rel="next" title="Specify Coding">
<link href="Coding-Systems.html" rel="prev" title="Coding Systems">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Recognize-Coding">
<div class="nav-panel">
<p>
Next: <a href="Specify-Coding.html" accesskey="n" rel="next">Specifying a File&rsquo;s Coding System</a>, Previous: <a href="Coding-Systems.html" accesskey="p" rel="prev">Coding Systems</a>, Up: <a href="International.html" accesskey="u" rel="up">International Character Set Support</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Recognizing-Coding-Systems"><span>23.6 Recognizing Coding Systems<a class="copiable-link" href="#Recognizing-Coding-Systems"> &para;</a></span></h3>

<p>Whenever Emacs reads a given piece of text, it tries to recognize
which coding system to use.  This applies to files being read, output
from subprocesses, text from X selections, etc.  Emacs can select the
right coding system automatically most of the time&mdash;once you have
specified your preferences.
</p>
<p>Some coding systems can be recognized or distinguished by which byte
sequences appear in the data.  However, there are coding systems that
cannot be distinguished, not even potentially.  For example, there is no
way to distinguish between Latin-1 and Latin-2; they use the same byte
values with different meanings.
</p>
<p>Emacs handles this situation by means of a priority list of coding
systems.  Whenever Emacs reads a file, if you do not specify the coding
system to use, Emacs checks the data against each coding system,
starting with the first in priority and working down the list, until it
finds a coding system that fits the data.  Then it converts the file
contents assuming that they are represented in this coding system.
</p>
<p>The priority list of coding systems depends on the selected language
environment (see <a class="pxref" href="Language-Environments.html">Language Environments</a>).  For example, if you use
French, you probably want Emacs to prefer Latin-1 to Latin-2; if you use
Czech, you probably want Latin-2 to be preferred.  This is one of the
reasons to specify a language environment.
</p>
<a class="index-entry-id" id="index-prefer_002dcoding_002dsystem"></a>
<p>However, you can alter the coding system priority list in detail
with the command <kbd class="kbd">M-x prefer-coding-system</kbd>.  This command reads
the name of a coding system from the minibuffer, and adds it to the
front of the priority list, so that it is preferred to all others.  If
you use this command several times, each use adds one element to the
front of the priority list.
</p>
<p>If you use a coding system that specifies the end-of-line conversion
type, such as <code class="code">iso-8859-1-dos</code>, what this means is that Emacs
should attempt to recognize <code class="code">iso-8859-1</code> with priority, and should
use DOS end-of-line conversion when it does recognize <code class="code">iso-8859-1</code>.
</p>
<a class="index-entry-id" id="index-file_002dcoding_002dsystem_002dalist"></a>
<p>Sometimes a file name indicates which coding system to use for the
file.  The variable <code class="code">file-coding-system-alist</code> specifies this
correspondence.  There is a special function
<code class="code">modify-coding-system-alist</code> for adding elements to this list.  For
example, to read and write all &lsquo;<samp class="samp">.txt</samp>&rsquo; files using the coding system
<code class="code">chinese-iso-8bit</code>, you can execute this Lisp expression:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(modify-coding-system-alist 'file &quot;\\.txt\\'&quot; 'chinese-iso-8bit)
</pre></div>

<p>The first argument should be <code class="code">file</code>, the second argument should be
a regular expression that determines which files this applies to, and
the third argument says which coding system to use for these files.
</p>
<a class="index-entry-id" id="index-inhibit_002deol_002dconversion"></a>
<a class="index-entry-id" id="index-DOS_002dstyle-end_002dof_002dline-display"></a>
<p>Emacs recognizes which kind of end-of-line conversion to use based on
the contents of the file: if it sees only carriage returns, or only
carriage return followed by linefeed sequences, then it chooses the
end-of-line conversion accordingly.  You can inhibit the automatic use
of end-of-line conversion by setting the variable
<code class="code">inhibit-eol-conversion</code> to non-<code class="code">nil</code>.  If you do that,
DOS-style files will be displayed with the &lsquo;<samp class="samp">^M</samp>&rsquo; characters
visible in the buffer; some people prefer this to the more subtle
&lsquo;<samp class="samp">(DOS)</samp>&rsquo; end-of-line type indication near the left edge of the
mode line (see <a class="pxref" href="Mode-Line.html">eol-mnemonic</a>).
</p>
<a class="index-entry-id" id="index-inhibit_002diso_002descape_002ddetection"></a>
<a class="index-entry-id" id="index-escape-sequences-in-files"></a>
<p>By default, the automatic detection of the coding system is sensitive to
escape sequences.  If Emacs sees a sequence of characters that begin
with an escape character, and the sequence is valid as an ISO-2022
code, that tells Emacs to use one of the ISO-2022 encodings to decode
the file.
</p>
<p>However, there may be cases that you want to read escape sequences
in a file as is.  In such a case, you can set the variable
<code class="code">inhibit-iso-escape-detection</code> to non-<code class="code">nil</code>.  Then the code
detection ignores any escape sequences, and never uses an ISO-2022
encoding.  The result is that all escape sequences become visible in
the buffer.
</p>
<p>The default value of <code class="code">inhibit-iso-escape-detection</code> is
<code class="code">nil</code>.  We recommend that you not change it permanently, only for
one specific operation.  That&rsquo;s because some Emacs Lisp source files
in the Emacs distribution contain non-<abbr class="acronym">ASCII</abbr> characters encoded in the
coding system <code class="code">iso-2022-7bit</code>, and they won&rsquo;t be
decoded correctly when you visit those files if you suppress the
escape sequence detection.
</p>
<a class="index-entry-id" id="index-auto_002dcoding_002dalist"></a>
<a class="index-entry-id" id="index-auto_002dcoding_002dregexp_002dalist"></a>
<p>The variables <code class="code">auto-coding-alist</code> and
<code class="code">auto-coding-regexp-alist</code> are
the strongest way to specify the coding system for certain patterns of
file names, or for files containing certain patterns, respectively.
These variables even override &lsquo;<samp class="samp">-*-coding:-*-</samp>&rsquo; tags in the file
itself (see <a class="pxref" href="Specify-Coding.html">Specifying a File&rsquo;s Coding System</a>).  For example, Emacs
uses <code class="code">auto-coding-alist</code> for tar and archive files, to prevent it
from being confused by a &lsquo;<samp class="samp">-*-coding:-*-</samp>&rsquo; tag in a member of the
archive and thinking it applies to the archive file as a whole.
</p>
<a class="index-entry-id" id="index-auto_002dcoding_002dfunctions"></a>
<p>Another way to specify a coding system is with the variable
<code class="code">auto-coding-functions</code>.  For example, one of the builtin
<code class="code">auto-coding-functions</code> detects the encoding for XML files.
Unlike the previous two, this variable does not override any
&lsquo;<samp class="samp">-*-coding:-*-</samp>&rsquo; tag.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Specify-Coding.html">Specifying a File&rsquo;s Coding System</a>, Previous: <a href="Coding-Systems.html">Coding Systems</a>, Up: <a href="International.html">International Character Set Support</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
