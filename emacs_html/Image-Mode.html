<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Image Mode (GNU Emacs Manual)</title>

<meta name="description" content="Image Mode (GNU Emacs Manual)">
<meta name="keywords" content="Image Mode (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Filesets.html" rel="next" title="Filesets">
<link href="File-Conveniences.html" rel="prev" title="File Conveniences">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Image-Mode">
<div class="nav-panel">
<p>
Next: <a href="Filesets.html" accesskey="n" rel="next">Filesets</a>, Previous: <a href="File-Conveniences.html" accesskey="p" rel="prev">Convenience Features for Finding Files</a>, Up: <a href="Files.html" accesskey="u" rel="up">File Handling</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Viewing-Image-Files"><span>19.19 Viewing Image Files<a class="copiable-link" href="#Viewing-Image-Files"> &para;</a></span></h3>

<a class="index-entry-id" id="index-image_002dmode"></a>
<a class="index-entry-id" id="index-image_002dtoggle_002ddisplay"></a>
<a class="index-entry-id" id="index-images_002c-viewing"></a>
<p>Visiting image files automatically selects Image mode.  In this
major mode, you can type <kbd class="kbd">C-c C-c</kbd> (<code class="code">image-toggle-display</code>)
to toggle between displaying the file as an image in the Emacs buffer,
and displaying its underlying text (or raw byte) representation.
Additionally you can type <kbd class="kbd">C-c C-x</kbd> (<code class="code">image-toggle-hex-display</code>)
to toggle between displaying the file as an image in the Emacs buffer,
and displaying it in hex representation.  Displaying the file as an
image works only if Emacs is compiled with support for displaying
such images.
</p>
<a class="index-entry-id" id="index-image_002dauto_002dresize"></a>
<a class="index-entry-id" id="index-image_002dauto_002dresize_002don_002dwindow_002dresize"></a>
<p>If the displayed image is wider or taller than the window in which it
is displayed, the usual point motion keys (<kbd class="kbd">C-f</kbd>, <kbd class="kbd">C-p</kbd>, and
so forth) cause different parts of the image to be displayed.
However, by default images are resized automatically to fit the
window, so this is only necessary if you customize the default
behavior by using the options <code class="code">image-auto-resize</code> and
<code class="code">image-auto-resize-on-window-resize</code>.
</p>
<a class="index-entry-id" id="index-image_002dtransform_002dfit_002dto_002dwindow"></a>
<a class="index-entry-id" id="index-s-w-_0028Image-mode_0029"></a>
<a class="index-entry-id" id="index-image_002dtransform_002dset_002dpercent"></a>
<a class="index-entry-id" id="index-s-p-_0028Image-mode_0029"></a>
<a class="index-entry-id" id="index-image_002dtransform_002dset_002dscale"></a>
<a class="index-entry-id" id="index-s-s-_0028Image-mode_0029"></a>
<a class="index-entry-id" id="index-image_002dtransform_002dreset_002dto_002dinitial"></a>
<a class="index-entry-id" id="index-s-0-_0028Image-mode_0029"></a>
<a class="index-entry-id" id="index-image_002dtransform_002dreset_002dto_002doriginal"></a>
<a class="index-entry-id" id="index-s-o-_0028Image-mode_0029"></a>
<p>To resize the image manually you can use the command
<code class="code">image-transform-fit-to-window</code> bound to <kbd class="kbd">s w</kbd> that fits the
image to both the window height and width.  To scale the image to a
percentage of its original size, use the command
<code class="code">image-transform-set-percent</code> bound to <kbd class="kbd">s p</kbd>.  To scale the
image specifying a scale factor, use the command
<code class="code">image-transform-set-scale</code> bound to <kbd class="kbd">s s</kbd>.  To reset all
transformations to the initial state, use
<code class="code">image-transform-reset-to-initial</code> bound to <kbd class="kbd">s 0</kbd>, or
<code class="code">image-transform-reset-to-original</code> bound to <kbd class="kbd">s o</kbd>.
</p>
<a class="index-entry-id" id="index-image_002dnext_002dfile"></a>
<a class="index-entry-id" id="index-image_002dprevious_002dfile"></a>
<p>You can press <kbd class="kbd">n</kbd> (<code class="code">image-next-file</code>) and <kbd class="kbd">p</kbd>
(<code class="code">image-previous-file</code>) to visit the next image file and the
previous image file in the same directory, respectively.  These
commands will consult the &ldquo;parent&rdquo; dired buffer to determine what
the next/previous image file is.  These commands also work when
opening a file from archive files (like zip or tar files), and will
then instead consult the archive mode buffer.  If neither an archive
nor a dired &ldquo;parent&rdquo; buffer can be found, a dired buffer is opened.
</p>
<a class="index-entry-id" id="index-image_002dmode_002dmark_002dfile"></a>
<a class="index-entry-id" id="index-image_002dmode_002dunmark_002dfile"></a>
<a class="index-entry-id" id="index-image_002dmode_002dcopy_002dfile_002dname_002das_002dkill"></a>
<p>When looking through images, it&rsquo;s sometimes convenient to be able to
mark the files for later processing (for instance, if you want to
select a group of images to copy somewhere else).  The <kbd class="kbd">m</kbd>
(<code class="code">image-mode-mark-file</code>) command will mark the current file in
any Dired buffer(s) that display the current file&rsquo;s directory.  If no
such buffer is open, the directory is opened in a new buffer.  To
unmark files, use the <kbd class="kbd">u</kbd> (<code class="code">image-mode-mark-file</code>) command.
Finally, if you just want to copy the current buffers file name to the
kill ring, you can use the <kbd class="kbd">w</kbd>
(<code class="code">image-mode-copy-file-name-as-kill</code>) command.
</p>
<a class="index-entry-id" id="index-image_002dtoggle_002danimation"></a>
<a class="index-entry-id" id="index-image_002dnext_002dframe"></a>
<a class="index-entry-id" id="index-image_002dprevious_002dframe"></a>
<a class="index-entry-id" id="index-image_002dgoto_002dframe"></a>
<a class="index-entry-id" id="index-image_002dincrease_002dspeed"></a>
<a class="index-entry-id" id="index-image_002ddecrease_002dspeed"></a>
<a class="index-entry-id" id="index-image_002dreset_002dspeed"></a>
<a class="index-entry-id" id="index-image_002dreverse_002dspeed"></a>
<a class="index-entry-id" id="index-image_002danimate_002dloop"></a>
<a class="index-entry-id" id="index-image-animation"></a>
<a class="index-entry-id" id="index-animated-images"></a>
<p>If the image can be animated, the command <kbd class="key">RET</kbd>
(<code class="code">image-toggle-animation</code>) starts or stops the animation.
Animation plays once, unless the option <code class="code">image-animate-loop</code> is
non-<code class="code">nil</code>.  With <kbd class="kbd">f</kbd> (<code class="code">image-next-frame</code>) and <kbd class="kbd">b</kbd>
(<code class="code">image-previous-frame</code>) you can step through the individual
frames.  Both commands accept a numeric prefix to step through several
frames at once.  You can go to a specific frame with <kbd class="kbd">F</kbd>
(<code class="code">image-goto-frame</code>).  Frames are indexed from 1.  Typing <kbd class="kbd">a
+</kbd> (<code class="code">image-increase-speed</code>) increases the speed of the animation,
<kbd class="kbd">a -</kbd> (<code class="code">image-decrease-speed</code>) decreases it, and <kbd class="kbd">a r</kbd>
(<code class="code">image-reverse-speed</code>) reverses it.  The command <kbd class="kbd">a 0</kbd>
(<code class="code">image-reset-speed</code>) resets the speed to the original value.
</p>
<p>In addition to the above key bindings, which are specific to Image
mode, images shown in any Emacs buffer have special key bindings when
point is at or inside the image:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-image-resize"></a>
<a class="index-entry-id" id="index-image_002dincrease_002dsize"></a>
<a class="index-entry-id" id="index-i-_002b-_0028Image-mode_0029"></a>
<a id="index-resize-images"></a><span><kbd class="kbd">i +</kbd><a class="copiable-link" href="#index-resize-images"> &para;</a></span></dt>
<dd><p>Increase the image size (<code class="code">image-increase-size</code>) by 20%.  Prefix
numeric argument controls the increment; the value of <var class="var">n</var> means to
multiply the size by the factor of <code class="code">1&nbsp;+&nbsp;<var class="var">n</var>&nbsp;/&nbsp;10</code><!-- /@w -->, so
<kbd class="kbd">C-u&nbsp;5&nbsp;i&nbsp;+</kbd><!-- /@w --> means to increase the size by 50%.
</p>
</dd>
<dt><a class="index-entry-id" id="index-i-_002d-_0028Image-mode_0029"></a>
<a id="index-image_002ddecrease_002dsize"></a><span><kbd class="kbd">i -</kbd><a class="copiable-link" href="#index-image_002ddecrease_002dsize"> &para;</a></span></dt>
<dd><p>Decrease the image size (<code class="code">image-increase-size</code>) by 20%.  Prefix
numeric argument controls the decrement; the value of <var class="var">n</var> means to
multiply the size by the factor of <code class="code">1&nbsp;-&nbsp;<var class="var">n</var>&nbsp;/&nbsp;10</code><!-- /@w -->, so
<kbd class="kbd">C-u&nbsp;3&nbsp;i&nbsp;-</kbd><!-- /@w --> means to decrease the size by 30%.
</p>
</dd>
<dt><a class="index-entry-id" id="index-image-rotation"></a>
<a class="index-entry-id" id="index-image_002drotate"></a>
<a class="index-entry-id" id="index-i-r-_0028Image-mode_0029"></a>
<a id="index-rotating-images"></a><span><kbd class="kbd">i r</kbd><a class="copiable-link" href="#index-rotating-images"> &para;</a></span></dt>
<dd><p>Rotate the image by 90 degrees clockwise (<code class="code">image-rotate</code>).
With the prefix argument, rotate by 90 degrees counter-clockwise instead.
Note that this command is not available for sliced images.
</p>
</dd>
<dt><a class="index-entry-id" id="index-i-h-_0028Image-mode_0029"></a>
<a id="index-image_002dflip_002dhorizontally"></a><span><kbd class="kbd">i h</kbd><a class="copiable-link" href="#index-image_002dflip_002dhorizontally"> &para;</a></span></dt>
<dd><p>Flip the image horizontally (<code class="code">image-flip-horizontally</code>).  This
presents the image as if reflected in a vertical mirror.
Note that this command is not available for sliced images.
</p>
</dd>
<dt><a class="index-entry-id" id="index-i-v-_0028Image-mode_0029"></a>
<a id="index-image_002dflip_002dvertically"></a><span><kbd class="kbd">i v</kbd><a class="copiable-link" href="#index-image_002dflip_002dvertically"> &para;</a></span></dt>
<dd><p>Flip the image vertically (<code class="code">image-flip-vertically</code>).  This
presents the image as if reflected in a horizontal mirror.
Note that this command is not available for sliced images.
</p>
</dd>
<dt><a class="index-entry-id" id="index-i-o-_0028Image-mode_0029"></a>
<a id="index-image_002dsave"></a><span><kbd class="kbd">i o</kbd><a class="copiable-link" href="#index-image_002dsave"> &para;</a></span></dt>
<dd><p>Save the image to a file (<code class="code">image-save</code>).  This command prompts
you for the name of the file to save the image.
</p>
</dd>
<dt><a class="index-entry-id" id="index-image_002dcrop_002dcrop_002dcommand"></a>
<a class="index-entry-id" id="index-image_002dcrop"></a>
<a class="index-entry-id" id="index-i-c-_0028Image-mode_0029"></a>
<a id="index-cropping-images"></a><span><kbd class="kbd">i c</kbd><a class="copiable-link" href="#index-cropping-images"> &para;</a></span></dt>
<dd><p>Crop the image (<code class="code">image-crop</code>).  This command is available only if
your system has an external program installed that can be used for
cropping and cutting of images; the user option
<code class="code">image-crop-crop-command</code> determines what program to use, and
defaults to the ImageMagick&rsquo;s <code class="command">convert</code> program.  The command
displays the image with a rectangular frame superimposed on it, and
lets you use the mouse to move and resize the frame.  Type <kbd class="kbd">m</kbd> to
cause mouse movements to move the frame instead of resizing it; type
<kbd class="kbd">s</kbd> to move a square frame instead.  When you are satisfied with
the position and size of the cropping frame, type <kbd class="kbd"><kbd class="key">RET</kbd></kbd> to
actually crop the part under the frame; or type <kbd class="kbd">q</kbd> to exit
without cropping.  You can then save the cropped image using <kbd class="kbd">i&nbsp;o</kbd><!-- /@w --> or <kbd class="kbd">M-x&nbsp;image-save</kbd><!-- /@w -->.
</p>
</dd>
<dt><a class="index-entry-id" id="index-i-x-_0028Image-mode_0029"></a>
<a class="index-entry-id" id="index-image_002dcut_002dcolor"></a>
<a class="index-entry-id" id="index-image_002dcrop_002dcut_002dcommand"></a>
<a id="index-image_002dcut"></a><span><kbd class="kbd">i x</kbd><a class="copiable-link" href="#index-image_002dcut"> &para;</a></span></dt>
<dd><p>Cut a rectangle from the image (<code class="code">image-cut</code>).  This works the
same as <code class="code">image-crop</code> (and also requires an external program,
defined by the variable <code class="code">image-crop-cut-command</code>, to perform the
image cut), but instead of cropping the image, it removes the part
inside the frame and fills that part with the color specified by
<code class="code">image-cut-color</code>.  With prefix argument, the command prompts for
the color to use.
</p></dd>
</dl>

<p>The size and rotation commands are &ldquo;repeating&rdquo;, which means that you
can continue adjusting the image without using the <kbd class="kbd">i</kbd> prefix.
</p>
<a class="index-entry-id" id="index-ImageMagick-support"></a>
<a class="index-entry-id" id="index-imagemagick_002denabled_002dtypes"></a>
<a class="index-entry-id" id="index-imagemagick_002dtypes_002dinhibit"></a>
<p>If Emacs was compiled with support for the ImageMagick library, it
can use ImageMagick to render a wide variety of images.  The variable
<code class="code">imagemagick-enabled-types</code> lists the image types that Emacs may
render using ImageMagick; each element in the list should be an
internal ImageMagick name for an image type, as a symbol or an
equivalent string (e.g., <code class="code">BMP</code> for <samp class="file">.bmp</samp> images).  To
enable ImageMagick for all possible image types, change
<code class="code">imagemagick-enabled-types</code> to <code class="code">t</code>.  The variable
<code class="code">imagemagick-types-inhibit</code> lists the image types which should
never be rendered using ImageMagick, regardless of the value of
<code class="code">imagemagick-enabled-types</code> (the default list includes types like
<code class="code">C</code> and <code class="code">HTML</code>, which ImageMagick can render as an image
but Emacs should not).  To disable ImageMagick entirely, change
<code class="code">imagemagick-types-inhibit</code> to <code class="code">t</code>.
</p>
<a class="index-entry-id" id="index-image_002duse_002dexternal_002dconverter"></a>
<p>If Emacs doesn&rsquo;t have native support for the image format in
question, and <code class="code">image-use-external-converter</code> is non-<code class="code">nil</code>,
Emacs will try to determine whether there are external utilities that
can be used to transform the image in question to <abbr class="acronym">PNG</abbr> before
displaying.  GraphicsMagick, ImageMagick and <code class="command">ffmpeg</code> are
currently supported for image conversions.
</p>
<a class="index-entry-id" id="index-image_002dconverter_002dadd_002dhandler"></a>
<p>In addition, you may wish to add special handlers for certain image
formats.  These can be added with the
<code class="code">image-converter-add-handler</code> function.  For instance, to allow
viewing Krita files as simple images, you could say something like:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(image-converter-add-handler
 &quot;kra&quot;
 (lambda (file data-p)
   (if data-p
       (error &quot;Can't decode non-files&quot;)
     (call-process &quot;unzip&quot; nil t nil
                   &quot;-qq&quot; &quot;-c&quot; &quot;-x&quot; file &quot;mergedimage.png&quot;))))
</pre></div>

<p>The function takes two parameters, where the first is a file name
suffix, and the second is a function to do the &ldquo;conversion&rdquo;.  This
function takes two parameters, where the first is the file name or a
string with the data, and the second says whether the first parameter
is data or not, and should output an image in
<code class="code">image-convert-to-format</code> format in the current buffer.
</p>
<a class="index-entry-id" id="index-thumbs_002dmode"></a>
<a class="index-entry-id" id="index-mode_002c-Thumbs"></a>
<p>The Image-Dired package can also be used to view images as
thumbnails.  See <a class="xref" href="Image_002dDired.html">Viewing Image Thumbnails in Dired</a>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Filesets.html">Filesets</a>, Previous: <a href="File-Conveniences.html">Convenience Features for Finding Files</a>, Up: <a href="Files.html">File Handling</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
