<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Fetching Package Sources (GNU Emacs Manual)</title>

<meta name="description" content="Fetching Package Sources (GNU Emacs Manual)">
<meta name="keywords" content="Fetching Package Sources (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Packages.html" rel="up" title="Packages">
<link href="Package-Files.html" rel="prev" title="Package Files">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Fetching-Package-Sources">
<div class="nav-panel">
<p>
Previous: <a href="Package-Files.html" accesskey="p" rel="prev">Package Files and Directory Layout</a>, Up: <a href="Packages.html" accesskey="u" rel="up">Emacs Lisp Packages</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Fetching-Package-Sources-1"><span>36.5 Fetching Package Sources<a class="copiable-link" href="#Fetching-Package-Sources-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-package-development-source"></a>
<a class="index-entry-id" id="index-upstream-source_002c-for-packages"></a>
<a class="index-entry-id" id="index-git-source-of-package"></a>

<p>By default <code class="code">package-install</code> downloads a Tarball from a package
archive and installs its files.  This might be inadequate if you wish
to hack on the package sources and share your changes with others.  In
that case, you may prefer to directly fetch and work on the upstream
source.  This often makes it easier to develop patches and report
bugs.
</p>
<a class="index-entry-id" id="index-package_002dvc_002dinstall"></a>
<a class="index-entry-id" id="index-package_002dvc_002dcheckout"></a>
<p>One way to do this is to use <code class="code">package-vc-install</code>, to fetch the
source code for a package directly from source.  The command will also
automatically ensure that all files are byte-compiled and auto-loaded,
just like with a regular package.  Packages installed this way behave
just like any other package.  You can upgrade them using
<code class="code">package-upgrade</code> or <code class="code">package-upgrade-all</code> and delete them
again using <code class="code">package-delete</code>.  They are even displayed in the
regular package listing.  If you just wish to clone the source of a
package, without adding it to the package list, use
<code class="code">package-vc-checkout</code>.
</p>
<a class="index-entry-id" id="index-package_002dreport_002dbug"></a>
<a class="index-entry-id" id="index-package_002dvc_002dprepare_002dpatch"></a>
<p>With the source checkout, you might want to reproduce a bug against
the current development head or implement a new feature to scratch an
itch.  If the package metadata indicates how to contact the
maintainer, you can use the command <code class="code">package-report-bug</code> to
report a bug via Email.  This report will include all the user options
that you have customized.  If you have made a change you wish to share
with the maintainers, first commit your changes then use the command
<code class="code">package-vc-prepare-patch</code> to share it.  See <a class="xref" href="Preparing-Patches.html">Preparing Patches</a>.
</p>
<a class="index-entry-id" id="index-package_002dvc_002dinstall_002dfrom_002dcheckout"></a>
<a class="index-entry-id" id="index-package_002dvc_002drebuild"></a>
<p>If you maintain your own packages you might want to use a local
checkout instead of cloning a remote repository.  You can do this by
using <code class="code">package-vc-install-from-checkout</code>, which creates a symbolic link
from the package directory (see <a class="pxref" href="Package-Files.html">Package Files and Directory Layout</a>) to your checkout
and initializes the code.  Note that you might have to use
<code class="code">package-vc-rebuild</code> to repeat the initialization and update the
autoloads.
</p>
<ul class="mini-toc">
<li><a href="#Specifying-Package-Sources" accesskey="1">Specifying Package Sources</a></li>
</ul>
<div class="subsection-level-extent" id="Specifying-Package-Sources">
<h4 class="subsection"><span>36.5.1 Specifying Package Sources<a class="copiable-link" href="#Specifying-Package-Sources"> &para;</a></span></h4>
<a class="index-entry-id" id="index-package-specification"></a>
<a class="index-entry-id" id="index-specification_002c-for-source-packages"></a>

<p>To install a package from source, Emacs must know where to get the
package&rsquo;s source code (such as a code repository) and basic
information about the structure of the code (such as the main file in
a multi-file package).  A <em class="dfn">package specification</em> describes these
properties.
</p>
<p>When supported by a package archive (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Package-Archives.html#Package-Archives">Package
Archives</a> in <cite class="cite">The Emacs Lisp Reference Manual</cite>), Emacs can
automatically download a package&rsquo;s specification from said archive.
If the first argument passed to <code class="code">package-vc-install</code> is a symbol
naming a package, then Emacs will use the specification provided by
the archive for that package.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">;; Emacs will download BBDB's specification from GNU ELPA:
(package-vc-install 'bbdb)
</pre></div></div>

<p>The first argument to <code class="code">package-vc-install</code> may also be a
package specification.  This allows you to install source packages
from locations other than the known archives listed in the user option
<code class="code">package-archives</code>.  A package specification is a list of the
form <code class="code">(<var class="var">name</var> . <var class="var">spec</var>)</code>, in which <var class="var">spec</var> should be a
property list using any of the keys in the table below.
</p>
<p>For definitions of basic terms for working with code repositories and
version control systems, see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/VCS-Concepts.html#VCS-Concepts">VCS Concepts</a> in <cite class="cite">The GNU Emacs
Manual</cite>.
</p>
<dl class="table">
<dt><code class="code">:url</code></dt>
<dd><p>A string providing the URL that specifies the repository from which to
fetch the package&rsquo;s source code.
</p>
</dd>
<dt><code class="code">:branch</code></dt>
<dd><p>A string providing the revision of the code to install.  Do not
confuse this with a package&rsquo;s version number.
</p>
</dd>
<dt><code class="code">:lisp-dir</code></dt>
<dd><p>A string providing the repository-relative name of the directory to
use for loading the Lisp sources, which defaults to the root directory
of the repository.
</p>
</dd>
<dt><code class="code">:main-file</code></dt>
<dd><p>A string providing the main file of the project, from which to gather
package metadata.  If not given, the default is the package name with
&quot;.el&quot; appended to it.
</p>
</dd>
<dt><code class="code">:doc</code></dt>
<dd><p>A string providing the repository-relative name of the documentation
file from which to build an Info file.  This can be a Texinfo file or
an Org file.
</p>
</dd>
<dt><code class="code">:vc-backend</code></dt>
<dd><p>A symbol naming the VC backend to use for downloading a copy of the
package&rsquo;s repository (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Version-Control-Systems.html#Version-Control-Systems">Version Control Systems</a> in <cite class="cite">The GNU
Emacs Manual</cite>).  If omitted, Emacs will attempt to make a guess based
on the provided URL, or, failing that, the process will fall back onto
the value of <code class="code">package-vc-default-backend</code>.
</p></dd>
</dl>

<div class="example">
<div class="group"><pre class="example-preformatted">;; Specifying information manually:
(package-vc-install
  '(bbdb :url &quot;https://git.savannah.nongnu.org/git/bbdb.git&quot;
         :lisp-dir &quot;lisp&quot;
         :doc &quot;doc/bbdb.texi&quot;))
</pre></div></div>
</div>
</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Package-Files.html">Package Files and Directory Layout</a>, Up: <a href="Packages.html">Emacs Lisp Packages</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
