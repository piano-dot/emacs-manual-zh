<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Keyboard Macro Query (GNU Emacs Manual)</title>

<meta name="description" content="Keyboard Macro Query (GNU Emacs Manual)">
<meta name="keywords" content="Keyboard Macro Query (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Keyboard-Macros.html" rel="up" title="Keyboard Macros">
<link href="Save-Keyboard-Macro.html" rel="next" title="Save Keyboard Macro">
<link href="Keyboard-Macro-Counter.html" rel="prev" title="Keyboard Macro Counter">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Keyboard-Macro-Query">
<div class="nav-panel">
<p>
Next: <a href="Save-Keyboard-Macro.html" accesskey="n" rel="next">Naming and Saving Keyboard Macros</a>, Previous: <a href="Keyboard-Macro-Counter.html" accesskey="p" rel="prev">The Keyboard Macro Counter</a>, Up: <a href="Keyboard-Macros.html" accesskey="u" rel="up">Keyboard Macros</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Executing-Macros-with-Variations"><span>18.4 Executing Macros with Variations<a class="copiable-link" href="#Executing-Macros-with-Variations"> &para;</a></span></h3>

<p>In a keyboard macro, you can create an effect similar to that of
<code class="code">query-replace</code>, in that the macro asks you each time around
whether to make a change.
</p>
<dl class="table">
<dt><kbd class="kbd">C-x q</kbd></dt>
<dd><p>When this point is reached during macro execution, ask for confirmation
(<code class="code">kbd-macro-query</code>).
</p></dd>
</dl>

<a class="index-entry-id" id="index-C_002dx-q"></a>
<a class="index-entry-id" id="index-kbd_002dmacro_002dquery"></a>
<p>While defining the macro, type <kbd class="kbd">C-x q</kbd> at the point where you
want the query to occur.  During macro definition, the <kbd class="kbd">C-x q</kbd>
does nothing, but when you run the macro later, <kbd class="kbd">C-x q</kbd> asks you
interactively whether to continue.
</p>
<p>The valid responses when <kbd class="kbd">C-x q</kbd> asks are:
</p>
<dl class="table">
<dt><kbd class="key">SPC</kbd> (or <kbd class="kbd">y</kbd>)</dt>
<dd><p>Continue executing the keyboard macro.
</p>
</dd>
<dt><kbd class="key">DEL</kbd> (or <kbd class="kbd">n</kbd>)</dt>
<dd><p>Skip the remainder of this repetition of the macro, and start right
away with the next repetition.
</p>
</dd>
<dt><kbd class="key">RET</kbd> (or <kbd class="kbd">q</kbd>)</dt>
<dd><p>Skip the remainder of this repetition and cancel further repetitions.
</p>
</dd>
<dt><kbd class="kbd">C-r</kbd></dt>
<dd><p>Enter a recursive editing level, in which you can perform editing
which is not part of the macro.  When you exit the recursive edit
using <kbd class="kbd">C-M-c</kbd>, you are asked again how to continue with the
keyboard macro.  If you type a <kbd class="key">SPC</kbd> at this time, the rest of the
macro definition is executed.  It is up to you to leave point and the
text in a state such that the rest of the macro will do what you want.
</p></dd>
</dl>

<p><kbd class="kbd">C-u C-x q</kbd>, which is <kbd class="kbd">C-x q</kbd> with a prefix argument,
performs a completely different function.  It enters a recursive edit
reading input from the keyboard, both when you type it during the
definition of the macro, and when it is executed from the macro.  During
definition, the editing you do inside the recursive edit does not become
part of the macro.  During macro execution, the recursive edit gives you
a chance to do some particularized editing on each repetition.
See <a class="xref" href="Recursive-Edit.html">Recursive Editing Levels</a>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Save-Keyboard-Macro.html">Naming and Saving Keyboard Macros</a>, Previous: <a href="Keyboard-Macro-Counter.html">The Keyboard Macro Counter</a>, Up: <a href="Keyboard-Macros.html">Keyboard Macros</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
