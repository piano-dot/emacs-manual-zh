<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Init Examples (GNU Emacs Manual)</title>

<meta name="description" content="Init Examples (GNU Emacs Manual)">
<meta name="keywords" content="Init Examples (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Init-File.html" rel="up" title="Init File">
<link href="Terminal-Init.html" rel="next" title="Terminal Init">
<link href="Init-Syntax.html" rel="prev" title="Init Syntax">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="Init-Examples">
<div class="nav-panel">
<p>
Next: <a href="Terminal-Init.html" accesskey="n" rel="next">Terminal-specific Initialization</a>, Previous: <a href="Init-Syntax.html" accesskey="p" rel="prev">Init File Syntax</a>, Up: <a href="Init-File.html" accesskey="u" rel="up">The Emacs Initialization File</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Init-File-Examples"><span>37.4.2 Init File Examples<a class="copiable-link" href="#Init-File-Examples"> &para;</a></span></h4>

<p>Here are some examples of doing certain commonly desired things with
Lisp expressions:
</p>
<ul class="itemize mark-bullet">
<li>Add a directory to the variable <code class="code">load-path</code>.  You can then put
Lisp libraries that are not included with Emacs in this directory, and
load them with <kbd class="kbd">M-x load-library</kbd>.  See <a class="xref" href="Lisp-Libraries.html">Libraries of Lisp Code for Emacs</a>.

<div class="example">
<pre class="example-preformatted">(add-to-list 'load-path &quot;/path/to/lisp/libraries&quot;)
</pre></div>

</li><li>Make <kbd class="key">TAB</kbd> in C mode just insert a tab if point is in the middle of a
line.

<div class="example">
<pre class="example-preformatted">(setq c-tab-always-indent nil)
</pre></div>

<p>Here we have a variable whose value is normally <code class="code">t</code> for &ldquo;true&rdquo;
and the alternative is <code class="code">nil</code> for &ldquo;false&rdquo;.
</p>
</li><li>Make searches case sensitive by default (in all buffers that do not
override this).

<div class="example">
<pre class="example-preformatted">(setq-default case-fold-search nil)
</pre></div>

<p>This sets the default value, which is effective in all buffers that do
not have local values for the variable (see <a class="pxref" href="Locals.html">Local Variables</a>).  Setting
<code class="code">case-fold-search</code> with <code class="code">setq</code> affects only the current
buffer&rsquo;s local value, which is probably not what you want to do in an
init file.
</p>
</li><li><a class="index-entry-id" id="index-user_002dmail_002daddress_002c-in-init-file"></a>
Specify your own email address, if Emacs can&rsquo;t figure it out correctly.

<div class="example">
<pre class="example-preformatted">(setq user-mail-address &quot;cheney@torture.gov&quot;)
</pre></div>

<p>Various Emacs packages, such as Message mode, consult
<code class="code">user-mail-address</code> when they need to know your email address.
See <a class="xref" href="Mail-Headers.html">Mail Header Fields</a>.
</p>
</li><li>Make Text mode the default mode for new buffers.

<div class="example">
<pre class="example-preformatted">(setq-default major-mode 'text-mode)
</pre></div>

<p>Note that <code class="code">text-mode</code> is used because it is the command for
entering Text mode.  The single-quote before it makes the symbol a
constant; otherwise, <code class="code">text-mode</code> would be treated as a variable
name.
</p>
</li><li>Set up defaults for the Latin-1 character set,
which supports most of the languages of Western Europe.

<div class="example">
<pre class="example-preformatted">(set-language-environment &quot;Latin-1&quot;)
</pre></div>

</li><li>Turn off Line Number mode, a global minor mode.

<div class="example">
<pre class="example-preformatted">(line-number-mode 0)
</pre></div>

</li><li>Turn on Auto Fill mode automatically in Text mode and related modes
(see <a class="pxref" href="Hooks.html">Hooks</a>).

<div class="example">
<pre class="example-preformatted">(add-hook 'text-mode-hook 'auto-fill-mode)
</pre></div>

</li><li>Change the coding system used when using the clipboard
(see <a class="pxref" href="Communication-Coding.html">Coding Systems for Interprocess Communication</a>).

<div class="example">
<pre class="example-preformatted">(setopt selection-coding-system 'utf-8)
</pre></div>

</li><li>Load the installed Lisp library named <samp class="file">foo</samp> (actually a file
<samp class="file">foo.elc</samp> or <samp class="file">foo.el</samp> in a standard Emacs directory).

<div class="example">
<pre class="example-preformatted">(load &quot;foo&quot;)
</pre></div>

<p>When the argument to <code class="code">load</code> is a relative file name, not starting
with &lsquo;<samp class="samp">/</samp>&rsquo; or &lsquo;<samp class="samp">~</samp>&rsquo;, <code class="code">load</code> searches the directories in
<code class="code">load-path</code> (see <a class="pxref" href="Lisp-Libraries.html">Libraries of Lisp Code for Emacs</a>).
</p>
</li><li>Load the compiled Lisp file <samp class="file">foo.elc</samp> from your home directory.

<div class="example">
<pre class="example-preformatted">(load &quot;~/foo.elc&quot;)
</pre></div>

<p>Here a full file name is used, so no searching is done.
</p>
</li><li><a class="index-entry-id" id="index-loading-Lisp-libraries-automatically"></a>
<a class="index-entry-id" id="index-autoload-Lisp-libraries"></a>
Tell Emacs to find the definition for the function <code class="code">myfunction</code>
by loading a Lisp library named <samp class="file">mypackage</samp> (i.e., a file
<samp class="file">mypackage.elc</samp> or <samp class="file">mypackage.el</samp>):

<div class="example">
<pre class="example-preformatted">(autoload 'myfunction &quot;mypackage&quot; &quot;Do what I say.&quot; t)
</pre></div>

<p>Here the string <code class="code">&quot;Do what I say.&quot;</code> is the function&rsquo;s
documentation string.  You specify it in the <code class="code">autoload</code>
definition so it will be available for help commands even when the
package is not loaded.  The last argument, <code class="code">t</code>, indicates that
this function is interactive; that is, it can be invoked interactively
by typing <kbd class="kbd">M-x myfunction <kbd class="key">RET</kbd></kbd> or by binding it to a key.
If the function is not interactive, omit the <code class="code">t</code> or use
<code class="code">nil</code>.
</p>
</li><li>Rebind the key <kbd class="kbd">C-x l</kbd> to run the function <code class="code">make-symbolic-link</code>
(see <a class="pxref" href="Init-Rebinding.html">Rebinding Keys in Your Init File</a>).

<div class="example">
<pre class="example-preformatted">(keymap-global-set &quot;C-x l&quot; 'make-symbolic-link)
</pre></div>

<p>or
</p>
<div class="example">
<pre class="example-preformatted">(keymap-set global-map &quot;C-x l&quot; 'make-symbolic-link)
</pre></div>

<p>Note once again the single-quote used to refer to the symbol
<code class="code">make-symbolic-link</code> instead of its value as a variable.
</p>
</li><li>Do the same thing for Lisp mode only.

<div class="example">
<pre class="example-preformatted">(keymap-set lisp-mode-map &quot;C-x l&quot; 'make-symbolic-link)
</pre></div>

</li><li>Redefine all keys which now run <code class="code">next-line</code> in Fundamental mode
so that they run <code class="code">forward-line</code> instead.

<a class="index-entry-id" id="index-keymap_002dsubstitute"></a>
<div class="example">
<pre class="example-preformatted">(keymap-substitute global-map 'next-line 'forward-line)
</pre></div>

</li><li>Make <kbd class="kbd">C-x C-v</kbd> undefined.

<div class="example">
<pre class="example-preformatted">(keymap-global-unset &quot;C-x C-v&quot;)
</pre></div>

<p>One reason to undefine a key is so that you can make it a prefix.
Simply defining <kbd class="kbd">C-x C-v <var class="var">anything</var></kbd> will make <kbd class="kbd">C-x C-v</kbd> a
prefix, but <kbd class="kbd">C-x C-v</kbd> must first be freed of its usual non-prefix
definition.
</p>
</li><li>Make &lsquo;<samp class="samp">$</samp>&rsquo; have the syntax of punctuation in Text mode.
Note the use of a character constant for &lsquo;<samp class="samp">$</samp>&rsquo;.

<div class="example">
<pre class="example-preformatted">(modify-syntax-entry ?\$ &quot;.&quot; text-mode-syntax-table)
</pre></div>

</li><li>Enable the use of the command <code class="code">narrow-to-region</code> without confirmation.

<div class="example">
<pre class="example-preformatted">(put 'narrow-to-region 'disabled nil)
</pre></div>

</li><li>Adjusting the configuration to various platforms and Emacs versions.

<p>Users typically want Emacs to behave the same on all systems, so the
same init file is right for all platforms.  However, sometimes it
happens that a function you use for customizing Emacs is not available
on some platforms or in older Emacs versions.  To deal with that
situation, put the customization inside a conditional that tests whether
the function or facility is available, like this:
</p>
<div class="example">
<pre class="example-preformatted">(if (fboundp 'blink-cursor-mode)
    (blink-cursor-mode 0))

(if (boundp 'coding-category-utf-8)
    (set-coding-priority '(coding-category-utf-8)))
</pre></div>

<p>You can also simply disregard the errors that occur if the
function is not defined.
</p>
<div class="example">
<pre class="example-preformatted">(ignore-errors (set-face-background 'region &quot;grey75&quot;))
</pre></div>

<p>A <code class="code">setq</code> on a variable which does not exist is generally
harmless, so those do not need a conditional.
</p>
</li><li>Using <code class="code">use-package</code> to automatically load and configure a
package.

<div class="example">
<pre class="example-preformatted">(use-package hi-lock
  :defer t
  :init (add-hook 'some-hook 'hi-lock-mode)
  :config (use-package my-hi-lock)
  :bind ((&quot;M-o l&quot; . highlight-lines-matching-regexp)
         (&quot;M-o r&quot; . highlight-regexp)
         (&quot;M-o w&quot; . highlight-phrase)))
</pre></div>

<p>This will load <code class="code">hi-lock</code> when some of its commands or variables
are first used, bind 3 keys to its commands, and additionally load the
<code class="code">my-hi-lock</code> package (presumably further customizing
<code class="code">hi-lock</code>) after loading <code class="code">hi-lock</code>.  The <code class="code">use-package</code>
facility is fully documented in its own manual, see <cite class="cite"><a data-manual="use-package" href="../use-package_html/index.html#Top">use-package User manual</a></cite>.
</p></li></ul>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Terminal-Init.html">Terminal-specific Initialization</a>, Previous: <a href="Init-Syntax.html">Init File Syntax</a>, Up: <a href="Init-File.html">The Emacs Initialization File</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
