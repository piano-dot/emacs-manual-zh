<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Holiday Customizing (GNU Emacs Manual)</title>

<meta name="description" content="Holiday Customizing (GNU Emacs Manual)">
<meta name="keywords" content="Holiday Customizing (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Advanced-Calendar_002fDiary-Usage.html" rel="up" title="Advanced Calendar/Diary Usage">
<link href="Mayan-Calendar.html" rel="next" title="Mayan Calendar">
<link href="Calendar-Customizing.html" rel="prev" title="Calendar Customizing">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsection-level-extent" id="Holiday-Customizing">
<div class="nav-panel">
<p>
Next: <a href="Mayan-Calendar.html" accesskey="n" rel="next">Converting from the Mayan Calendar</a>, Previous: <a href="Calendar-Customizing.html" accesskey="p" rel="prev">Customizing the Calendar</a>, Up: <a href="Advanced-Calendar_002fDiary-Usage.html" accesskey="u" rel="up">More advanced features of the Calendar and Diary</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Customizing-the-Holidays"><span>32.13.2 Customizing the Holidays<a class="copiable-link" href="#Customizing-the-Holidays"> &para;</a></span></h4>

<a class="index-entry-id" id="index-calendar_002dholidays"></a>
<a class="index-entry-id" id="index-holiday_002doriental_002dholidays"></a>
<a class="index-entry-id" id="index-holiday_002dsolar_002dholidays"></a>
<p>There are several variables listing the default holidays that Emacs
knows about.  These are: <code class="code">holiday-general-holidays</code>,
<code class="code">holiday-local-holidays</code>, <code class="code">holiday-solar-holidays</code>,
<code class="code">holiday-bahai-holidays</code>, <code class="code">holiday-christian-holidays</code>,
<code class="code">holiday-hebrew-holidays</code>, <code class="code">holiday-islamic-holidays</code>,
<code class="code">holiday-oriental-holidays</code>, and <code class="code">holiday-other-holidays</code>.
The names should be self-explanatory; e.g., <code class="code">holiday-solar-holidays</code>
lists sun- and moon-related holidays.
</p>
<p>You can customize these lists of holidays to your own needs, deleting or
adding holidays as described below.  Set any of them to <code class="code">nil</code> to
not show the associated holidays.
</p>
<a class="index-entry-id" id="index-holiday_002dgeneral_002dholidays"></a>
<a class="index-entry-id" id="index-holiday_002dlocal_002dholidays"></a>
<a class="index-entry-id" id="index-holiday_002dother_002dholidays"></a>
<p>The general holidays are, by default, holidays common throughout the
United States.  In contrast, <code class="code">holiday-local-holidays</code> and
<code class="code">holiday-other-holidays</code> are both empty by default.  These are
intended for system-wide settings and your individual use,
respectively.
</p>
<a class="index-entry-id" id="index-holiday_002dbahai_002dholidays"></a>
<a class="index-entry-id" id="index-holiday_002dchristian_002dholidays"></a>
<a class="index-entry-id" id="index-holiday_002dhebrew_002dholidays"></a>
<a class="index-entry-id" id="index-holiday_002dislamic_002dholidays"></a>
<a class="index-entry-id" id="index-calendar_002dbahai_002dall_002dholidays_002dflag"></a>
<a class="index-entry-id" id="index-calendar_002dchristian_002dall_002dholidays_002dflag"></a>
<a class="index-entry-id" id="index-calendar_002dhebrew_002dall_002dholidays_002dflag"></a>
<a class="index-entry-id" id="index-calendar_002dislamic_002dall_002dholidays_002dflag"></a>
<p>By default, Emacs does not include all the holidays of the religions
that it knows, only those commonly found in secular calendars.  For a
more extensive collection of religious holidays, you can set any (or
all) of the variables <code class="code">calendar-bahai-all-holidays-flag</code>,
<code class="code">calendar-christian-all-holidays-flag</code>,
<code class="code">calendar-hebrew-all-holidays-flag</code>, or
<code class="code">calendar-islamic-all-holidays-flag</code> to <code class="code">t</code>.
</p>
<a class="index-entry-id" id="index-holiday-forms"></a>
<p>Each of the holiday variables is a list of <em class="dfn">holiday forms</em>, each
form describing a holiday (or sometimes a list of holidays).  Here is
a table of the possible kinds of holiday form.  Day numbers and month
numbers count starting from 1, but <em class="dfn">dayname</em> numbers count Sunday as
0.  The argument <var class="var">string</var> is always the description of the
holiday, as a string.
</p>
<dl class="table">
<dt><code class="code">(holiday-fixed <var class="var">month</var> <var class="var">day</var> <var class="var">string</var>)</code></dt>
<dd><p>A fixed date on the Gregorian calendar.
</p>
</dd>
<dt><code class="code">(holiday-float <var class="var">month</var> <var class="var">dayname</var> <var class="var">k</var> <var class="var">string</var></code></dt>
<dd><p>&amp;optional <var class="var">day</var>)
The <var class="var">k</var>th <var class="var">dayname</var> (<var class="var">dayname</var>=0 for Sunday, and so on)
after or before Gregorian date <var class="var">month</var>, <var class="var">day</var>.  Negative <var class="var">k</var>
means count back from the end of the month.  Optional <var class="var">day</var> defaults
to 1 if <var class="var">k</var> is positive, and the last day of <var class="var">month</var> otherwise.
</p>
</dd>
<dt><code class="code">(holiday-chinese <var class="var">month</var> <var class="var">day</var> <var class="var">string</var>)</code></dt>
<dd><p>A fixed date on the Chinese calendar.
</p>
</dd>
<dt><code class="code">(holiday-hebrew <var class="var">month</var> <var class="var">day</var> <var class="var">string</var>)</code></dt>
<dd><p>A fixed date on the Hebrew calendar.
</p>
</dd>
<dt><code class="code">(holiday-islamic <var class="var">month</var> <var class="var">day</var> <var class="var">string</var>)</code></dt>
<dd><p>A fixed date on the Islamic calendar.
</p>
</dd>
<dt><code class="code">(holiday-julian <var class="var">month</var> <var class="var">day</var> <var class="var">string</var>)</code></dt>
<dd><p>A fixed date on the Julian calendar.
</p>
</dd>
<dt><code class="code">(holiday-sexp <var class="var">sexp</var> <var class="var">string</var>)</code></dt>
<dd><p>A date calculated by the Lisp expression <var class="var">sexp</var>.  The expression
should use the variable <code class="code">year</code> to compute and return the date of a
holiday in the form of a list <code class="code">(<var class="var">month</var> <var class="var">day</var> <var class="var">year</var>)</code>,
or <code class="code">nil</code> if the holiday doesn&rsquo;t happen this year.
</p>
</dd>
<dt><code class="code">(if <var class="var">condition</var> <var class="var">holiday-form</var>)</code></dt>
<dd><p>A holiday that happens only if <var class="var">condition</var> is true.
</p>
</dd>
<dt><code class="code">(<var class="var">function</var> <span class="r">[</span><var class="var">args</var><span class="r">]</span>)</code></dt>
<dd><p>A list of dates calculated by the function <var class="var">function</var>, called with
arguments <var class="var">args</var>.
</p></dd>
</dl>

<p>For example, suppose you want to add Bastille Day, celebrated in
France on July 14 (i.e., the fourteenth day of the seventh month).  You
can do this as follows:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(setq holiday-other-holidays '((holiday-fixed 7 14 &quot;Bastille Day&quot;)))
</pre></div>

<p>Many holidays occur on a specific day of the week, at a specific time
of month.  Here is a holiday form describing Hurricane Supplication Day,
celebrated in the Virgin Islands on the fourth Monday in July:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(holiday-float 7 1 4 &quot;Hurricane Supplication Day&quot;)
</pre></div>

<p>Here the 7 specifies July, the 1 specifies Monday (Sunday is 0,
Tuesday is 2, and so on), and the 4 specifies the fourth occurrence in
the month (1 specifies the first occurrence, 2 the second occurrence,
&minus;1 the last occurrence, &minus;2 the second-to-last occurrence, and
so on).
</p>
<p>You can specify holidays that occur on fixed days of the Bahá&rsquo;í,
Chinese, Hebrew, Islamic, and Julian calendars too.  For example,
</p>
<div class="example smallexample">
<pre class="example-preformatted">(setq holiday-other-holidays
      '((holiday-hebrew 10 2 &quot;Last day of Hanukkah&quot;)
        (holiday-islamic 3 12 &quot;Mohammed's Birthday&quot;)
        (holiday-julian 4 2 &quot;Jefferson's Birthday&quot;)))
</pre></div>

<p>adds the last day of Hanukkah (since the Hebrew months are numbered with
1 starting from Nisan), the Islamic feast celebrating Mohammed&rsquo;s
birthday (since the Islamic months are numbered from 1 starting with
Muharram), and Thomas Jefferson&rsquo;s birthday, which is 2 April 1743 on the
Julian calendar.
</p>
<p>To include a holiday conditionally, use either Emacs Lisp&rsquo;s <code class="code">if</code>
or the <code class="code">holiday-sexp</code> form.  For example, American presidential
elections occur on the first Tuesday after the first Monday in November
of years divisible by 4:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(holiday-sexp '(if (zerop (% year 4))
                   (calendar-gregorian-from-absolute
                    (1+ (calendar-dayname-on-or-before
                          1 (+ 6 (calendar-absolute-from-gregorian
                                  (list 11 1 year)))))))
              &quot;US Presidential Election&quot;)
</pre></div>

<p>or
</p>
<div class="example smallexample">
<pre class="example-preformatted">(if (zerop (% displayed-year 4))
    (holiday-fixed 11
           (calendar-extract-day
             (calendar-gregorian-from-absolute
               (1+ (calendar-dayname-on-or-before
                     1 (+ 6 (calendar-absolute-from-gregorian
                              (list 11 1 displayed-year)))))))
           &quot;US Presidential Election&quot;))
</pre></div>

<p>Some holidays just don&rsquo;t fit into any of these forms because special
calculations are involved in their determination.  In such cases you
must write a Lisp function to do the calculation.  To include eclipses,
for example, add <code class="code">(eclipses)</code> to <code class="code">holiday-other-holidays</code>
and write an Emacs Lisp function <code class="code">eclipses</code> that returns a
(possibly empty) list of the relevant Gregorian dates among the range
visible in the calendar window, with descriptive strings, like this:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(((6 4 2012) &quot;Lunar Eclipse&quot;) ((11 13 2012) &quot;Solar Eclipse&quot;) ... )
</pre></div>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Mayan-Calendar.html">Converting from the Mayan Calendar</a>, Previous: <a href="Calendar-Customizing.html">Customizing the Calendar</a>, Up: <a href="Advanced-Calendar_002fDiary-Usage.html">More advanced features of the Calendar and Diary</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
