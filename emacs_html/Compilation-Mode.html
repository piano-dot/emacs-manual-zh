<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Compilation Mode (GNU Emacs Manual)</title>

<meta name="description" content="Compilation Mode (GNU Emacs Manual)">
<meta name="keywords" content="Compilation Mode (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Building.html" rel="up" title="Building">
<link href="Compilation-Shell.html" rel="next" title="Compilation Shell">
<link href="Compilation.html" rel="prev" title="Compilation">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Compilation-Mode">
<div class="nav-panel">
<p>
Next: <a href="Compilation-Shell.html" accesskey="n" rel="next">Subshells for Compilation</a>, Previous: <a href="Compilation.html" accesskey="p" rel="prev">Running Compilations under Emacs</a>, Up: <a href="Building.html" accesskey="u" rel="up">Compiling and Testing Programs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Compilation-Mode-1"><span>28.2 Compilation Mode<a class="copiable-link" href="#Compilation-Mode-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-Compilation-mode"></a>
<a class="index-entry-id" id="index-mode_002c-Compilation"></a>
<a class="index-entry-id" id="index-locus"></a>
<p>The <samp class="file">*compilation*</samp> buffer uses a major mode called Compilation
mode.  Compilation mode turns each error message in the buffer into a
hyperlink; you can move point to it and type <kbd class="key">RET</kbd>, or click on it
with the mouse (see <a class="pxref" href="Mouse-References.html">Following References with the Mouse</a>), to visit the <em class="dfn">locus</em> of
the error message in a separate window.  The locus is the specific
position in a file where that error occurred.
</p>
<a class="index-entry-id" id="index-compilation-mode-faces"></a>
<a class="index-entry-id" id="index-compilation_002derror"></a>
<a class="index-entry-id" id="index-compilation_002dwarning"></a>
<p>The appearance of the <samp class="file">*compilation*</samp> buffer can be controlled
by customizing the faces which are used to highlight parts of the
<samp class="file">*compilation*</samp> buffer, e.g., <code class="code">compilation-error</code> or
<code class="code">compilation-warning</code>, for error and warning messages
respectively.  Note that since those faces inherit from the
<code class="code">error</code> and <code class="code">warning</code> faces, it is also possible to
customize the parent face directly instead.
</p>
<p>Use <kbd class="kbd">M-x&nbsp;customize-group&nbsp;RET&nbsp;compilation</kbd><!-- /@w --> to see the entire
list of customization variables and faces.
</p>
<a class="index-entry-id" id="index-compile_002dgoto_002derror"></a>
<a class="index-entry-id" id="index-compilation_002dauto_002djump_002dto_002dfirst_002derror"></a>
<p>If you change the variable
<code class="code">compilation-auto-jump-to-first-error</code> to a non-<code class="code">nil</code> value,
Emacs automatically visits the locus of the first error message that
appears in the <samp class="file">*compilation*</samp> buffer.  (This variable can also
have the values <code class="code">if-location-known</code> and <code class="code">first-known</code>, which
modify the conditions for automatically visiting the error locus.)
</p>
<p>Compilation mode provides the following additional commands.  These
commands can also be used in <samp class="file">*grep*</samp> buffers, where the
hyperlinks are search matches rather than error messages (see <a class="pxref" href="Grep-Searching.html">Searching with Grep under Emacs</a>).
</p>
<dl class="table">
<dt><kbd class="kbd">M-g M-n</kbd></dt>
<dt><kbd class="kbd">M-g n</kbd></dt>
<dt><kbd class="kbd">C-x `</kbd></dt>
<dd><p>Visit the locus of the next error message or match (<code class="code">next-error</code>).
</p></dd>
<dt><kbd class="kbd">M-g M-p</kbd></dt>
<dt><kbd class="kbd">M-g p</kbd></dt>
<dd><p>Visit the locus of the previous error message or match
(<code class="code">previous-error</code>).
</p></dd>
<dt><kbd class="kbd">M-n</kbd></dt>
<dd><p>Move point to the next error message or match, without visiting its
locus (<code class="code">compilation-next-error</code>).
</p></dd>
<dt><kbd class="kbd">M-p</kbd></dt>
<dd><p>Move point to the previous error message or match, without visiting
its locus (<code class="code">compilation-previous-error</code>).
</p></dd>
<dt><kbd class="kbd">M-}</kbd></dt>
<dd><p>Move point to the next error message or match occurring in a different
file (<code class="code">compilation-next-file</code>).
</p></dd>
<dt><kbd class="kbd">M-{</kbd></dt>
<dd><p>Move point to the previous error message or match occurring in a
different file (<code class="code">compilation-previous-file</code>).
</p></dd>
<dt><kbd class="kbd">C-c C-f</kbd></dt>
<dd><p>Toggle Next Error Follow minor mode, which makes cursor motion in the
compilation buffer produce automatic source display.
</p></dd>
<dt><kbd class="kbd">g</kbd></dt>
<dd><p>Re-run the last command whose output is shown in the
<samp class="file">*compilation*</samp> buffer.
</p></dd>
<dt><kbd class="kbd">M-x next-error-select-buffer</kbd></dt>
<dd><p>Select a buffer to be used by next invocation of <code class="code">next-error</code> and
<code class="code">previous-error</code>.
</p></dd>
</dl>

<a class="index-entry-id" id="index-M_002dg-M_002dn"></a>
<a class="index-entry-id" id="index-M_002dg-n"></a>
<a class="index-entry-id" id="index-C_002dx-_0060"></a>
<a class="index-entry-id" id="index-next_002derror"></a>
<a class="index-entry-id" id="index-next_002derror_002dmessage_002dhighlight"></a>
<a class="index-entry-id" id="index-next_002derror_002dhighlight"></a>
<a class="index-entry-id" id="index-next_002derror_002dhighlight_002dno_002dselect"></a>
<p>To visit errors sequentially, type <kbd class="kbd">C-x&nbsp;`</kbd><!-- /@w -->
(<code class="code">next-error</code>), or equivalently <kbd class="kbd">M-g M-n</kbd> or <kbd class="kbd">M-g n</kbd>.
This command can be invoked from any buffer, not just a Compilation
mode buffer.  The first time you invoke it after a compilation, it
visits the locus of the first error message.  Each subsequent
<kbd class="kbd">M-g&nbsp;M-n</kbd><!-- /@w --> visits the next error, in a similar fashion.  If you
visit a specific error with <kbd class="key">RET</kbd> or a mouse click in the
<samp class="file">*compilation*</samp> buffer, subsequent <kbd class="kbd">M-g&nbsp;M-n</kbd><!-- /@w --> commands
advance from there.  When <kbd class="kbd">M-g&nbsp;M-n</kbd><!-- /@w --> finds no more error messages
to visit, it signals an error.  <kbd class="kbd">C-u&nbsp;M-g&nbsp;M-n</kbd><!-- /@w --> starts again from
the beginning of the compilation buffer, and visits the first locus.
</p>
<p><kbd class="kbd">M-g M-p</kbd> or <kbd class="kbd">M-g p</kbd> (<code class="code">previous-error</code>) iterates
through errors in the opposite direction.
</p>
<a class="index-entry-id" id="index-next_002derror_002dfind_002dbuffer_002dfunction"></a>
<a class="index-entry-id" id="index-next_002derror_002dselect_002dbuffer"></a>
<p>The <code class="code">next-error</code> and <code class="code">previous-error</code> commands don&rsquo;t just
act on the errors or matches listed in <samp class="file">*compilation*</samp> and
<samp class="file">*grep*</samp> buffers; they also know how to iterate through error or
match lists produced by other commands, such as <kbd class="kbd">M-x occur</kbd>
(see <a class="pxref" href="Other-Repeating-Search.html">Other Search-and-Loop Commands</a>).  If the current buffer contains
error messages or matches, these commands will iterate through them;
otherwise, Emacs looks for a buffer containing error messages or
matches amongst the windows of the selected frame (if the variable
<code class="code">next-error-find-buffer-function</code> is customized to the value
<code class="code">next-error-buffer-on-selected-frame</code>), then for a buffer used
previously by <code class="code">next-error</code> or <code class="code">previous-error</code>, and finally
all other buffers.  Any buffer these commands iterate through that is
not currently displayed in a window will be displayed.  You can use
the <code class="command">next-error-select-buffer</code> command to switch to
a different buffer to be used by the subsequent invocation of
<code class="code">next-error</code>.
</p>
<a class="index-entry-id" id="index-compilation_002dskip_002dthreshold"></a>
<p>By default, the <code class="code">next-error</code> and <code class="code">previous-error</code> commands
skip less important messages.  The variable
<code class="code">compilation-skip-threshold</code> controls this.  The default value,
1, means to skip anything less important than a warning.  A value of 2
means to skip anything less important than an error, while 0 means not
to skip any messages.
</p>
<p>When Emacs visits the locus of an error message, it momentarily
highlights the relevant source line.  The duration of this highlight
is determined by the variable <code class="code">next-error-highlight</code> for the locus
in the selected buffer, and <code class="code">next-error-highlight-no-select</code> for
the locus in non-selected buffers.  Also you can customize the variable
<code class="code">next-error-message-highlight</code> that defines how to highlight the
current error message in the buffer that contains messages.
</p>
<a class="index-entry-id" id="index-compilation_002dcontext_002dlines"></a>
<p>If the <samp class="file">*compilation*</samp> buffer is shown in a window with a left
fringe (see <a class="pxref" href="Fringes.html">Window Fringes</a>), the locus-visiting commands put an arrow in
the fringe, pointing to the current error message.  If the window has
no left fringe, such as on a text terminal, these commands scroll the
window so that the current message is at the top of the window.  If
you change the variable <code class="code">compilation-context-lines</code> to <code class="code">t</code>,
a visible arrow is inserted before column zero instead.  If you change
the variable to an integer value <var class="var">n</var>, these commands scroll the
window so that the current error message is <var class="var">n</var> lines from the
top, whether or not there is a fringe; the default value, <code class="code">nil</code>,
gives the behavior described above.
</p>
<a class="index-entry-id" id="index-compilation_002dhidden_002doutput"></a>
<p>Compilation output can sometimes be very verbose, and much of it isn&rsquo;t
of particular interest to a user.  The
<code class="code">compilation-hidden-output</code> user option should either be a regexp
or a list of regexps, and output that matches will be made invisible.
For instance, to hide the verbose output from recursive makefiles, you
can say something like:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(setq compilation-hidden-output
      '(&quot;^make[^\n]+\n&quot;))
</pre></div>

<a class="index-entry-id" id="index-compilation_002derror_002dregexp_002dalist"></a>
<a class="index-entry-id" id="index-grep_002dregexp_002dalist"></a>
<p>To parse messages from the compiler, Compilation mode uses the
variable <code class="code">compilation-error-regexp-alist</code> which lists various
error message formats and tells Emacs how to extract the locus from
each.  A similar variable, <code class="code">grep-regexp-alist</code>, tells Emacs how
to parse output from a <code class="code">grep</code> command (see <a class="pxref" href="Grep-Searching.html">Searching with Grep under Emacs</a>).
</p>
<a class="index-entry-id" id="index-compilation_002dnext_002derror"></a>
<a class="index-entry-id" id="index-compilation_002dprevious_002derror"></a>
<a class="index-entry-id" id="index-compilation_002dnext_002dfile"></a>
<a class="index-entry-id" id="index-compilation_002dprevious_002dfile"></a>
<p>Compilation mode also defines the keys <kbd class="key">SPC</kbd> and <kbd class="key">DEL</kbd> to
scroll by screenfuls; <kbd class="kbd">M-n</kbd> (<code class="code">compilation-next-error</code>) and
<kbd class="kbd">M-p</kbd> (<code class="code">compilation-previous-error</code>) to move to the next or
previous error message; and <kbd class="kbd">M-{</kbd> (<code class="code">compilation-next-file</code>)
and <kbd class="kbd">M-}</kbd> (<code class="code">compilation-previous-file</code>) to move to the next
or previous error message for a different source file.
</p>
<a class="index-entry-id" id="index-Next-Error-Follow-mode"></a>
<a class="index-entry-id" id="index-next_002derror_002dfollow_002dminor_002dmode"></a>
<p>You can type <kbd class="kbd">C-c C-f</kbd> to toggle Next Error Follow mode.  In
this minor mode, ordinary cursor motion in the compilation buffer
automatically updates the source buffer, i.e., moving the cursor over
an error message causes the locus of that error to be displayed.
</p>
<p>The features of Compilation mode are also available in a minor mode
called Compilation Minor mode.  This lets you parse error messages in
any buffer, not just a normal compilation output buffer.  Type
<kbd class="kbd">M-x compilation-minor-mode</kbd> to enable the minor mode.  For
instance, in an Rlogin buffer (see <a class="pxref" href="Remote-Host.html">Remote Host Shell</a>), Compilation minor
mode automatically accesses remote source files by FTP (see <a class="pxref" href="File-Names.html">File Names</a>).
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Compilation-Shell.html">Subshells for Compilation</a>, Previous: <a href="Compilation.html">Running Compilations under Emacs</a>, Up: <a href="Building.html">Compiling and Testing Programs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
