<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Marks vs Flags (GNU Emacs Manual)</title>

<meta name="description" content="Marks vs Flags (GNU Emacs Manual)">
<meta name="keywords" content="Marks vs Flags (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Dired.html" rel="up" title="Dired">
<link href="Operating-on-Files.html" rel="next" title="Operating on Files">
<link href="Dired-Visiting.html" rel="prev" title="Dired Visiting">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="section-level-extent" id="Marks-vs-Flags">
<div class="nav-panel">
<p>
Next: <a href="Operating-on-Files.html" accesskey="n" rel="next">Operating on Files</a>, Previous: <a href="Dired-Visiting.html" accesskey="p" rel="prev">Visiting Files in Dired</a>, Up: <a href="Dired.html" accesskey="u" rel="up">Dired, the Directory Editor</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Dired-Marks-vs_002e-Flags"><span>31.6 Dired Marks vs. Flags<a class="copiable-link" href="#Dired-Marks-vs_002e-Flags"> &para;</a></span></h3>

<a class="index-entry-id" id="index-marking-many-files-_0028in-Dired_0029"></a>
<p>Instead of flagging a file with &lsquo;<samp class="samp">D</samp>&rsquo;, you can <em class="dfn">mark</em> the
file with some other character (usually &lsquo;<samp class="samp">*</samp>&rsquo;).  Most Dired
commands to operate on files use the files marked with &lsquo;<samp class="samp">*</samp>&rsquo;.  The
only command that operates on flagged files is <kbd class="kbd">x</kbd>, which deletes
them.
</p>
<p>Here are some commands for marking with &lsquo;<samp class="samp">*</samp>&rsquo;, for unmarking, and
for operating on marks.  (See <a class="xref" href="Dired-Deletion.html">Deleting Files with Dired</a>, for commands to flag
and unflag files.)
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-_002a-m-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-dired_002dmark"></a>
<a id="index-m-_0028Dired_0029"></a><span><kbd class="kbd">m</kbd><a class="copiable-link" href="#index-m-_0028Dired_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">* m</kbd></dt>
<dd><p>Mark the current file with &lsquo;<samp class="samp">*</samp>&rsquo; (<code class="code">dired-mark</code>).  If the
region is active, mark all files in the region instead; otherwise, if
a numeric argument <var class="var">n</var> is supplied, mark the next <var class="var">n</var> files
instead, starting with the current file (if <var class="var">n</var> is negative, mark
the previous &minus;<var class="var">n</var> files).  If invoked on a subdirectory
header line (see <a class="pxref" href="Subdirectories-in-Dired.html">Subdirectories in Dired</a>), this command marks all
the files in that subdirectory.
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dnumber_002dof_002dmarked_002dfiles"></a>
<a id="index-_002a-N-_0028Dired_0029"></a><span><kbd class="kbd">* N</kbd><a class="copiable-link" href="#index-_002a-N-_0028Dired_0029"> &para;</a></span></dt>
<dd><p>Report what the number and size of the marked files are
(<code class="code">dired-number-of-marked-files</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dmark_002dexecutables"></a>
<a class="index-entry-id" id="index-marking-executable-files-_0028in-Dired_0029"></a>
<a id="index-_002a-_002a-_0028Dired_0029"></a><span><kbd class="kbd">* *</kbd><a class="copiable-link" href="#index-_002a-_002a-_0028Dired_0029"> &para;</a></span></dt>
<dd><p>Mark all executable files with &lsquo;<samp class="samp">*</samp>&rsquo;
(<code class="code">dired-mark-executables</code>).  With a numeric argument, unmark all
those files.
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dmark_002dsymlinks"></a>
<a class="index-entry-id" id="index-marking-symbolic-links-_0028in-Dired_0029"></a>
<a id="index-_002a-_0040-_0028Dired_0029"></a><span><kbd class="kbd">* @</kbd><a class="copiable-link" href="#index-_002a-_0040-_0028Dired_0029"> &para;</a></span></dt>
<dd><p>Mark all symbolic links with &lsquo;<samp class="samp">*</samp>&rsquo; (<code class="code">dired-mark-symlinks</code>).
With a numeric argument, unmark all those files.
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dmark_002ddirectories"></a>
<a class="index-entry-id" id="index-marking-subdirectories-_0028in-Dired_0029"></a>
<a id="index-_002a-_002f-_0028Dired_0029"></a><span><kbd class="kbd">* /</kbd><a class="copiable-link" href="#index-_002a-_002f-_0028Dired_0029"> &para;</a></span></dt>
<dd><p>Mark with &lsquo;<samp class="samp">*</samp>&rsquo; all files which are directories, except for
<samp class="file">.</samp> and <samp class="file">..</samp> (<code class="code">dired-mark-directories</code>).  With a numeric
argument, unmark all those files.
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dmark_002dsubdir_002dfiles"></a>
<a id="index-_002a-s-_0028Dired_0029"></a><span><kbd class="kbd">* s</kbd><a class="copiable-link" href="#index-_002a-s-_0028Dired_0029"> &para;</a></span></dt>
<dd><p>Mark all the files in the current subdirectory, aside from <samp class="file">.</samp>
and <samp class="file">..</samp> (<code class="code">dired-mark-subdir-files</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002a-u-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-dired_002dunmark"></a>
<a id="index-u-_0028Dired_0029"></a><span><kbd class="kbd">u</kbd><a class="copiable-link" href="#index-u-_0028Dired_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">* u</kbd></dt>
<dd><p>Remove any mark on this line (<code class="code">dired-unmark</code>).  If the region is
active, unmark all files in the region instead; otherwise, if a
numeric argument <var class="var">n</var> is supplied, unmark the next <var class="var">n</var> files
instead, starting with the current file (if <var class="var">n</var> is negative,
unmark the previous &minus;<var class="var">n</var> files).
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dunmark_002dbackward"></a>
<a class="index-entry-id" id="index-unmarking-files-_0028in-Dired_0029"></a>
<a id="index-_002a-DEL-_0028Dired_0029"></a><span><kbd class="kbd"><kbd class="key">DEL</kbd></kbd><a class="copiable-link" href="#index-_002a-DEL-_0028Dired_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">* <kbd class="key">DEL</kbd></kbd></dt>
<dd><p>Move point to previous line and remove any mark on that line
(<code class="code">dired-unmark-backward</code>).  If the region is active, unmark all
files in the region instead; otherwise, if a numeric argument <var class="var">n</var>
is supplied, unmark the <var class="var">n</var> preceding files instead, starting with
the current file (if <var class="var">n</var> is negative, unmark the next
&minus;<var class="var">n</var> files).
</p>
</dd>
<dt><a class="index-entry-id" id="index-U-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-dired_002dunmark_002dall_002dmarks"></a>
<a id="index-_002a-_0021-_0028Dired_0029"></a><span><kbd class="kbd">* !</kbd><a class="copiable-link" href="#index-_002a-_0021-_0028Dired_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">U</kbd></dt>
<dd><p>Remove all marks from all the files in this Dired buffer
(<code class="code">dired-unmark-all-marks</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-M_002dDEL-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-dired_002dunmark_002dall_002dfiles"></a>
<a id="index-_002a-_003f-_0028Dired_0029"></a><span><kbd class="kbd">* ? <var class="var">markchar</var></kbd><a class="copiable-link" href="#index-_002a-_003f-_0028Dired_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">M-<kbd class="key">DEL</kbd></kbd></dt>
<dd><p>Remove all marks that use the character <var class="var">markchar</var>
(<code class="code">dired-unmark-all-files</code>).  If invoked with <kbd class="kbd">M-<kbd class="key">DEL</kbd></kbd>,
the command prompts for <var class="var">markchar</var>.  That <var class="var">markchar</var> is a
single character&mdash;do not use <kbd class="key">RET</kbd> to terminate it.  See the
description of the <kbd class="kbd">* c</kbd> command below, which lets you replace one
mark character with another.
</p>
<p>With a numeric argument, this command queries about each marked file,
asking whether to remove its mark.  You can answer <kbd class="kbd">y</kbd> meaning yes,
<kbd class="kbd">n</kbd> meaning no, or <kbd class="kbd">!</kbd> to remove the marks from the remaining
files without asking about them.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002a-C_002dn-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-M_002d_007d-_0028Dired_0029"></a>
<a id="index-dired_002dnext_002dmarked_002dfile"></a><span><kbd class="kbd">* C-n</kbd><a class="copiable-link" href="#index-dired_002dnext_002dmarked_002dfile"> &para;</a></span></dt>
<dt><kbd class="kbd">M-}</kbd></dt>
<dd><p>Move down to the next marked file (<code class="code">dired-next-marked-file</code>).
A file is &ldquo;marked&rdquo; if it has any kind of mark.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002a-C_002dp-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-M_002d_007b-_0028Dired_0029"></a>
<a id="index-dired_002dprev_002dmarked_002dfile"></a><span><kbd class="kbd">* C-p</kbd><a class="copiable-link" href="#index-dired_002dprev_002dmarked_002dfile"> &para;</a></span></dt>
<dt><kbd class="kbd">M-{</kbd></dt>
<dd><p>Move up to the previous marked file (<code class="code">dired-prev-marked-file</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002a-t-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-dired_002dtoggle_002dmarks"></a>
<a class="index-entry-id" id="index-toggling-marks-_0028in-Dired_0029"></a>
<a id="index-t-_0028Dired_0029"></a><span><kbd class="kbd">t</kbd><a class="copiable-link" href="#index-t-_0028Dired_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">* t</kbd></dt>
<dd><p>Toggle all marks (<code class="code">dired-toggle-marks</code>): files marked with &lsquo;<samp class="samp">*</samp>&rsquo;
become unmarked, and unmarked files are marked with &lsquo;<samp class="samp">*</samp>&rsquo;.  Files
marked in any other way are not affected.
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dchange_002dmarks"></a>
<a id="index-_002a-c-_0028Dired_0029"></a><span><kbd class="kbd">* c <var class="var">old-markchar</var> <var class="var">new-markchar</var></kbd><a class="copiable-link" href="#index-_002a-c-_0028Dired_0029"> &para;</a></span></dt>
<dd><p>Replace all marks that use the character <var class="var">old-markchar</var> with marks
that use the character <var class="var">new-markchar</var> (<code class="code">dired-change-marks</code>).
This command is the primary way to create or use marks other than
&lsquo;<samp class="samp">*</samp>&rsquo; or &lsquo;<samp class="samp">D</samp>&rsquo;.  The arguments are single characters&mdash;do not use
<kbd class="key">RET</kbd> to terminate them.
</p>
<p>You can use almost any character as a mark character by means of this
command, to distinguish various classes of files.  If <var class="var">old-markchar</var>
is a space (&lsquo;<samp class="samp"> </samp>&rsquo;), then the command operates on all unmarked files;
if <var class="var">new-markchar</var> is a space, then the command unmarks the files it
acts on.
</p>
<p>To illustrate the power of this command, here is how to put &lsquo;<samp class="samp">D</samp>&rsquo;
flags on all the files that have no marks, while unflagging all those
that already have &lsquo;<samp class="samp">D</samp>&rsquo; flags:
</p>
<div class="example">
<pre class="example-preformatted">* c D t  * c <kbd class="key">SPC</kbd> D  * c t <kbd class="key">SPC</kbd>
</pre></div>

<p>This assumes that no files were already marked with &lsquo;<samp class="samp">t</samp>&rsquo;.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_0025-m-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-_002a-_0025-_0028Dired_0029"></a>
<a id="index-dired_002dmark_002dfiles_002dregexp"></a><span><kbd class="kbd">% m <var class="var">regexp</var> <kbd class="key">RET</kbd></kbd><a class="copiable-link" href="#index-dired_002dmark_002dfiles_002dregexp"> &para;</a></span></dt>
<dt><kbd class="kbd">* % <var class="var">regexp</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Mark (with &lsquo;<samp class="samp">*</samp>&rsquo;) all files whose names match the regular expression
<var class="var">regexp</var> (<code class="code">dired-mark-files-regexp</code>).  This command is like
<kbd class="kbd">% d</kbd>, except that it marks files with &lsquo;<samp class="samp">*</samp>&rsquo; instead of flagging
with &lsquo;<samp class="samp">D</samp>&rsquo;.
</p>
<p>Only the non-directory part of the file name is used in matching.  Use
&lsquo;<samp class="samp">^</samp>&rsquo; and &lsquo;<samp class="samp">$</samp>&rsquo; to anchor matches.  You can exclude
subdirectories by temporarily hiding them (see <a class="pxref" href="Hiding-Subdirectories.html">Hiding Subdirectories</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_0025-g-_0028Dired_0029"></a>
<a class="index-entry-id" id="index-finding-files-containing-regexp-matches-_0028in-Dired_0029"></a>
<a id="index-dired_002dmark_002dfiles_002dcontaining_002dregexp"></a><span><kbd class="kbd">% g <var class="var">regexp</var> <kbd class="key">RET</kbd></kbd><a class="copiable-link" href="#index-dired_002dmark_002dfiles_002dcontaining_002dregexp"> &para;</a></span></dt>
<dd><p>Mark (with &lsquo;<samp class="samp">*</samp>&rsquo;) all files whose <em class="emph">contents</em> contain a match for
the regular expression <var class="var">regexp</var>
(<code class="code">dired-mark-files-containing-regexp</code>).  This command is like
<kbd class="kbd">% m</kbd>, except that it searches the file contents instead of the file
name.  Note that if a file is visited in an Emacs buffer,
and <code class="code">dired-always-read-filesystem</code> is <code class="code">nil</code> (the default), this
command will look in the buffer without revisiting the file, so the results
might be inconsistent with the file on disk if its contents have changed
since it was last visited.  If you don&rsquo;t want this, you may wish to
revert the files you have visited in your buffers, or to turn on
Auto-Revert mode in those buffers, before invoking this command.
See <a class="xref" href="Reverting.html">Reverting a Buffer</a>.  If you prefer that this command should always
revisit the file, without you having to revert the file or enable
Auto-Revert mode, you might want to set
<code class="code">dired-always-read-filesystem</code> to non-<code class="code">nil</code>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-dired_002dundo"></a>
<a id="index-C_002d_005f-_0028Dired_0029"></a><span><kbd class="kbd">C-/</kbd><a class="copiable-link" href="#index-C_002d_005f-_0028Dired_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">C-x u</kbd></dt>
<dt><kbd class="kbd">C-_</kbd></dt>
<dd><p>Undo changes in the Dired buffer, such as adding or removing
marks (<code class="code">dired-undo</code>).  <em class="emph">This command does not revert the
actual file operations, nor recover lost files!</em>  It just undoes
changes in the buffer itself.
</p>
<p>In some cases, using this after commands that operate on files can
cause trouble.  For example, after renaming one or more files,
<code class="code">dired-undo</code> restores the original names in the Dired buffer,
which gets the Dired buffer out of sync with the actual contents of
the directory.
</p></dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Operating-on-Files.html">Operating on Files</a>, Previous: <a href="Dired-Visiting.html">Visiting Files in Dired</a>, Up: <a href="Dired.html">Dired, the Directory Editor</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
