<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Identifier Search (GNU Emacs Manual)</title>

<meta name="description" content="Identifier Search (GNU Emacs Manual)">
<meta name="keywords" content="Identifier Search (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Find-Identifiers.html" rel="up" title="Find Identifiers">
<link href="List-Identifiers.html" rel="next" title="List Identifiers">
<link href="Xref-Commands.html" rel="prev" title="Xref Commands">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsubsection-level-extent" id="Identifier-Search">
<div class="nav-panel">
<p>
Next: <a href="List-Identifiers.html" accesskey="n" rel="next">Identifier Inquiries</a>, Previous: <a href="Xref-Commands.html" accesskey="p" rel="prev">Commands Available in the <samp class="file">*xref*</samp> Buffer</a>, Up: <a href="Find-Identifiers.html" accesskey="u" rel="up">Find Identifiers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="Searching-and-Replacing-with-Identifiers"><span>29.4.1.3 Searching and Replacing with Identifiers<a class="copiable-link" href="#Searching-and-Replacing-with-Identifiers"> &para;</a></span></h4>
<a class="index-entry-id" id="index-search-and-replace-in-multiple-source-files"></a>
<a class="index-entry-id" id="index-multiple-source-file-search-and-replace"></a>

<p>The commands in this section perform various search and replace
operations either on identifiers themselves or on files that reference
them.
</p>
<dl class="table">
<dt><kbd class="kbd">M-?</kbd></dt>
<dd><p>Find all the references for the identifier at point.
</p>
</dd>
<dt><kbd class="kbd">r</kbd></dt>
<dt><kbd class="kbd">M-x xref-query-replace-in-results <kbd class="key">RET</kbd> <var class="var">replacement</var> <kbd class="key">RET</kbd></kbd></dt>
<dt><kbd class="kbd">C-u M-x xref-query-replace-in-results <kbd class="key">RET</kbd> <var class="var">regexp</var> <kbd class="key">RET</kbd> <var class="var">replacement</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Interactively replace <var class="var">regexp</var> with <var class="var">replacement</var> in the names
of all the identifiers shown in the <samp class="file">*xref*</samp> buffer.
</p>
</dd>
<dt><kbd class="kbd">M-x xref-find-references-and-replace <kbd class="key">RET</kbd> <var class="var">from</var> <kbd class="key">RET</kbd> <var class="var">to</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Interactively rename all instances of the identifier <var class="var">from</var> to the
new name <var class="var">to</var>.
</p>
</dd>
<dt><kbd class="kbd">M-x tags-search <kbd class="key">RET</kbd> <var class="var">regexp</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Search for <var class="var">regexp</var> through the files in the selected tags
table.
</p>
</dd>
<dt><kbd class="kbd">M-x tags-query-replace <kbd class="key">RET</kbd> <var class="var">regexp</var> <kbd class="key">RET</kbd> <var class="var">replacement</var> <kbd class="key">RET</kbd></kbd></dt>
<dd><p>Perform a <code class="code">query-replace-regexp</code> on each file in the selected tags table.
</p>
</dd>
<dt><kbd class="kbd">M-x fileloop-continue</kbd></dt>
<dd><p>Restart one of the last 2 commands above, from the current location of point.
</p></dd>
</dl>

<a class="index-entry-id" id="index-M_002d_003f"></a>
<a class="index-entry-id" id="index-xref_002dfind_002dreferences"></a>
<p><kbd class="kbd">M-?</kbd> finds all the references for the identifier at point,
prompting for the identifier as needed, with completion.  Depending on
the current backend (see <a class="pxref" href="Xref.html">Find Identifier References</a>), the command may prompt even if it
finds a valid identifier at point.  When invoked with a prefix
argument, it always prompts for the identifier.  (If you want it to
prompt always, customize the value of the variable
<code class="code">xref-prompt-for-identifier</code> to <code class="code">t</code>; or set it to <code class="code">nil</code>
to prompt only if there&rsquo;s no usable identifier at point.)  The command
then presents the <samp class="file">*xref*</samp> buffer with all the references to the
identifier, showing the file name and the line where the identifier is
referenced.  The XREF mode commands are available in this buffer, see
<a class="ref" href="Xref-Commands.html">Commands Available in the <samp class="file">*xref*</samp> Buffer</a>.
</p>
<a class="index-entry-id" id="index-xref_002dauto_002djump_002dto_002dfirst_002dxref"></a>
<p>If the value of the variable <code class="code">xref-auto-jump-to-first-xref</code> is
<code class="code">t</code>, <code class="code">xref-find-references</code> automatically jumps to the first
result and selects the window where it is displayed.  If the value is
<code class="code">show</code>, the first result is shown, but the window showing the
<samp class="file">*xref*</samp> buffer is left selected.  If the value is <code class="code">move</code>,
the first result is selected in the <samp class="file">*xref*</samp> buffer, but is not
shown.  The default value is <code class="code">nil</code>, which just shows the results
in the <samp class="file">*xref*</samp> buffer, but doesn&rsquo;t select any of them.
</p>
<a class="index-entry-id" id="index-xref_002dquery_002dreplace_002din_002dresults"></a>
<p><kbd class="kbd">r</kbd> (<code class="code">xref-query-replace-in-results</code>) reads a <var class="var">replacement</var>
string, just like ordinary <kbd class="kbd">M-x query-replace-regexp</kbd>.  It then
renames the identifiers shown in the <samp class="file">*xref*</samp> buffer in all the
places in all the files where these identifiers are referenced, such
that their new name is <var class="var">replacement</var>.  This is useful when you
rename your identifiers as part of refactoring.  This command should
be invoked in the <samp class="file">*xref*</samp> buffer generated by <kbd class="kbd">M-?</kbd>.  By
default, the command replaces the entire name of each identifier with
<var class="var">replacement</var>, but if invoked with a prefix argument, the command
prompts for a regexp to match identifier names, and replaces only the
matches of that regexp in the names of the identifiers with
<var class="var">replacement</var>.
</p>
<a class="index-entry-id" id="index-xref_002dfind_002dreferences_002dand_002dreplace"></a>
<p><kbd class="kbd">M-x xref-find-references-and-replace</kbd> works similarly to
<code class="code">xref-query-replace-in-results</code>, but is more convenient when you
want to rename a single identifier specified by its name <var class="var">from</var>.
</p>
<a class="index-entry-id" id="index-tags_002dsearch"></a>
<p><kbd class="kbd">M-x tags-search</kbd> reads a regexp using the minibuffer, then
searches for matches in all the files in the selected tags table, one
file at a time.  It displays the name of the file being searched so
you can follow its progress.  As soon as it finds an occurrence,
<code class="code">tags-search</code> returns.  This command requires tags tables to be
available (see <a class="pxref" href="Tags-Tables.html">Tags Tables</a>).
</p>
<a class="index-entry-id" id="index-fileloop_002dcontinue"></a>
<p>Having found one match with <code class="code">tags-search</code>, you probably want to
find all the rest.  <kbd class="kbd">M-x fileloop-continue</kbd> resumes the
<code class="code">tags-search</code>, finding one more match.  This searches the rest of
the current buffer, followed by the remaining files of the tags table.
</p>
<a class="index-entry-id" id="index-tags_002dquery_002dreplace"></a>
<p><kbd class="kbd">M-x tags-query-replace</kbd> performs a single
<code class="code">query-replace-regexp</code> through all the files in the tags table.  It
reads a regexp to search for and a string to replace with, just like
ordinary <kbd class="kbd">M-x query-replace-regexp</kbd>.  It searches much like <kbd class="kbd">M-x
tags-search</kbd>, but repeatedly, processing matches according to your
input.  See <a class="xref" href="Query-Replace.html">Query Replace</a>, for more information on query replace.
</p>
<a class="index-entry-id" id="index-tags_002dcase_002dfold_002dsearch"></a>
<a class="index-entry-id" id="index-case_002dsensitivity-and-tags-search"></a>
<p>You can control the case-sensitivity of tags search commands by
customizing the value of the variable <code class="code">tags-case-fold-search</code>.  The
default is to use the same setting as the value of
<code class="code">case-fold-search</code> (see <a class="pxref" href="Lax-Search.html">Lax Matching During Searching</a>).
</p>
<p>It is possible to get through all the files in the tags table with a
single invocation of <kbd class="kbd">M-x tags-query-replace</kbd>.  But often it is
useful to exit temporarily, which you can do with any input event that
has no special query replace meaning.  You can resume the query
replace subsequently by typing <kbd class="kbd">M-x fileloop-continue</kbd>; this
command resumes the last tags search or replace command that you did.
For instance, to skip the rest of the current file, you can type
<kbd class="kbd">M-&gt;&nbsp;M-x&nbsp;fileloop-continue</kbd><!-- /@w -->.
</p>
<p>Note that the commands described above carry out much broader
searches than the <code class="code">xref-find-definitions</code> family.  The
<code class="code">xref-find-definitions</code> commands search only for definitions of
identifiers that match your string or regexp.  The commands
<code class="code">xref-find-references</code>, <code class="code">tags-search</code>, and
<code class="code">tags-query-replace</code> find every occurrence of the identifier or
regexp, as ordinary search commands and replace commands do in the
current buffer.
</p>
<p>As an alternative to <code class="code">xref-find-references</code> and
<code class="code">tags-search</code>, you can run <code class="command">grep</code> as a subprocess and
have Emacs show you the matching lines one by one.  See <a class="xref" href="Grep-Searching.html">Searching with Grep under Emacs</a>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="List-Identifiers.html">Identifier Inquiries</a>, Previous: <a href="Xref-Commands.html">Commands Available in the <samp class="file">*xref*</samp> Buffer</a>, Up: <a href="Find-Identifiers.html">Find Identifiers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
