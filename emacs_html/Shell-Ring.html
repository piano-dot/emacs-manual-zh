<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Shell Ring (GNU Emacs Manual)</title>

<meta name="description" content="Shell Ring (GNU Emacs Manual)">
<meta name="keywords" content="Shell Ring (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Shell-History.html" rel="up" title="Shell History">
<link href="Shell-History-Copying.html" rel="next" title="Shell History Copying">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="zh_CN">
<div class="subsubsection-level-extent" id="Shell-Ring">
<div class="nav-panel">
<p>
Next: <a href="Shell-History-Copying.html" accesskey="n" rel="next">Shell History Copying</a>, Up: <a href="Shell-History.html" accesskey="u" rel="up">Shell Command History</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="Shell-History-Ring"><span>35.5.5.1 Shell History Ring<a class="copiable-link" href="#Shell-History-Ring"> &para;</a></span></h4>

<dl class="table">
<dt><a class="index-entry-id" id="index-M_002dp-_0028Shell-mode_0029"></a>
<a id="index-comint_002dprevious_002dinput"></a><span><kbd class="kbd">M-p</kbd><a class="copiable-link" href="#index-comint_002dprevious_002dinput"> &para;</a></span></dt>
<dt><kbd class="kbd">C-<kbd class="key">UP</kbd></kbd></dt>
<dd><p>Fetch the next earlier old shell command
(<code class="code">comint-previous-input</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dnext_002dinput"></a>
<a id="index-M_002dn-_0028Shell-mode_0029"></a><span><kbd class="kbd">M-n</kbd><a class="copiable-link" href="#index-M_002dn-_0028Shell-mode_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">C-<kbd class="key">DOWN</kbd></kbd></dt>
<dd><p>Fetch the next later old shell command (<code class="code">comint-next-input</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dhistory_002disearch_002dbackward_002dregexp"></a>
<a id="index-M_002dr-_0028Shell-mode_0029"></a><span><kbd class="kbd">M-r</kbd><a class="copiable-link" href="#index-M_002dr-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>Begin an incremental regexp search of old shell commands
(<code class="code">comint-history-isearch-backward-regexp</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dget_002dnext_002dfrom_002dhistory"></a>
<a id="index-C_002dc-C_002dx-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-x</kbd><a class="copiable-link" href="#index-C_002dc-C_002dx-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>Fetch the next subsequent command from the history
(<code class="code">comint-get-next-from-history</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dinsert_002dprevious_002dargument"></a>
<a id="index-C_002dc-_002e-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c .</kbd><a class="copiable-link" href="#index-C_002dc-_002e-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>Fetch one argument from an old shell command
(<code class="code">comint-input-previous-argument</code>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002ddynamic_002dlist_002dinput_002dring"></a>
<a id="index-C_002dc-C_002dl-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-l</kbd><a class="copiable-link" href="#index-C_002dc-C_002dl-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>Display the buffer&rsquo;s history of shell commands in another window
(<code class="code">comint-dynamic-list-input-ring</code>).
</p></dd>
</dl>

<p>Shell buffers provide a history of previously entered shell
commands.  To reuse shell commands from the history, use the editing
commands <kbd class="kbd">M-p</kbd>, <kbd class="kbd">M-n</kbd>, and <kbd class="kbd">M-r</kbd>.  These work
similar to the minibuffer history commands (see <a class="pxref" href="Minibuffer-History.html">Minibuffer History</a>), except that they operate within the Shell buffer rather
than the minibuffer, and <code class="code">M-r</code> in a Shell buffer invokes
incremental search through shell command history.
</p>
<p><kbd class="kbd">M-p</kbd> fetches an earlier shell command to the end of the shell
buffer.  Successive use of <kbd class="kbd">M-p</kbd> fetches successively earlier
shell commands, each replacing any text that was already present as
potential shell input.  <kbd class="kbd">M-n</kbd> does likewise except that it finds
successively more recent shell commands from the buffer.
<kbd class="kbd">C-<kbd class="key">UP</kbd></kbd> works like <kbd class="kbd">M-p</kbd>, and <kbd class="kbd">C-<kbd class="key">DOWN</kbd></kbd> like
<kbd class="kbd">M-n</kbd>.
</p>
<p>The history search command <kbd class="kbd">M-r</kbd> begins an incremental regular
expression search of previous shell commands.  After typing <kbd class="kbd">M-r</kbd>,
start typing the desired string or regular expression; the last
matching shell command will be displayed in the current line.
Incremental search commands have their usual effects&mdash;for instance,
<kbd class="kbd">C-s</kbd> and <kbd class="kbd">C-r</kbd> search forward and backward for the next match
(see <a class="pxref" href="Incremental-Search.html">Incremental Search</a>).  When you find the desired input, type
<kbd class="key">RET</kbd> to terminate the search.  This puts the input in the command
line.  Any partial input you were composing before navigating the
history list is restored when you go to the beginning or end of the
history ring.
</p>
<p>Often it is useful to reexecute several successive shell commands that
were previously executed in sequence.  To do this, first find and
reexecute the first command of the sequence.  Then type <kbd class="kbd">C-c C-x</kbd>;
that will fetch the following command&mdash;the one that follows the command
you just repeated.  Then type <kbd class="key">RET</kbd> to reexecute this command.  You
can reexecute several successive commands by typing <kbd class="kbd">C-c C-x
<kbd class="key">RET</kbd></kbd> over and over.
</p>
<p>The command <kbd class="kbd">C-c .</kbd> (<code class="code">comint-insert-previous-argument</code>)
copies an individual argument from a previous command, like
<kbd class="kbd"><kbd class="key">ESC</kbd> .</kbd> in Bash and <code class="command">zsh</code>.  The simplest use
copies the last argument from the previous shell command.  With a
prefix argument <var class="var">n</var>, it copies the <var class="var">n</var>th argument instead.
Repeating <kbd class="kbd">C-c .</kbd> copies from an earlier shell commands, always
using the same value of <var class="var">n</var>  (don&rsquo;t give a prefix argument when
you repeat the <kbd class="kbd">C-c .</kbd> command).
</p>
<a class="index-entry-id" id="index-comint_002dinsert_002dprevious_002dargument_002dfrom_002dend"></a>
<p>If you set <code class="code">comint-insert-previous-argument-from-end</code> to a
non-<code class="code">nil</code> value, <kbd class="kbd">C-c .</kbd> will instead copy the <var class="var">n</var>th
argument counting from the last one; this emulates <kbd class="kbd"><kbd class="key">ESC</kbd> .</kbd>
in <code class="command">zsh</code>.
</p>
<p>These commands get the text of previous shell commands from a special
history list, not from the shell buffer itself.  Thus, editing the shell
buffer, or even killing large parts of it, does not affect the history
that these commands access.
</p>
<a class="index-entry-id" id="index-comint_002dinput_002dring_002dfile_002dname"></a>
<p>Some shells store their command histories in files so that you can
refer to commands from previous shell sessions.  Emacs reads
the command history file for your chosen shell, to initialize its own
command history.  The file name is <samp class="file">~/.bash_history</samp> for bash,
<samp class="file">~/.sh_history</samp> for ksh, and <samp class="file">~/.history</samp> for other shells.
</p>
<a class="index-entry-id" id="index-tramp_002dhistfile_002doverride"></a>
<p>If you run the shell on a remote host, this setting might be
overwritten by the variable <code class="code">tramp-histfile-override</code>.  It is
recommended to set this variable to <code class="code">nil</code>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Shell-History-Copying.html">Shell History Copying</a>, Up: <a href="Shell-History.html">Shell Command History</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
