<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>Appendix F Emacs and macOS / GNUstep (GNU Emacs Manual)</title>

<meta name="description" content="Appendix F Emacs and macOS / GNUstep (GNU Emacs Manual)"/>
<meta name="keywords" content="Appendix F Emacs and macOS / GNUstep (GNU Emacs Manual)"/>
<meta name="resource-type" content="document"/>
<meta name="distribution" content="global"/>
<meta name="Generator" content="texi2any"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<link href="emacs.xhtml" rel="start" title="Emacs 编辑器"/>
<link href="Key-Index.xhtml" rel="index" title="Key (Character) Index"/>
<link href="emacs.xhtml#SEC_Contents" rel="contents" title="Table of Contents"/>
<link href="emacs.xhtml" rel="up" title="Emacs 编辑器"/>
<link href="Haiku.xhtml#Haiku" rel="next" title="Appendix G Emacs and Haiku"/>
<link href="Antinews.xhtml" rel="prev" title="Appendix E Emacs 28 Antinews"/>
<style type="text/css">
<!--
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
-->
</style>


</head>

<body lang="zh_CN">
<div class="appendix-level-extent" id="Mac-OS-_002f-GNUstep">

<h2 class="appendix" id="Emacs-and-macOS-_002f-GNUstep">Appendix F Emacs and macOS / GNUstep</h2>
<a class="index-entry-id" id="index-macOS"></a>
<a class="index-entry-id" id="index-Macintosh"></a>
<a class="index-entry-id" id="index-GNUstep"></a>

<p>This section describes the peculiarities of using Emacs built with
the GNUstep libraries on GNU/Linux or other operating systems, or on
macOS with native window system support.  On macOS, Emacs can be
built either without window system support, with X11, or with the
Cocoa interface; this section only applies to the Cocoa build.  This
does not support versions before macOS 10.6.
</p>
<p>GNUstep is free software; macOS is not.  Because it is a non-free
operating system, macOS denies its users the freedom that every computer
user deserves.  That is an injustice.  For your freedom&#8217;s sake, we
urge you to switch to a free operating system.
</p>
<p>We support GNU Emacs on proprietary operating systems because
we hope this taste of freedom will inspire users to escape from them.
</p>
<p>For various historical and technical reasons, Emacs uses the term
&#8216;<samp class="samp">Nextstep</samp>&#8217; internally, instead of &#8220;Cocoa&#8221; or &#8220;macOS&#8221;; for
instance, most of the commands and variables described in this section
begin with &#8216;<samp class="samp">ns-</samp>&#8217;, which is short for &#8216;<samp class="samp">Nextstep</samp>&#8217;.  NeXTstep
was an application interface released by NeXT Inc. during the 1980s,
of which Cocoa is a direct descendant.  Apart from Cocoa, there is
another NeXTstep-style system: GNUstep, which is free software.  As of
this writing, Emacs GNUstep support is in alpha status (see <a class="pxref" href="#GNUstep-Support">GNUstep Support</a>), but we hope to improve it in the future.
</p>

<div class="section-level-extent" id="Mac-_002f-GNUstep-Basics">
<h3 class="section" id="Basic-Emacs-usage-under-macOS-and-GNUstep">F.1 Basic Emacs usage under macOS and GNUstep</h3>

<a class="index-entry-id" id="index-modifier-keys-_0028macOS_0029"></a>
<p>By default, the <kbd class="key">Alt</kbd> and <kbd class="key">Option</kbd> keys are the same as
<kbd class="key">Meta</kbd>.  The Mac <kbd class="key">Cmd</kbd> key is the same as <kbd class="key">Super</kbd>, and
Emacs provides a set of key bindings using this modifier key that mimic
other Mac / GNUstep applications (see <a class="pxref" href="#Mac-_002f-GNUstep-Events">Windowing System Events under macOS / GNUstep</a>).  You
can change these bindings in the usual way (see <a class="pxref" href="Customization.xhtml#Key-Bindings">Customizing Key Bindings</a>).
The modifiers themselves can be customized;
see <a class="pxref" href="#Mac-_002f-GNUstep-Customization">Mac / GNUstep Customization</a>.
</p>
<p><kbd class="kbd">S-mouse-1</kbd> adjusts the region to the click position,
just like <kbd class="kbd">mouse-3</kbd> (<code class="code">mouse-save-then-kill</code>); it does not pop
up a menu for changing the default face, as <kbd class="kbd">S-mouse-1</kbd> normally
does (see <a class="pxref" href="Display.xhtml#Text-Scale">Text Scale</a>).  This change makes Emacs behave more like
other Mac / GNUstep applications.
</p>
<p>When you open or save files using the menus, or using the
<kbd class="kbd">Cmd-o</kbd> and <kbd class="kbd">Cmd-S</kbd> bindings, Emacs uses graphical file
dialogs to read file names.  However, if you use the regular Emacs key
sequences, such as <kbd class="kbd">C-x C-f</kbd>, Emacs uses the minibuffer to read
file names.
</p>
<a class="index-entry-id" id="index-copy_002fpaste-to_002ffrom-primary-selection-_0028macOS_0029"></a>
<p>On GNUstep, in an X-windows environment you need to use <kbd class="kbd">Cmd-c</kbd>
instead of one of the <kbd class="kbd">C-w</kbd> or <kbd class="kbd">M-w</kbd> commands to transfer text
to the X primary selection; otherwise, Emacs will use the
clipboard selection.  Likewise, <kbd class="kbd">Cmd-y</kbd> (instead of <kbd class="kbd">C-y</kbd>)
yanks from the X primary selection instead of the kill-ring or
clipboard.
</p>

<div class="subsection-level-extent" id="Grabbing-environment-variables">
<h4 class="subsection">F.1.1 Grabbing environment variables</h4>

<a class="index-entry-id" id="index-environment-variables-_0028macOS_0029"></a>
<p>Many programs which may run under Emacs, like latex or man, depend on the
settings of environment variables.  If Emacs is launched from the shell, it
will automatically inherit these environment variables and its subprocesses
will inherit them from it.  But if Emacs is launched from the Finder it
is not a descendant of any shell, so its environment variables haven&#8217;t been
set, which often causes the subprocesses it launches to behave differently than
they would when launched from the shell.
</p>
<p>For the PATH and MANPATH variables, a system-wide method
of setting PATH is recommended on macOS, using the
<samp class="file">/etc/paths</samp> files and the <samp class="file">/etc/paths.d</samp> directory.
</p>
</div>
</div>
<div class="section-level-extent" id="Mac-_002f-GNUstep-Customization">
<h3 class="section" id="Mac-_002f-GNUstep-Customization-1">F.2 Mac / GNUstep Customization</h3>

<p>There are a few customization options that are specific to the
Nextstep port.  For example, they affect things such as the modifier
keys and the fullscreen behavior.  To see all such options, use
<kbd class="kbd">M-x customize-group <kbd class="key">RET</kbd> ns <kbd class="key">RET</kbd></kbd>.
</p>
<div class="subsection-level-extent" id="Modifier-keys">
<h4 class="subsection">F.2.1 Modifier keys</h4>

<p>The following variables control the behavior of the actual modifier
keys:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-ns_002dright_002dalternate_002dmodifier"></a>
<a id="index-ns_002dalternate_002dmodifier"></a><code class="code">ns-alternate-modifier</code></dt>
<dt><code class="code">ns-right-alternate-modifier</code></dt>
<dd><p>The left and right <kbd class="key">Option</kbd> or <kbd class="key">Alt</kbd> keys.
</p>
</dd>
<dt><a class="index-entry-id" id="index-ns_002dright_002dcommand_002dmodifier"></a>
<a id="index-ns_002dcommand_002dmodifier"></a><code class="code">ns-command-modifier</code></dt>
<dt><code class="code">ns-right-command-modifier</code></dt>
<dd><p>The left and right <kbd class="key">Command</kbd> keys.
</p>
</dd>
<dt><a class="index-entry-id" id="index-ns_002dright_002dcontrol_002dmodifier"></a>
<a id="index-ns_002dcontrol_002dmodifier"></a><code class="code">ns-control-modifier</code></dt>
<dt><code class="code">ns-right-control-modifier</code></dt>
<dd><p>The left and right <kbd class="key">Control</kbd> keys.
</p>
</dd>
<dt><a id="index-ns_002dfunction_002dmodifier"></a><code class="code">ns-function-modifier</code></dt>
<dd><p>The <kbd class="key">Function</kbd> (fn) key.
</p></dd>
</dl>

<p>The value of each variable is either a symbol, describing the key for
any purpose, or a list of the form
<code class="code">(:ordinary <var class="var">symbol</var> :function <var class="var">symbol</var> :mouse <var class="var">symbol</var>)</code>,
which describes the modifier when used with ordinary keys, function keys
(that do not produce a character, such as arrow keys), and mouse clicks.
</p>
<p>If the <var class="var">symbol</var> is one of <code class="code">control</code>, <code class="code">meta</code>, <code class="code">alt</code>,
<code class="code">super</code> or <code class="code">hyper</code>, this describes the Emacs modifier it
represents.  If <var class="var">symbol</var> is <code class="code">none</code>, Emacs does not use the
key, which retains its standard behavior.  For instance, the
<kbd class="key">Option</kbd> key in macOS is then used for composing additional
characters.
</p>
<p>The variables for right-hand keys, like <code class="code">ns-right-alternate-modifier</code>,
may also be set to <code class="code">left</code>, which means to use the same behavior as
the corresponding left-hand key.
</p>
</div>
<div class="subsection-level-extent" id="Frame-Variables">
<h4 class="subsection">F.2.2 Frame Variables</h4>

<dl class="table">
<dt><a id="index-ns_002duse_002dproxy_002dicon"></a><code class="code">ns-use-proxy-icon</code></dt>
<dd><p>This variable specifies whether to display the proxy icon in the
titlebar.  The proxy icon can be used to drag the file associated with
the current buffer to other applications, a printer, the desktop,
etc., in the same way you can from Finder.  You might have to disable
<code class="code">tool-bar-mode</code> to see the proxy icon.
</p>
</dd>
<dt><a id="index-ns_002dconfirm_002dquit"></a><code class="code">ns-confirm-quit</code></dt>
<dd><p>This variable specifies whether to display a graphical confirmation
dialog on quitting.
</p>
</dd>
<dt><a id="index-ns_002dauto_002dhide_002dmenu_002dbar"></a><code class="code">ns-auto-hide-menu-bar</code></dt>
<dd><p>This variable specifies whether the macOS menu bar is hidden when an
Emacs frame is selected.  If non-<code class="code">nil</code> the menu bar is not shown unless
the mouse pointer is moved near to the top of the screen.
</p>
</dd>
<dt><a id="index-ns_002duse_002dnative_002dfullscreen"></a><code class="code">ns-use-native-fullscreen</code></dt>
<dd><p>This variable controls whether to use native, or non-native
fullscreen.  Native fullscreen is only available on macOS 10.7 and
above.
</p></dd>
</dl>

</div>
<div class="subsection-level-extent" id="macOS-Trackpad_002fMousewheel-Variables">
<h4 class="subsection">F.2.3 macOS Trackpad/Mousewheel Variables</h4>

<p>These variables only apply to macOS 10.7 (Lion) and above.
</p>
<dl class="table">
<dt><a id="index-ns_002duse_002dmwheel_002dacceleration"></a><code class="code">ns-use-mwheel-acceleration</code></dt>
<dd><p>This variable controls whether Emacs ignores the system mousewheel
acceleration.  When <code class="code">nil</code> each &#8216;click&#8217; of the mousewheel will
correspond exactly with one mousewheel event.  When non-<code class="code">nil</code>,
the default, each &#8216;click&#8217; may correspond with more than one mousewheel
event, depending on the user&#8217;s input.
</p>
</dd>
<dt><a id="index-ns_002duse_002dmwheel_002dmomentum"></a><code class="code">ns-use-mwheel-momentum</code></dt>
<dd><p>This variable controls whether Emacs ignores the system &#8216;momentum&#8217;
when scrolling using a trackpad.  When non-<code class="code">nil</code>, the default, scrolling
rapidly may result in the buffer continuing to scroll for a short
while after the user has lifted their fingers off the trackpad.
</p>
</dd>
<dt><a id="index-ns_002dmwheel_002dline_002dheight"></a><code class="code">ns-mwheel-line-height</code></dt>
<dd><p>This variable controls the sensitivity of scrolling with the trackpad.
Apple trackpads scroll by pixels, not lines, so Emacs converts the
system&#8217;s pixel values into lines.  When set to a number, this variable
sets the number of pixels Emacs will consider as one line.  When
<code class="code">nil</code> or a non-number the default line height is used.
</p>
<p>Setting a lower number makes the trackpad more sensitive, and a higher
number makes the trackpad less sensitive.
</p></dd>
</dl>


</div>
</div>
<div class="section-level-extent" id="Mac-_002f-GNUstep-Events">
<h3 class="section" id="Windowing-System-Events-under-macOS-_002f-GNUstep">F.3 Windowing System Events under macOS / GNUstep</h3>
<a class="index-entry-id" id="index-events-on-macOS"></a>

<p>Nextstep applications receive a number of special events which have
no X equivalent.  These are sent as specially defined key events, which
do not correspond to any sequence of keystrokes.  Under Emacs, these
key events can be bound to functions just like ordinary
keystrokes.  Here is a list of these events.
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-ns_002dpop_002dup_002dframes"></a>
<a id="index-ns_002dopen_002dfile-event"></a><kbd class="key">ns-open-file</kbd></dt>
<dd><p>This event occurs when another Nextstep application requests that
Emacs open a file.  A typical reason for this would be a user
double-clicking a file in the Finder application.  By default, Emacs
responds to this event by opening a new frame and visiting the file in
that frame (<code class="code">ns-find-file</code>).  As an exception, if the selected
buffer is the <samp class="file">*scratch*</samp> buffer, Emacs visits the file in the
selected frame.
</p>
<p>You can change how Emacs responds to a <code class="code">ns-open-file</code> event by
changing the variable <code class="code">ns-pop-up-frames</code>.  Its default value,
&#8216;<samp class="samp">fresh</samp>&#8217;, is what we have just described.  A value of <code class="code">t</code>
means to always visit the file in a new frame.  A value of <code class="code">nil</code>
means to always visit the file in the selected frame.
</p>
</dd>
<dt><a id="index-ns_002dopen_002dtemp_002dfile-event"></a><kbd class="key">ns-open-temp-file</kbd></dt>
<dd><p>This event occurs when another application requests that Emacs open a
temporary file.  By default, this is handled by just generating a
<code class="code">ns-open-file</code> event, the results of which are described above.
</p>
</dd>
<dt><a id="index-ns_002dopen_002dfile_002dline-event"></a><kbd class="key">ns-open-file-line</kbd></dt>
<dd><p>Some applications, such as ProjectBuilder and gdb, request not only a
particular file, but also a particular line or sequence of lines in
the file.  Emacs handles this by visiting that file and highlighting
the requested line (<code class="code">ns-open-file-select-line</code>).
</p>
</dd>
<dt><a id="index-ns_002dpower_002doff-event"></a><kbd class="key">ns-power-off</kbd></dt>
<dd><p>This event occurs when the user logs out and Emacs is still running, or when
&#8220;Quit Emacs&#8221; is chosen from the application menu.
The default behavior is to save all file-visiting buffers.
</p>
</dd>
<dt><a id="index-ns_002dshow_002dprefs-event"></a><kbd class="key">ns-show-prefs</kbd></dt>
<dd><p>This event occurs when the user selects &#8220;Preferences&#8221; from the
application menu.  By default, it is bound to the command
<code class="code">customize</code>.
</p></dd>
</dl>

<a class="index-entry-id" id="index-using-Nextstep-services-_0028macOS_0029"></a>
<p>Emacs also allows users to make use of Nextstep services, via a set
of commands whose names begin with &#8216;<samp class="samp">ns-service-</samp>&#8217; and end with the
name of the service.  Type <kbd class="kbd">M-x ns-service- <kbd class="key">TAB</kbd></kbd> to
see a list of these commands.  These functions either operate on
marked text (replacing it with the result) or take a string argument
and return the result as a string.  You can also use the Lisp function
<code class="code">ns-perform-service</code> to pass arbitrary strings to arbitrary
services and receive the results back.  Note that you may need to
restart Emacs to access newly-available services.
</p>
</div>
<div class="section-level-extent" id="GNUstep-Support">
<h3 class="section" id="GNUstep-Support-1">F.4 GNUstep Support</h3>

<p>Emacs can be built and run under GNUstep, but there are still
issues to be addressed.  Interested developers should contact
<a class="url" href="https://lists.gnu.org/mailman/listinfo/emacs-devel">the
emacs-devel mailing list</a>.
</p></div>
</div>



</body>
</html>
