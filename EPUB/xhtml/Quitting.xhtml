<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<!-- 这是 GNU Emacs 手册,
为 Emacs  29.2 更新

英文原版版权提示 - Original English version copyright note

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."

中文翻译版版权提示 - Chinese translation revision copyright notice

版权所有 © 1985-2024 林羿轩(Ralph Lin).

您有在 Free Software Foundation发布的GNU Free Documentation License 第1.3版或之后版本的约束下对其进行再发布及修的权利。 恒定章节为 "The GNU Manifesto," "分发" "(中文版)GNU GENERAL PUBLIC LICENSE" 和
"GNU GENERAL PUBLIC LICENSE" , 前封面文字为 "A GNU
Manual,"后封面文字如下(a).  本书的FDL许可证可以在 "GNU Free Documentation
License."找到.

(a) FSF的后封面文字为: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom."
 -->
<title>51 Quitting and Aborting (GNU Emacs Manual)</title>

<meta name="description" content="51 Quitting and Aborting (GNU Emacs Manual)"/>
<meta name="keywords" content="51 Quitting and Aborting (GNU Emacs Manual)"/>
<meta name="resource-type" content="document"/>
<meta name="distribution" content="global"/>
<meta name="Generator" content="texi2any"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<link href="emacs.xhtml" rel="start" title="Emacs 编辑器"/>
<link href="Key-Index.xhtml" rel="index" title="Key (Character) Index"/>
<link href="emacs.xhtml#SEC_Contents" rel="contents" title="Table of Contents"/>
<link href="emacs.xhtml" rel="up" title="Emacs 编辑器"/>
<link href="Lossage.xhtml#Lossage" rel="next" title="52 Dealing with Emacs Trouble"/>
<link href="Customization.xhtml#Customization" rel="prev" title="50 Customization"/>
<style type="text/css">
<!--
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span.r {font-family: initial; font-weight: normal; font-style: normal}
-->
</style>


</head>

<body lang="zh_CN">
<div class="chapter-level-extent" id="Quitting">

<h2 class="chapter section-level-set-chapter" id="Quitting-and-Aborting">51 Quitting and Aborting</h2>

<dl class="table">
<dt><kbd class="kbd">C-g</kbd></dt>
<dt><kbd class="kbd">C-<kbd class="key">Break</kbd> <span class="r">(MS-DOS only)</span></kbd></dt>
<dd><p>Quit: cancel running or partially typed command.
</p></dd>
<dt><kbd class="kbd">C-]</kbd></dt>
<dd><p>Abort innermost recursive editing level and cancel the command which
invoked it (<code class="code">abort-recursive-edit</code>).
</p></dd>
<dt><kbd class="kbd"><kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd></kbd></dt>
<dd><p>Either quit or abort, whichever makes sense (<code class="code">keyboard-escape-quit</code>).
</p></dd>
<dt><kbd class="kbd">M-x top-level</kbd></dt>
<dd><p>Abort all recursive editing levels that are currently executing.
</p></dd>
<dt><kbd class="kbd">C-/</kbd></dt>
<dt><kbd class="kbd">C-x u</kbd></dt>
<dt><kbd class="kbd">C-_</kbd></dt>
<dd><p>Cancel a previously made change in the buffer contents (<code class="code">undo</code>).
</p></dd>
</dl>

<p>There are two ways of canceling a command before it has finished:
<em class="dfn">quitting</em> with <kbd class="kbd">C-g</kbd>, and <em class="dfn">aborting</em> with <kbd class="kbd">C-]</kbd> or
<kbd class="kbd">M-x top-level</kbd>.  Quitting cancels a partially typed command, or
one which is still running.  Aborting exits a recursive editing level
and cancels the command that invoked the recursive edit
(see <a class="pxref" href="Recursive-Edit.xhtml">Recursive Editing Levels</a>).
</p>
<a class="index-entry-id" id="index-quitting"></a>
<a class="index-entry-id" id="index-C_002dg"></a>
<p>Quitting with <kbd class="kbd">C-g</kbd> is the way to get rid of a partially typed
command, or a numeric argument that you don&#8217;t want.  Furthermore, if
you are in the middle of a command that is running, <kbd class="kbd">C-g</kbd> stops
the command in a relatively safe way.  For example, if you quit out of
a kill command that is taking a long time, either your text will
<em class="emph">all</em> still be in the buffer, or it will <em class="emph">all</em> be in the
kill ring, or maybe both.  If the region is active, <kbd class="kbd">C-g</kbd>
deactivates the mark, unless Transient Mark mode is off
(see <a class="pxref" href="Mark.xhtml#Disabled-Transient-Mark">Disabling Transient Mark Mode</a>).  If you are in the middle of an
incremental search, <kbd class="kbd">C-g</kbd> behaves specially; it may take two
successive <kbd class="kbd">C-g</kbd> characters to get out of a search.
See <a class="xref" href="Search.xhtml#Incremental-Search">Incremental Search</a>, for details.
</p>
<p>If you type <kbd class="kbd">C-g</kbd> in a minibuffer, this quits the command that
opened that minibuffer, closing it.  If that minibuffer is not the
most recently opened one (which can happen when
<code class="code">minibuffer-follows-selected-frame</code> is <code class="code">nil</code> (see <a class="pxref" href="Minibuffer.xhtml#Basic-Minibuffer">Using the Minibuffer</a>)), <kbd class="kbd">C-g</kbd> also closes the more recently opened ones,
quitting their associated commands, after asking you for confirmation.
</p>
<p>On MS-DOS, the character <kbd class="kbd">C-<kbd class="key">Break</kbd></kbd> serves as a quit character
like <kbd class="kbd">C-g</kbd>.  The reason is that it is not feasible, on MS-DOS, to
recognize <kbd class="kbd">C-g</kbd> while a command is running, between interactions
with the user.  By contrast, it <em class="emph">is</em> feasible to recognize
<kbd class="kbd">C-<kbd class="key">Break</kbd></kbd> at all times.
See <a class="xref" href="Microsoft-Windows.xhtml#MS_002dDOS-Keyboard">Keyboard Usage on MS-DOS</a>.
</p>
<a class="index-entry-id" id="index-keyboard_002dquit"></a>
<p><kbd class="kbd">C-g</kbd> works by setting the variable <code class="code">quit-flag</code> to <code class="code">t</code>
the instant <kbd class="kbd">C-g</kbd> is typed; Emacs Lisp checks this variable
frequently, and quits if it is non-<code class="code">nil</code>.  <kbd class="kbd">C-g</kbd> is only
actually executed as a command if you type it while Emacs is waiting for
input.  In that case, the command it runs is <code class="code">keyboard-quit</code>.
</p>
<p>On a text terminal, if you quit with <kbd class="kbd">C-g</kbd> a second time before
the first <kbd class="kbd">C-g</kbd> is recognized, you activate the emergency-escape
feature and return to the shell.  See <a class="xref" href="Lossage.xhtml#Emergency-Escape">Emergency Escape</a>.
</p>
<a class="index-entry-id" id="index-NFS-and-quitting"></a>
<p>There are some situations where you cannot quit.  When Emacs is
waiting for the operating system to do something, quitting is
impossible unless special pains are taken for the particular system
call within Emacs where the waiting occurs.  We have done this for the
system calls that users are likely to want to quit from, but it&#8217;s
possible you will encounter a case not handled.  In one very common
case&#8212;waiting for file input or output using NFS&#8212;Emacs itself knows
how to quit, but many NFS implementations simply do not allow user
programs to stop waiting for NFS when the NFS server is hung.
</p>
<a class="index-entry-id" id="index-aborting-recursive-edit"></a>
<a class="index-entry-id" id="index-abort_002drecursive_002dedit"></a>
<a class="index-entry-id" id="index-C_002d_005d"></a>
<p>Aborting with <kbd class="kbd">C-]</kbd> (<code class="code">abort-recursive-edit</code>) is used to get
out of a recursive editing level and cancel the command which invoked
it.  Quitting with <kbd class="kbd">C-g</kbd> does not do this, and could not do this,
because it is used to cancel a partially typed command <em class="emph">within</em> the
recursive editing level.  Both operations are useful.  For example, if
you are in a recursive edit and type <kbd class="kbd">C-u 8</kbd> to enter a numeric
argument, you can cancel that argument with <kbd class="kbd">C-g</kbd> and remain in the
recursive edit.
</p>
<a class="index-entry-id" id="index-keyboard_002descape_002dquit"></a>
<a class="index-entry-id" id="index-ESC-ESC-ESC"></a>
<p>The sequence <kbd class="kbd"><kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd> <kbd class="key">ESC</kbd></kbd>
(<code class="code">keyboard-escape-quit</code>) can either quit or abort.  (We defined
it this way because <kbd class="key">ESC</kbd> means &#8220;get out&#8221; in many PC programs.)
It can cancel a prefix argument, clear a selected region, or get out
of a Query Replace, like <kbd class="kbd">C-g</kbd>.  It can get out of the minibuffer
or a recursive edit, like <kbd class="kbd">C-]</kbd>.  It can also get out of splitting
the frame into multiple windows, as with <kbd class="kbd">C-x 1</kbd>.  One thing it
cannot do, however, is stop a command that is running.  That&#8217;s because
it executes as an ordinary command, and Emacs doesn&#8217;t notice it until
it is ready for the next command.
</p>
<a class="index-entry-id" id="index-top_002dlevel"></a>
<p>The command <kbd class="kbd">M-x top-level</kbd> is equivalent to enough
<kbd class="kbd">C-]</kbd> commands to get you out of all the levels of recursive edits
that you are in; it also exits the minibuffer if it is active.
<kbd class="kbd">C-]</kbd> gets you out one level at a time, but <kbd class="kbd">M-x top-level</kbd>
goes out all levels at once.  Both <kbd class="kbd">C-]</kbd> and <kbd class="kbd">M-x top-level</kbd>
are like all other commands, and unlike <kbd class="kbd">C-g</kbd>, in that they take
effect only when Emacs is ready for a command.  <kbd class="kbd">C-]</kbd> is an
ordinary key and has its meaning only because of its binding in the
keymap.  See <a class="xref" href="Recursive-Edit.xhtml">Recursive Editing Levels</a>.
</p>
<p><kbd class="kbd">C-/</kbd> (<code class="code">undo</code>) is not strictly speaking a way of canceling
a command, but you can think of it as canceling a command that already
finished executing.  See <a class="xref" href="Fixit.xhtml#Undo">Undo</a>, for more information about the undo
facility.
</p>
</div>



</body>
</html>
